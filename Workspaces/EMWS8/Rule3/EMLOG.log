*------------------------------------------------------------*
User:                Lukas Fahr
Date:                28. April 2016
Time:                09.51 Uhr
Site:                70107571
Platform:            X64_7PRO
Maintenance Release: 9.03.01M2P081512
EM Version:          12.1
* 
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09.51 Uhr" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Training Log
Date:                28. April 2016
Time:                09.51 Uhr
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O3RSIYJZ
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O3RSIYJZ new;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOG
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMLOG.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09.51 Uhr" );
MPRINT(EM_DIAGRAM):   file _LOG;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                Lukas Fahr";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "Site:                70107571";
MPRINT(EM_DIAGRAM):   put "Platform:            X64_7PRO";
MPRINT(EM_DIAGRAM):   put "Maintenance Release: 9.03.01M2P081512";
MPRINT(EM_DIAGRAM):   put "EM Version:          12.1";
MPRINT(EM_DIAGRAM):   put "* ";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMTRAIN.log" encoding="UTF-8" NOBOM;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _LOG MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_LOGIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _LOGIN
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMSCORE.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMREPORT.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    filename _LOG;
MPRINT(EM_DIAGRAM):    filename _OUT
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMOUTPUT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09.51 Uhr" );
MPRINT(EM_DIAGRAM):   file _OUT;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                Lukas Fahr";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _OUT MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_OUTIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    filename _OUT;
MPRINT(EM_DIAGRAM):    filename _emtool_
'C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMRUNSTATUS.xml' encoding="UTF-8" NOBOM;
1781116    proc freq data=EMWS8.Rule3_VariableSet noprint;
MPRINT(EM_DIAGRAM):    proc freq data=EMWS8.Rule3_VariableSet noprint;
1781117    table ROLE*LEVEL/out=WORK.Rule3META;
MPRINT(EM_DIAGRAM):   table ROLE*LEVEL/out=WORK.Rule3META;
1781118    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 48 observations read from the data set EMWS8.RULE3_VARIABLESET.
NOTE: The data set WORK.RULE3META has 6 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1781119    proc print data=WORK.Rule3META label noobs;
MPRINT(EM_DIAGRAM):   proc print data=WORK.Rule3META label noobs;
1781120    var ROLE LEVEL COUNT;
MPRINT(EM_DIAGRAM):   var ROLE LEVEL COUNT;
1781121    label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL =
1781121  ! "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT =
1781121  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label ROLE = "Role" LEVEL = "Measurement Level" COUNT = "Frequency
Count";
1781122    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1781123    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Variable Summary";
MPRINT(EM_DIAGRAM):   run;
1781124    run;
 
NOTE: There were 6 observations read from the data set WORK.RULE3META.
NOTE: The PROCEDURE PRINT printed page 1755.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781125    title10;
MPRINT(EM_DIAGRAM):   title10;
1781126    %let EMNORLEN = %DMNORLEN;
MPRINT(EM_DIAGRAM):
EMWS8.BINNING_TRAIN EMWS8.BINNING_TRAIN
EMWS8.BINNING_TRAIN EMWS8.BINNING_TRAIN EMWS8 BINNING_TRAIN
EMWS8.BINNING_TRAIN EMWS8.BINNING_TRAIN
EMWS8.BINNING_TRAIN EMWS8.BINNING_TRAIN EMWS8 BINNING_TRAIN
MPRINT(EM_DIAGRAM):    proc dmdb data=EMWS8.BINNING_TRAIN
classout=WORK._DMDBCLASSTARGET(keep=NAME NRAW CRAW LEVEL FREQUENCY NMISSPERCENT);
MPRINT(EM_DIAGRAM):   class DepVar(DESC) ;
MPRINT(EM_DIAGRAM):   run;
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _INIT >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _term >>
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   set WORK._DMDBCLASSTARGET;
MPRINT(EM_DIAGRAM):   where ^(NRAW eq . and CRAW eq '') and NAME="DepVar";
MPRINT(EM_DIAGRAM):   if _N_=1 then call symput('_newevent', strip(LEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK._DMDBCLASSTARGET out=_TEMPCLASS(keep=LEVEL FREQUENCY
NMISSPERCENT rename=(LEVEL=DepVar));
MPRINT(EM_DIAGRAM):   by LEVEL;
MPRINT(EM_DIAGRAM):   where ^(NRAW eq . and CRAW eq '') and NAME="DepVar";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _TEMPCLASS;
MPRINT(EM_DIAGRAM):   set _TEMPCLASS;
MPRINT(EM_DIAGRAM):   NMISSPERCENT= NMISSPERCENT/100;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _sortedDecData;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_DepVar_DD;
MPRINT(EM_DIAGRAM):   _levelorder_=_N_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_sortedDecdata;
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   merge _TEMPCLASS(in=_a) _sortedDecdata(in=_b);
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   if (_a and ^_b) or (^_a and _b) then call symput('_emresetDec', '1');
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_DepVar_DD;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_DepVar_DD;
MPRINT(EM_DIAGRAM):   _levelorder_=_N_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS8.Rule3_DepVar_DD;
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_DepVar_DD;
MPRINT(EM_DIAGRAM):   merge EMWS8.Rule3_DepVar_DD _TEMPCLASS(rename=(NMISSPERCENT=TRAINPRIOR
FREQUENCY=COUNT));
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS8.Rule3_DepVar_DD
out=EMWS8.Rule3_DepVar_DD(drop=_levelorder_);
MPRINT(EM_DIAGRAM):   by _levelorder_;
MPRINT(EM_DIAGRAM):   run;
1781173    data WORK.Rule3_EVENT(KEEP=VARIABLE LABEL LEVEL EVENT NUMLEVELS ORDER);
MPRINT(EM_DIAGRAM):    data WORK.Rule3_EVENT(KEEP=VARIABLE LABEL LEVEL EVENT NUMLEVELS ORDER);
1781174    length ORDER $20;
MPRINT(EM_DIAGRAM):   length ORDER $20;
1781175    label VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel,  NOQUOTE))"
1781175  ! EVENT = "%sysfunc(sasmsg(sashelp.dmine, assmt_event_vlabel, NOQUOTE))" NUMLEVELS =
1781175  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_numcat_vlabel, NOQUOTE))" LEVEL =
1781176       "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" ORDER =
1781176  ! "%sysfunc(sasmsg(sashelp.dmine, meta_order_vlabel, NOQUOTE))" LABEL =
1781176  ! "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label VARIABLE = "Target" EVENT = "Event" NUMLEVELS = "Number of Levels"
LEVEL = "Measurement Level" ORDER = "Order" LABEL = "Label";
1781177    set EMWS8.RULE3_DEPVAR_DM( where=(_TYPE_="TARGET"));
MPRINT(EM_DIAGRAM):   set EMWS8.RULE3_DEPVAR_DM( where=(_TYPE_="TARGET"));
1781178    NumLevels=2;
MPRINT(EM_DIAGRAM):   NumLevels=2;
1781179    select(upcase(ORDER));
MPRINT(EM_DIAGRAM):   select(upcase(ORDER));
1781180    when('DESC') ORDER = 'Descending';
MPRINT(EM_DIAGRAM):   when('DESC') ORDER = 'Descending';
1781181    when('ASC') ORDER = 'Ascending';
MPRINT(EM_DIAGRAM):   when('ASC') ORDER = 'Ascending';
1781182    when('FMTDESC') ORDER = 'Formatted Descending';
MPRINT(EM_DIAGRAM):   when('FMTDESC') ORDER = 'Formatted Descending';
1781183    when('FMTASC') ORDER = 'Formatted Ascending';
MPRINT(EM_DIAGRAM):   when('FMTASC') ORDER = 'Formatted Ascending';
1781184    otherwise ORDER = 'Descending';
MPRINT(EM_DIAGRAM):   otherwise ORDER = 'Descending';
1781185    end;
MPRINT(EM_DIAGRAM):   end;
1781186    output;
MPRINT(EM_DIAGRAM):   output;
1781187    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set EMWS8.RULE3_DEPVAR_DM.
      WHERE _TYPE_='TARGET';
NOTE: The data set WORK.RULE3_EVENT has 1 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781188    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1781189    proc print data=WORK.Rule3_EVENT noobs label;
MPRINT(EM_DIAGRAM):   proc print data=WORK.Rule3_EVENT noobs label;
1781190    var VARIABLE EVENT LEVEL NUMLEVELS ORDER LABEL;
MPRINT(EM_DIAGRAM):   var VARIABLE EVENT LEVEL NUMLEVELS ORDER LABEL;
1781191    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1781192    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_modelEvent_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Model Events";
MPRINT(EM_DIAGRAM):   run;
1781193    run;
 
NOTE: There were 1 observations read from the data set WORK.RULE3_EVENT.
NOTE: The PROCEDURE PRINT printed page 1756.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781194    title10;
MPRINT(EM_DIAGRAM):   title10;
"No decisions defined for target "DepVar"."
1781195    proc print data = EMWS8.Rule3_DepVar_DM noobs label;
MPRINT(EM_DIAGRAM):    proc print data = EMWS8.Rule3_DepVar_DM noobs label;
1781196    var _type_ variable label;
MPRINT(EM_DIAGRAM):   var _type_ variable label;
1781197    where _type_ ^in('MATRIX', 'DECISION', 'TRAINPRIOR', 'DATAPRIOR', 'DECPRIOR');
MPRINT(EM_DIAGRAM):   where _type_ ^in('MATRIX', 'DECISION', 'TRAINPRIOR', 'DATAPRIOR',
'DECPRIOR');
1781198    label _TYPE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,     NOQUOTE))"
1781198  ! VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" LABEL =
1781198  ! "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label _TYPE_ = "Type" VARIABLE = "Variable" LABEL = "Label";
1781199    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1781200    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_predDecVars_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Predicted and decision variables";
MPRINT(EM_DIAGRAM):   run;
1781201    run;
 
NOTE: There were 7 observations read from the data set EMWS8.RULE3_DEPVAR_DM.
      WHERE _type_ not in ('DATAPRIOR', 'DECISION', 'DECPRIOR', 'MATRIX', 'TRAINPRIOR');
NOTE: The PROCEDURE PRINT printed page 1757.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781202    title10;
MPRINT(EM_DIAGRAM):   title10;
1781203    data WORK.M145BPSG;
MPRINT(EM_DIAGRAM):    data WORK.M145BPSG;
1781204    set WORK.M145BPSG;
MPRINT(EM_DIAGRAM):   set WORK.M145BPSG;
1781205    where(use = 'Y' or (role = 'INPUT' and use = 'D'));
MPRINT(EM_DIAGRAM):   where(use = 'Y' or (role = 'INPUT' and use = 'D'));
1781206    if (role='REJECTED') then role='INPUT';
MPRINT(EM_DIAGRAM):   if (role='REJECTED') then role='INPUT';
1781207    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 16 observations read from the data set WORK.M145BPSG.
      WHERE (use='Y') or ((role='INPUT') and (use='D'));
NOTE: The data set WORK.M145BPSG has 16 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781208    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
1781209    * EM: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBClass Macro ;
1781210    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781211    %macro DMDBClass;
1781212        DepVar(DESC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC) GRP_Mnt(ASC)
1781213       GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
1781214       GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
1781215       GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
1781216    %mend DMDBClass;
1781217    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781218    * EM: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBVar Macro ;
1781219    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781220    %macro DMDBVar;
1781221        Year_Birth
1781222    %mend DMDBVar;
1781223    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781224    * EM: Create DMDB;
MPRINT(EM_DIAGRAM):   * EM: Create DMDB;
1781225    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781226    proc dmdb batch data=EMWS8.BINNING_TRAIN
1781227    dmdbcat=WORK.EM_DMDB
1781228    maxlevel = 513
1781229    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.BINNING_TRAIN dmdbcat=WORK.EM_DMDB maxlevel =
513 ;
MPRINT(EM_DIAGRAM):   class
1781230    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC)
GRP_Mnt(ASC) GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
1781231    var %DMDBVar;
MPRINT(DMDBVAR):   Year_Birth
MPRINT(EM_DIAGRAM):  ;
1781232    target
1781233    DepVar
1781234    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
1781235    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1781236    quit;
1781237    *--- end code ---*;
 
1781238    data WORK.M145BPSG;
MPRINT(EM_DIAGRAM):    data WORK.M145BPSG;
1781239    set WORK.M145BPSG end=eof;
MPRINT(EM_DIAGRAM):   set WORK.M145BPSG end=eof;
1781240    output;
MPRINT(EM_DIAGRAM):   output;
1781241    if eof then do;
MPRINT(EM_DIAGRAM):   if eof then do;
1781242    NAME="";
MPRINT(EM_DIAGRAM):   NAME="";
1781243    ROLE="COST";
MPRINT(EM_DIAGRAM):   ROLE="COST";
1781244    LEVEL="INTERVAL";
MPRINT(EM_DIAGRAM):   LEVEL="INTERVAL";
1781245    TYPE="N";
MPRINT(EM_DIAGRAM):   TYPE="N";
1781246    output;
MPRINT(EM_DIAGRAM):   output;
1781247    end;
MPRINT(EM_DIAGRAM):   end;
1781248    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 16 observations read from the data set WORK.M145BPSG.
NOTE: The data set WORK.M145BPSG has 17 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: There were 2 observations read from the data set EMWS8.RULE3_DEPVAR_DD.
NOTE: The data set WORK.DEPVAR has 2 observations and 7 variables.
1781249    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1781250    * Rule3: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule3: Create decision matrix;
1781251    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781252    data WORK.DepVar;
MPRINT(EM_DIAGRAM):   data WORK.DepVar;
1781253      length   DepVar                           $  32
1781254               COUNT                                8
1781255               DATAPRIOR                            8
1781256               TRAINPRIOR                           8
1781257               DECPRIOR                             8
1781258               DECISION1                            8
1781259               DECISION2                            8
1781260               ;
MPRINT(EM_DIAGRAM):   length DepVar $ 32 COUNT 8 DATAPRIOR 8 TRAINPRIOR 8 DECPRIOR 8 DECISION1
8 DECISION2 8 ;
1781261
1781262      label    COUNT="Level Counts"
1781263               DATAPRIOR="Data Proportions"
1781264               TRAINPRIOR="Training Proportions"
1781265               DECPRIOR="Decision Priors"
1781266               DECISION1="1"
1781267               DECISION2="0"
1781268               ;
MPRINT(EM_DIAGRAM):   label COUNT= "Level Counts" DATAPRIOR= "Data Proportions" TRAINPRIOR=
"Training Proportions" DECPRIOR= "Decision Priors" DECISION1= "1" DECISION2= "0" ;
1781269      format   COUNT 10.
1781270               ;
MPRINT(EM_DIAGRAM):   format COUNT 10. ;
1781271    DepVar="1"; COUNT=359; DATAPRIOR=0.151221567; TRAINPRIOR=0.15122156697556;
1781271  ! DECPRIOR=.; DECISION1=1; DECISION2=0;
MPRINT(EM_DIAGRAM):   DepVar="1";
MPRINT(EM_DIAGRAM):   COUNT=359;
MPRINT(EM_DIAGRAM):   DATAPRIOR=0.151221567;
MPRINT(EM_DIAGRAM):   TRAINPRIOR=0.15122156697556;
MPRINT(EM_DIAGRAM):   DECPRIOR=.;
MPRINT(EM_DIAGRAM):   DECISION1=1;
MPRINT(EM_DIAGRAM):   DECISION2=0;
1781272    output;
MPRINT(EM_DIAGRAM):   output;
1781273    DepVar="0"; COUNT=2015; DATAPRIOR=0.848778433; TRAINPRIOR=0.84877843302443;
1781273  ! DECPRIOR=.; DECISION1=0; DECISION2=1;
MPRINT(EM_DIAGRAM):   DepVar="0";
MPRINT(EM_DIAGRAM):   COUNT=2015;
MPRINT(EM_DIAGRAM):   DATAPRIOR=0.848778433;
MPRINT(EM_DIAGRAM):   TRAINPRIOR=0.84877843302443;
MPRINT(EM_DIAGRAM):   DECPRIOR=.;
MPRINT(EM_DIAGRAM):   DECISION1=0;
MPRINT(EM_DIAGRAM):   DECISION2=1;
1781274    output;
MPRINT(EM_DIAGRAM):   output;
1781275    ;
MPRINT(EM_DIAGRAM):   ;
1781276    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK.DEPVAR has 2 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781277    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
1781278    modify DepVar(type=PROFIT label=DepVar);
MPRINT(EM_DIAGRAM):   modify DepVar(type=PROFIT label= DepVar);
MPRINT(EM_DIAGRAM):   label DECISION1= '1';
MPRINT(EM_DIAGRAM):   label DECISION2= '0';
MPRINT(EM_DIAGRAM):   run;
1781279    label DECISION1= '1';
1781280    label DECISION2= '0';
1781281    run;
 
NOTE: MODIFY was successful for WORK.DEPVAR.DATA.
1781282    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781283    *------------------------------------------------------------* ;
1781284    * Rule3: DMDBClass Macro ;
1781285    *------------------------------------------------------------* ;
1781286    %macro DMDBClass;
1781287        DepVar(DESC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC) GRP_Mnt(ASC)
1781288       GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
1781289       GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
1781290       GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
1781291    %mend DMDBClass;
1781292    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781293    * Rule3: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBVar Macro ;
1781294    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781295    %macro DMDBVar;
1781296        Year_Birth
1781297    %mend DMDBVar;
1781298    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781299    * Rule3: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule3: Create DMDB;
1781300    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781301    proc dmdb batch data=EMWS8.BINNING_TRAIN
1781302    dmdbcat=WORK.Rule3_DMDB
1781303    maxlevel = 513
1781304    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.BINNING_TRAIN dmdbcat=WORK.Rule3_DMDB
maxlevel = 513 ;
MPRINT(EM_DIAGRAM):   class
1781305    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC)
GRP_Mnt(ASC) GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
1781306    var %DMDBVar;
MPRINT(DMDBVAR):   Year_Birth
MPRINT(EM_DIAGRAM):  ;
1781307    target
1781308    DepVar
1781309    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
1781310    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1781311    quit;
1781312    *--- end code ---*;
 
1781313    data WORK.M03AL0Q2;
MPRINT(EM_DIAGRAM):    data WORK.M03AL0Q2;
1781314    set WORK.M03AL0Q2;
MPRINT(EM_DIAGRAM):   set WORK.M03AL0Q2;
1781315    if NAME^='DepVar' then delete;
MPRINT(EM_DIAGRAM):   if NAME^='DepVar' then delete;
1781316    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M03AL0Q2.
NOTE: The data set WORK.M03AL0Q2 has 1 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781317    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
1781318    * EM: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBClass Macro ;
1781319    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781320    %macro DMDBClass;
1781321        DepVar(DESC)
1781322    %mend DMDBClass;
1781323    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781324    * EM: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBVar Macro ;
1781325    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781326    %macro DMDBVar;
1781327
1781328    %mend DMDBVar;
1781329    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781330    * EM: Create DMDB;
MPRINT(EM_DIAGRAM):   * EM: Create DMDB;
1781331    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781332    proc dmdb batch data=EMWS8.BINNING_TRAIN
1781333    dmdbcat=WORK.EM_DMDB
1781334    maxlevel = 513
1781335    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.BINNING_TRAIN dmdbcat=WORK.EM_DMDB maxlevel =
513 ;
MPRINT(EM_DIAGRAM):   class
1781336    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC)
MPRINT(EM_DIAGRAM):  ;
1781337    target
1781338    DepVar
1781339    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
1781340    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1781341    quit;
1781342    *--- end code ---*;
 
1781343    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1781344    * Rule Induction Training;
MPRINT(EM_DIAGRAM):   * Rule Induction Training;
1781345    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
1781346    * Get counts for DepVar;
MPRINT(EM_DIAGRAM):    * Get counts for DepVar;
1781347    ;
MPRINT(EM_DIAGRAM):   ;
1781348    data _scr(keep= _level_ DepVar);
MPRINT(EM_DIAGRAM):   data _scr(keep= _level_ DepVar);
1781349    set EMWS8.BINNING_TRAIN;
MPRINT(EM_DIAGRAM):   set EMWS8.BINNING_TRAIN;
1781350    length _level_ $16;
MPRINT(EM_DIAGRAM):   length _level_ $16;
1781351    label _level_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_rulelevel_vlabel, NOQUOTE,
1781351  ! DepVar))";
MPRINT(EM_DIAGRAM):   label _level_ = "DepVar";
1781352    _tmp=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp=putn(DepVar, 'best.');
1781353    %DMNORMCP(_tmp, _level_);
MPRINT(DMNORMCP):   _level_=dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1781354    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: The data set WORK._SCR has 2374 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
1781355    proc freq data=_scr noprint;
MPRINT(EM_DIAGRAM):   proc freq data=_scr noprint;
1781356    table _level_ / out=_count;
MPRINT(EM_DIAGRAM):   table _level_ / out=_count;
1781357    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2374 observations read from the data set WORK._SCR.
NOTE: The data set WORK._COUNT has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781358    * Get Normalized counts for DepVar;
MPRINT(EM_DIAGRAM):    * Get Normalized counts for DepVar;
1781359    ;
MPRINT(EM_DIAGRAM):   ;
1781360    data _scr(keep= _level_ DepVar);
MPRINT(EM_DIAGRAM):   data _scr(keep= _level_ DepVar);
1781361    set EMWS8.BINNING_VALIDATE;
MPRINT(EM_DIAGRAM):   set EMWS8.BINNING_VALIDATE;
1781362    length _level_ $16;
MPRINT(EM_DIAGRAM):   length _level_ $16;
1781363    label _level_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_rulelevel_vlabel, NOQUOTE,
1781363  ! DepVar))";
MPRINT(EM_DIAGRAM):   label _level_ = "DepVar";
1781364    _tmp = putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp = putn(DepVar, 'best.');
1781365    %DMNORMCP(_tmp, _level_);
MPRINT(DMNORMCP):   _level_=dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1781366    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: View EMWS8.BINNING_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: There were 1018 observations read from the data set EMWS8.BINNING_VALIDATE.
NOTE: The data set WORK._SCR has 1018 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
1781367    proc freq data=_scr noprint;
MPRINT(EM_DIAGRAM):   proc freq data=_scr noprint;
1781368    table _level_ / out= _vcount;
MPRINT(EM_DIAGRAM):   table _level_ / out= _vcount;
1781369    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1018 observations read from the data set WORK._SCR.
NOTE: The data set WORK._VCOUNT has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781370    data _vcount;
MPRINT(EM_DIAGRAM):    data _vcount;
1781371    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
1781372    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
1781373    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
1781374    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
1781375    rename percent = vpercent;
MPRINT(EM_DIAGRAM):   rename percent = vpercent;
1781376    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 2 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781377    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1781378    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
1781379    by _level_;
MPRINT(EM_DIAGRAM):   by _level_;
1781380    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781381    data _count;
MPRINT(EM_DIAGRAM):    data _count;
1781382    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1781383    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
1781384    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
1781385    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781386    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
1781387    by DESCENDING count;
MPRINT(EM_DIAGRAM):   by DESCENDING count;
1781388    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1781389    *;
1781390    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_tarfreq_title, NOQUOTE, DepVar))";
MPRINT(EM_DIAGRAM):   title9 "Target=DepVar: Frequencies";
MPRINT(EM_DIAGRAM):   *;
1781391    *;
1781392    proc print data=_count noobs label;
MPRINT(EM_DIAGRAM):   proc print data=_count noobs label;
1781393    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 1758.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781394    title9;
MPRINT(EM_DIAGRAM):   title9;
1781395    data WORK.M2TAHXKY;
MPRINT(EM_DIAGRAM):    data WORK.M2TAHXKY;
1781396    set WORK.M2TAHXKY;
MPRINT(EM_DIAGRAM):   set WORK.M2TAHXKY;
1781397    if NAME^='DepVar' then delete;
MPRINT(EM_DIAGRAM):   if NAME^='DepVar' then delete;
1781398    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M2TAHXKY.
NOTE: The data set WORK.M2TAHXKY has 1 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781399    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
1781400    * EM: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBClass Macro ;
1781401    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781402    %macro DMDBClass;
1781403        DepVar(DESC)
1781404    %mend DMDBClass;
1781405    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781406    * EM: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBVar Macro ;
1781407    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781408    %macro DMDBVar;
1781409
1781410    %mend DMDBVar;
1781411    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781412    * EM: Create DMDB;
MPRINT(EM_DIAGRAM):   * EM: Create DMDB;
1781413    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781414    proc dmdb batch data=EMWS8.BINNING_TRAIN
1781415    dmdbcat=WORK.EM_DMDB
1781416    maxlevel = 513
1781417    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.BINNING_TRAIN dmdbcat=WORK.EM_DMDB maxlevel =
513 ;
MPRINT(EM_DIAGRAM):   class
1781418    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC)
MPRINT(EM_DIAGRAM):  ;
1781419    target
1781420    DepVar
1781421    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
1781422    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1781423    quit;
1781424    *--- end code ---*;
 
1781425    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1781426    * Rip Model 1;
MPRINT(EM_DIAGRAM):   * Rip Model 1;
1781427    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781428    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781429    * TREE MODEL DepVar BINARY RIP1;
MPRINT(EM_DIAGRAM):   * TREE MODEL DepVar BINARY RIP1;
1781430    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
MPRINT(EM_DIAGRAM):   reset noprint;
MPRINT(EM_DIAGRAM):   select count(*) into :_tmpnobs from EMWS8.BINNING_TRAIN;
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
MPRINT(EM_DIAGRAM):   quit;
1781431    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1781432    * Rule3: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule3: Create decision matrix;
1781433    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781434    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781435    * Rule3: Tree Variables Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Tree Variables Macro ;
1781436    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781437    %macro EM_TREEVARS;
1781438        GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
1781439       GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
1781440       GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1781441       Year_Birth
1781442    %mend EM_TREEVARS;
1781443    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781444    * Rule3: Tree Targets Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Tree Targets Macro ;
1781445    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781446    %macro EM_TREETARGETS;
1781447        DepVar
1781448    %mend EM_TREETARGETS;
1781449    data WORK.EM_Rule3 / view=WORK.EM_Rule3;
MPRINT(EM_DIAGRAM):   data WORK.EM_Rule3 / view=WORK.EM_Rule3;
1781450    set
1781450  ! EMWS8.BINNING_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
MPRINT(EM_DIAGRAM):   set EMWS8.BINNING_TRAIN(keep
MPRINT(EM_DIAGRAM):  =GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth DepVar);
1781451    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA STEP view saved on file WORK.EM_RULE3.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule3: Interval Inputs Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781452    *------------------------------------------------------------* ;
1781453    * Rule3: Interval Inputs Macro ;
1781454    *------------------------------------------------------------* ;
1781455    %macro INTINPUTS;
1781456        Year_Birth
1781457    %mend INTINPUTS;
1781458    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781459    * Rule3: Binary and Nominal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Binary and Nominal Inputs Macro ;
1781460    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781461    %macro NOMINPUTS;
1781462        GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
1781463       GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
1781464       GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1781465    %mend NOMINPUTS;
1781466    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781467    * Rule3: Ordinal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Ordinal Inputs Macro ;
1781468    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1781469    %macro ORDINPUTS;
1781470
1781471    %mend ORDINPUTS;
1781472    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1781473    * Rule3: Run ARBOR procedure;
MPRINT(EM_DIAGRAM):   * Rule3: Run ARBOR procedure;
1781474    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
1781475    proc arbor data=WORK.EM_Rule3
1781476    Leafsize=50
1781477    Mincatsize = 5
1781478    Maxdepth=4
1781479    Missing=USEINSEARCH
1781480    ;
MPRINT(EM_DIAGRAM):    proc arbor data=WORK.EM_Rule3 Leafsize=50 Mincatsize = 5 Maxdepth=4
Missing=USEINSEARCH ;
1781481    ;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_DIAGRAM):   input
1781482    input %INTINPUTS
MPRINT(INTINPUTS):   Year_Birth
1781483    / level = interval;
MPRINT(EM_DIAGRAM):   / level = interval;
MPRINT(EM_DIAGRAM):   input
1781484    input %NOMINPUTS
MPRINT(NOMINPUTS):   GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1781485    / level=nominal;
The SAS System
 
MPRINT(EM_DIAGRAM):   / level=nominal;
1781486    target DepVar / level=BINARY
1781487    Criterion=GINI
1781488    ;
MPRINT(EM_DIAGRAM):   target DepVar / level=BINARY Criterion=GINI ;
1781489    ;
MPRINT(EM_DIAGRAM):   ;
1781490    Performance DISK
1781491    ;
MPRINT(EM_DIAGRAM):   Performance DISK ;
NOTE: View EMWS8.BINNING_VALIDATE.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.20 seconds
 
1781492    Assess
1781493    Validata=EMWS8.BINNING_VALIDATE
1781494    measure=ASE
1781495    ;
MPRINT(EM_DIAGRAM):   Assess Validata=EMWS8.BINNING_VALIDATE measure=ASE ;
NOTE: 1402517 kilobytes of physical memory.
NOTE: Will use 2374 out of 2374 training cases.
NOTE: Using memory pool with 85638144 bytes.
NOTE: Passed training data 8 times.
NOTE: Training used 962976 bytes of work memory.
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: The subtree sequence contains 13 subtrees. The largest has 25 nodes and 13 leaves.
NOTE: Using subtree with 17 nodes and 9 leaves.
1781496    MAKEMACRO NLEAVES=nleaves;
MPRINT(EM_DIAGRAM):   MAKEMACRO NLEAVES=nleaves;
NOTE: Created macro variable NLEAVES equal to 9.
1781497    save
1781498    MODEL=WORK.OUTTREE_TREE_0NF5BC8
1781499    SEQUENCE=WORK.OUTSEQ_TREE_0NF5BC8
1781500    IMPORTANCE=WORK.OUTIMPORT_TREE_0NF5BC8
1781501    NODESTAT=WORK.OUTNODES_TREE_0NF5BC8
1781502    SUMMARY=WORK.OUTSUMMARY_TREE_0NF5BC8
1781503    STATSBYNODE=WORK.OUTSTATS_TREE_0NF5BC8
1781504    Pathlistnonmissing = WORK.OUTPATH_TREE_0NF5BC8
1781505    Rules = WORK.OUTRULES_TREE_0NF5BC8
1781506    ;
MPRINT(EM_DIAGRAM):   save MODEL=WORK.OUTTREE_TREE_0NF5BC8 SEQUENCE=WORK.OUTSEQ_TREE_0NF5BC8
IMPORTANCE=WORK.OUTIMPORT_TREE_0NF5BC8 NODESTAT=WORK.OUTNODES_TREE_0NF5BC8
SUMMARY=WORK.OUTSUMMARY_TREE_0NF5BC8 STATSBYNODE=WORK.OUTSTATS_TREE_0NF5BC8 Pathlistnonmissing
= WORK.OUTPATH_TREE_0NF5BC8 Rules = WORK.OUTRULES_TREE_0NF5BC8 ;
NOTE: The data set WORK.OUTIMPORT_TREE_0NF5BC8 has 15 observations and 6 variables.
NOTE: The data set WORK.OUTTREE_TREE_0NF5BC8 has 846 observations and 4 variables.
NOTE: The data set WORK.OUTNODES_TREE_0NF5BC8 has 17 observations and 24 variables.
NOTE: The data set WORK.OUTPATH_TREE_0NF5BC8 has 68 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_0NF5BC8 has 282 observations and 6 variables.
NOTE: The data set WORK.OUTSEQ_TREE_0NF5BC8 has 13 observations and 20 variables.
NOTE: The data set WORK.OUTSTATS_TREE_0NF5BC8 has 119 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_0NF5BC8 has 24 observations and 6 variables.
1781507    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1781507  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1.sas"
1781508    group=Rule3
1781509    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1.sas" group=Rule3 ;
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1.sas opened.
1781510    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1781510  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1_res.sas"
1781511    group=Rule3
1781512    residual
1781513    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1_res.sas" group=Rule3 residual ;
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1_res.sas opened.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
1781514    score data=EMWS8.BINNING_TRAIN out=_ptrain
1781515    ;
MPRINT(EM_DIAGRAM):   score data=EMWS8.BINNING_TRAIN out=_ptrain ;
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: The data set WORK._PTRAIN has 2374 observations and 73 variables.
NOTE: View EMWS8.BINNING_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
1781516    score data=EMWS8.BINNING_VALIDATE out=_pvalid
1781517    ;
MPRINT(EM_DIAGRAM):   score data=EMWS8.BINNING_VALIDATE out=_pvalid ;
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: The data set WORK._PVALID has 1018 observations and 73 variables.
1781518    run;
MPRINT(EM_DIAGRAM):   run;
 
1781519    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: View WORK.EM_RULE3.VIEW used (Total process time):
      real time           0.34 seconds
      cpu time            0.35 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: There were 2374 observations read from the data set WORK.EM_RULE3.
NOTE: The data set WORK._NAMEDAT has 2 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           0.36 seconds
      cpu time            0.35 seconds
 
 
1781520    data WORK.OUTIMPORT_TREE_0NF5BC8;
MPRINT(EM_DIAGRAM):    data WORK.OUTIMPORT_TREE_0NF5BC8;
1781521    set WORK.OUTIMPORT_TREE_0NF5BC8;
MPRINT(EM_DIAGRAM):   set WORK.OUTIMPORT_TREE_0NF5BC8;
1781522    label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL =
1781522  ! "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES =
1781522  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
1781523       "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES =
1781523  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
1781524    VIMPORTANCE = "%sysfunc(sasmsg(sashelp.dmine, rpt_vimportance_vlabel, noquote))"
1781524  ! RATIO = "%sysfunc(sasmsg(sashelp.dmine, rpt_ratio_vlabel, noquote))"
1781525    ;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" LABEL = "Label" NRULES = "Number of
Splitting Rules" IMPORTANCE = "Importance" NSURROGATES = "Number of Surrogate Rules"
VIMPORTANCE = "Validation Importance" RATIO = "Ratio of Validation to Training Importance" ;
1781526    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable NSURROGATES is uninitialized.
NOTE: There were 15 observations read from the data set WORK.OUTIMPORT_TREE_0NF5BC8.
NOTE: The data set WORK.OUTIMPORT_TREE_0NF5BC8 has 15 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781527    filename x "C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1781527  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\DESCRIBE.SOURCE" encoding='utf-8' NOBOM;
MPRINT(EM_DIAGRAM):   filename x "C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\DESCRIBE.SOURCE" encoding='utf-8' NOBOM;
1781528    data temp;
MPRINT(EM_DIAGRAM):    data temp;
1781529    length varname $28;
MPRINT(EM_DIAGRAM):   length varname $28;
1781530    retain varname;
MPRINT(EM_DIAGRAM):   retain varname;
1781531    set WORK.OUTPATH_TREE_0NF5BC8;
MPRINT(EM_DIAGRAM):   set WORK.OUTPATH_TREE_0NF5BC8;
1781532    if ^missing(variable) then varname=variable;
MPRINT(EM_DIAGRAM):   if ^missing(variable) then varname=variable;
1781533    else if ^missing(var_name) then varname=var_name;
MPRINT(EM_DIAGRAM):   else if ^missing(var_name) then varname=var_name;
1781534    output;
MPRINT(EM_DIAGRAM):   output;
1781535    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 68 observations read from the data set WORK.OUTPATH_TREE_0NF5BC8.
NOTE: The data set WORK.TEMP has 68 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781536    proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
1781537    by node;
MPRINT(EM_DIAGRAM):   by node;
1781538    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 68 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 68 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781539    proc sort data=WORK.OUTNODES_TREE_0NF5BC8 out=outnodes;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.OUTNODES_TREE_0NF5BC8 out=outnodes;
1781540    by node;
MPRINT(EM_DIAGRAM):   by node;
1781541    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.OUTNODES_TREE_0NF5BC8.
NOTE: The data set WORK.OUTNODES has 17 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781542    data temp;
MPRINT(EM_DIAGRAM):   data temp;
1781543    merge temp(in=_a) outnodes(keep= node
1781544    NPRIORS
1781545    P_DepVar0
1781546    P_DepVar1
1781547    );
MPRINT(EM_DIAGRAM):   merge temp(in=_a) outnodes(keep= node NPRIORS P_DepVar0 P_DepVar1 );
1781548    by node;
MPRINT(EM_DIAGRAM):   by node;
1781549    if _a;
MPRINT(EM_DIAGRAM):   if _a;
1781550    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 68 observations read from the data set WORK.TEMP.
NOTE: There were 17 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 68 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781551    proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
1781552    by node descending varname descending numeric_value;
MPRINT(EM_DIAGRAM):   by node descending varname descending numeric_value;
1781553    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 68 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 68 observations and 11 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781554    data _null_;
MPRINT(EM_DIAGRAM):   data _null_;
1781555    file x;
MPRINT(EM_DIAGRAM):   file x;
1781556    set temp;
MPRINT(EM_DIAGRAM):   set temp;
1781557    by node descending varname;
MPRINT(EM_DIAGRAM):   by node descending varname;
1781558    retain origvar oldnode string;
MPRINT(EM_DIAGRAM):   retain origvar oldnode string;
1781559    length origvar $32 oldnode 8 string $200;
MPRINT(EM_DIAGRAM):   length origvar $32 oldnode 8 string $200;
1781560    if _n_ = 1 then do;
MPRINT(EM_DIAGRAM):   if _n_ = 1 then do;
1781561    origvar = varname;
MPRINT(EM_DIAGRAM):   origvar = varname;
1781562    oldnode = node;
MPRINT(EM_DIAGRAM):   oldnode = node;
1781563    end;
MPRINT(EM_DIAGRAM):   end;
1781564    if first.node then do;
MPRINT(EM_DIAGRAM):   if first.node then do;
1781565    put "&EM_CODEBAR";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
1781566    put " Node = " node;
MPRINT(EM_DIAGRAM):   put " Node = " node;
1781567    put "&EM_CODEBAR";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
1781568    end;
MPRINT(EM_DIAGRAM):   end;
1781569    if first.varname then do;
MPRINT(EM_DIAGRAM):   if first.varname then do;
1781570    if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
1781571    if MISSING(CHARACTER_VALUE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(CHARACTER_VALUE) then do;
1781572    if NUMERIC_VALUE ne . then do;
MPRINT(EM_DIAGRAM):   if NUMERIC_VALUE ne . then do;
1781573    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
1781574    string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   string= "AND "|| strip(varname)||" "||strip(relation)||"
"||strip(numeric_value);
1781575    end;
MPRINT(EM_DIAGRAM):   end;
1781576    else do;
MPRINT(EM_DIAGRAM):   else do;
1781577    string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   string= "if "|| strip(varname)||" "||strip(relation)||"
"||strip(numeric_value);
1781578    end;
MPRINT(EM_DIAGRAM):   end;
1781579    end;
MPRINT(EM_DIAGRAM):   end;
1781580    end;
MPRINT(EM_DIAGRAM):   end;
1781581    else do;
MPRINT(EM_DIAGRAM):   else do;
1781582    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
1781583    string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   string= "AND "|| strip(varname)||" "||strip(relation)||"
"||strip(character_value);
1781584    end;
MPRINT(EM_DIAGRAM):   end;
1781585    else do;
MPRINT(EM_DIAGRAM):   else do;
1781586    string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   string= "if "|| strip(varname)||" "||strip(relation)||"
"||strip(character_value);
1781587    end;
MPRINT(EM_DIAGRAM):   end;
1781588    end;
MPRINT(EM_DIAGRAM):   end;
1781589    end;
MPRINT(EM_DIAGRAM):   end;
1781590    else if RELATION in ("=") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("=") then do;
1781591    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
1781592    string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
MPRINT(EM_DIAGRAM):   string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
1781593    end;
MPRINT(EM_DIAGRAM):   end;
1781594    else do;
MPRINT(EM_DIAGRAM):   else do;
1781595    string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
1781596    end;
MPRINT(EM_DIAGRAM):   end;
1781597    end;
MPRINT(EM_DIAGRAM):   end;
1781598    else if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISMISSING") then do;
1781599    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
1781600    string = " AND "|| strip(varname) || " equals Missing";
MPRINT(EM_DIAGRAM):   string = " AND "|| strip(varname) || " equals Missing";
1781601    end;
MPRINT(EM_DIAGRAM):   end;
1781602    else do;
MPRINT(EM_DIAGRAM):   else do;
1781603    string = "if "|| strip(varname) ||" equals Missing";
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" equals Missing";
1781604    end;
MPRINT(EM_DIAGRAM):   end;
1781605    end;
MPRINT(EM_DIAGRAM):   end;
1781606    else if RELATION in ("ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISNOTMISSING") then do;
1781607    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
1781608    string = " AND "|| strip(varname) || " equals All Values";
MPRINT(EM_DIAGRAM):   string = " AND "|| strip(varname) || " equals All Values";
1781609    end;
MPRINT(EM_DIAGRAM):   end;
1781610    else do;
MPRINT(EM_DIAGRAM):   else do;
1781611    string = "if "|| strip(varname) ||" equals All Values";
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" equals All Values";
1781612    end;
MPRINT(EM_DIAGRAM):   end;
1781613    end;
MPRINT(EM_DIAGRAM):   end;
1781614    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
1781615    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
1781616    end;
MPRINT(EM_DIAGRAM):   end;
1781617    else do;
MPRINT(EM_DIAGRAM):   else do;
1781618    if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
1781619    if MISSING(CHARACTER_VALUE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(CHARACTER_VALUE) then do;
1781620    if NUMERIC_VALUE ne . then do;
MPRINT(EM_DIAGRAM):   if NUMERIC_VALUE ne . then do;
1781621    if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||"
1781621  ! "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   if ^MISSING(string) then string= strip(string)||" AND "||
strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
1781622    else string= " if "|| strip(varname)||" "||strip(relation)||"
1781622  ! "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   else string= " if "|| strip(varname)||" "||strip(relation)||"
"||strip(numeric_value);
1781623    end;
MPRINT(EM_DIAGRAM):   end;
1781624    end;
MPRINT(EM_DIAGRAM):   end;
1781625    else do;
MPRINT(EM_DIAGRAM):   else do;
1781626    if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||"
1781626  ! "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   if ^MISSING(string) then string= strip(string)||" AND "||
strip(varname)||" "||strip(relation)||" "||strip(character_value);
1781627    else string= " if "|| strip(varname)||" "||strip(relation)||"
1781627  ! "||strip(character_value);
MPRINT(EM_DIAGRAM):   else string= " if "|| strip(varname)||" "||strip(relation)||"
"||strip(character_value);
1781628    end;
MPRINT(EM_DIAGRAM):   end;
1781629    end;
MPRINT(EM_DIAGRAM):   end;
1781630    else if RELATION in ("=") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("=") then do;
1781631    string = strip(string)||", "||strip(character_value);
MPRINT(EM_DIAGRAM):   string = strip(string)||", "||strip(character_value);
1781632    end;
MPRINT(EM_DIAGRAM):   end;
1781633    else if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISMISSING") then do;
1781634    end;
MPRINT(EM_DIAGRAM):   end;
1781635    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
1781636    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
1781637    end;
MPRINT(EM_DIAGRAM):   end;
1781638    if last.varname then do;
MPRINT(EM_DIAGRAM):   if last.varname then do;
1781639    if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION in ("ISMISSING") then do;
1781640    if ^first.varname then do;
MPRINT(EM_DIAGRAM):   if ^first.varname then do;
1781641    string = strip(string) || " or MISSING";
MPRINT(EM_DIAGRAM):   string = strip(string) || " or MISSING";
1781642    end;
MPRINT(EM_DIAGRAM):   end;
1781643    end;
MPRINT(EM_DIAGRAM):   end;
1781644    put string;
MPRINT(EM_DIAGRAM):   put string;
1781645    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
1781646    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
1781647    end;
MPRINT(EM_DIAGRAM):   end;
1781648    if last.node then do;
MPRINT(EM_DIAGRAM):   if last.node then do;
1781649    put "then ";
MPRINT(EM_DIAGRAM):   put "then ";
1781650    put " Tree Node Identifier   = " node;
MPRINT(EM_DIAGRAM):   put " Tree Node Identifier   = " node;
1781651    put " Number of Observations = " NPRIORS;
MPRINT(EM_DIAGRAM):   put " Number of Observations = " NPRIORS;
1781652    put " Predicted: DepVar=0  = " P_DepVar0;
MPRINT(EM_DIAGRAM):   put " Predicted: DepVar=0  = " P_DepVar0;
1781653    put " Predicted: DepVar=1  = " P_DepVar1;
MPRINT(EM_DIAGRAM):   put " Predicted: DepVar=1  = " P_DepVar1;
1781654    put " ";
MPRINT(EM_DIAGRAM):   put " ";
1781655    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
1781656    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
1781657    end;
MPRINT(EM_DIAGRAM):   end;
1781658    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Numeric values have been converted to character values at the places given by:
      (Line):(Column).
      1781574:67    1781577:66    1781621:108   1781622:72
NOTE: The file X is:
 
      Filename=C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\DESCRIBE.SOURCE,
      RECFM=V,LRECL=1536,File Size (bytes)=0,
      Last Modified=28. April 2016 09.51 Uhr,
      Create Time=28. April 2016 09.51 Uhr
 
NOTE: 111 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 62.
NOTE: There were 68 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781659    filename x;
MPRINT(EM_DIAGRAM):    filename x;
NOTE: Fileref X has been deassigned.
1781660    data leafds;
MPRINT(EM_DIAGRAM):    data leafds;
1781661    set WORK.OUTNODES_TREE_0NF5BC8;
MPRINT(EM_DIAGRAM):   set WORK.OUTNODES_TREE_0NF5BC8;
1781662    if LEAF ne .;
MPRINT(EM_DIAGRAM):   if LEAF ne .;
1781663    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.OUTNODES_TREE_0NF5BC8.
NOTE: The data set WORK.LEAFDS has 9 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781664    proc sort data=leafds;
MPRINT(EM_DIAGRAM):   proc sort data=leafds;
1781665    by descending N;
MPRINT(EM_DIAGRAM):   by descending N;
1781666    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 9 observations read from the data set WORK.LEAFDS.
NOTE: The data set WORK.LEAFDS has 9 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: Argument three to KSUBSTR exceeds the length of the input string, the function has
      recalculated the length of the string.
RIP LEAF: N=1  varid=17  nodeid=13  val=0.95194986072423  count=1436
RIP LEAF: N=2  varid=18  nodeid=13  val=0.04805013927576  count=1436
RIP LEAF: N=1  varid=17  nodeid=11  val=0.82027649769585  count=217
RIP LEAF: N=2  varid=18  nodeid=11  val=0.17972350230414  count=217
RIP LEAF: N=1  varid=17  nodeid=17  val=0.7734375  count=128
RIP LEAF: N=2  varid=18  nodeid=17  val=0.2265625  count=128
RIP LEAF: N=1  varid=17  nodeid=4  val=0.38709677419354  count=124
RIP LEAF: N=2  varid=18  nodeid=4  val=0.61290322580645  count=124
RIP LEAF: N=1  varid=17  nodeid=16  val=0.4758064516129  count=124
RIP LEAF: N=2  varid=18  nodeid=16  val=0.52419354838709  count=124
RIP LEAF: N=1  varid=17  nodeid=14  val=0.67256637168141  count=113
RIP LEAF: N=2  varid=18  nodeid=14  val=0.32743362831858  count=113
RIP LEAF: N=1  varid=17  nodeid=25  val=0.93577981651376  count=109
RIP LEAF: N=2  varid=18  nodeid=25  val=0.06422018348623  count=109
RIP LEAF: N=1  varid=17  nodeid=12  val=0.65079365079365  count=63
RIP LEAF: N=2  varid=18  nodeid=12  val=0.34920634920634  count=63
RIP LEAF: N=1  varid=17  nodeid=24  val=0.75  count=60
RIP LEAF: N=2  varid=18  nodeid=24  val=0.25  count=60
1781667    * RIP1: Print leaf table;
MPRINT(EM_DIAGRAM):    * RIP1: Print leaf table;
1781668    ;
MPRINT(EM_DIAGRAM):   ;
1781669    data leafds;
MPRINT(EM_DIAGRAM):   data leafds;
1781670    set leafds;
MPRINT(EM_DIAGRAM):   set leafds;
1781671    format P_DEPVAR0 8.4;
MPRINT(EM_DIAGRAM):   format P_DEPVAR0 8.4;
1781672    format P_DEPVAR1 8.4;
MPRINT(EM_DIAGRAM):   format P_DEPVAR1 8.4;
1781673    ;
MPRINT(EM_DIAGRAM):   ;
1781674    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 9 observations read from the data set WORK.LEAFDS.
NOTE: The data set WORK.LEAFDS has 9 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781675    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_leaftable_title, NOQUOTE, RIP1, 100))";
MPRINT(EM_DIAGRAM):   title9 "RIP1 Leaf Table: Threshold= 100";
1781676    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_text_title, NOQUOTE, %nrbquote(No leaf
1781676  ! was ripped from the model.)))";
MPRINT(EM_DIAGRAM):   title10 "No leaf was ripped from the model.";
1781677    proc print data = leafds NOOBS LABEL;
MPRINT(EM_DIAGRAM):   proc print data = leafds NOOBS LABEL;
1781678    var NODE N
1781679    P_DEPVAR0
1781680    P_DEPVAR1
1781681    ;
MPRINT(EM_DIAGRAM):   var NODE N P_DEPVAR0 P_DEPVAR1 ;
1781682    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 9 observations read from the data set WORK.LEAFDS.
NOTE: The PROCEDURE PRINT printed page 1759.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781683    title9;
MPRINT(EM_DIAGRAM):   title9;
1781684    title10;
MPRINT(EM_DIAGRAM):   title10;
MPRINT(EM_DIAGRAM):   * Create training data set with binary target for modeling;
MPRINT(EM_DIAGRAM):   ;
1781685    * Create training data set with binary target for modeling;
1781686    ;
1781687    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
1781688    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
1781689    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1781690    _tmp=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp=putn(DepVar, 'best.');
1781691    %DMNORMIP(_tmp);
MPRINT(DMNORMIP):   call dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1781692    _tmpLevel = '0';
MPRINT(EM_DIAGRAM):   _tmpLevel = '0';
1781693    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1781694    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
1781695    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
1781696    drop _tmp _tmpLevel
1781697    ;
MPRINT(EM_DIAGRAM):   drop _tmp _tmpLevel ;
1781698    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 2374 observations and 74 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781699    * Create validation data set with binary target for modeling;
MPRINT(EM_DIAGRAM):    * Create validation data set with binary target for modeling;
1781700    ;
MPRINT(EM_DIAGRAM):   ;
1781701    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
1781702    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
1781703    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1781704    _tmp = putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp = putn(DepVar, 'best.');
1781705    %DMNORMIP(_TMP);
MPRINT(DMNORMIP):   call dmnorm(_TMP,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1781706    _tmpLevel = '0';
MPRINT(EM_DIAGRAM):   _tmpLevel = '0';
1781707    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1781708    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
1781709    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
1781710    drop _tmp
1781711    ;
MPRINT(EM_DIAGRAM):   drop _tmp ;
1781712    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 1018 observations and 75 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781713    data _train;
MPRINT(EM_DIAGRAM):    data _train;
1781714    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1781715    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._TRAIN has 2374 observations and 74 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781716    data _valid;
MPRINT(EM_DIAGRAM):   data _valid;
1781717    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1781718    options validvarname=any;
MPRINT(EM_DIAGRAM):   options validvarname=any;
 
NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VALID has 1018 observations and 75 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781719    proc contents data=work._train out=_tempAdvisor noprint;
MPRINT(EM_DIAGRAM):   proc contents data=work._train out=_tempAdvisor noprint;
1781720    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK._TEMPADVISOR has 74 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781721    options validvarname=V7;
MPRINT(EM_DIAGRAM):   options validvarname=V7;
1781722    %let _dsidTable = 0;
1781723    %let _engineTable =;
1781724    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
1781725    dsid = open('work._train');
MPRINT(EM_DIAGRAM):   dsid = open('work._train');
1781726    call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EM_DIAGRAM):   call symput('_dsidTable', strip(put(dsid, best.)));
1781727    if dsid then do;
MPRINT(EM_DIAGRAM):   if dsid then do;
1781728    call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EM_DIAGRAM):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
1781729    dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
1781730    end;
MPRINT(EM_DIAGRAM):   end;
1781731    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781732    options fmterr;
MPRINT(EM_DIAGRAM):    options fmterr;
1781733    data _metaTestView;
MPRINT(EM_DIAGRAM):   data _metaTestView;
1781734    set work._train;
MPRINT(EM_DIAGRAM):   set work._train;
1781735    if _N_=1 then do;
MPRINT(EM_DIAGRAM):   if _N_=1 then do;
1781736    output;
MPRINT(EM_DIAGRAM):   output;
1781737    stop;
MPRINT(EM_DIAGRAM):   stop;
1781738    end;
MPRINT(EM_DIAGRAM):   end;
1781739    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK._METATESTVIEW has 1 observations and 74 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781740    proc contents data=work._train
1781741    out=WORK.M0XPB_UG noprint;
MPRINT(EM_DIAGRAM):    proc contents data=work._train out=WORK.M0XPB_UG noprint;
1781742    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK.M0XPB_UG has 74 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1781743    data WORK.M0XPB_UG;
MPRINT(EM_DIAGRAM):    data WORK.M0XPB_UG;
1781744    length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 INDEXTYPE $
1781744  !  9;
MPRINT(EM_DIAGRAM):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1
INDEXTYPE $ 9;
1781745    label NAME =;
MPRINT(EM_DIAGRAM):   label NAME =;
1781746    set WORK.M0XPB_UG(keep=name type length label format formatl formatd informat
1781746  ! informl informd idxusage rename=(type=itype));
MPRINT(EM_DIAGRAM):   set WORK.M0XPB_UG(keep=name type length label format formatl formatd
informat informl informd idxusage rename=(type=itype));
1781747    if itype = 1 then type = 'N';
MPRINT(EM_DIAGRAM):   if itype = 1 then type = 'N';
1781748    else type = 'C';
MPRINT(EM_DIAGRAM):   else type = 'C';
1781749    if formatl > 0 then do;
MPRINT(EM_DIAGRAM):   if formatl > 0 then do;
1781750    if format ne ' ' then format = strip(format)!!strip(put(formatl,
1781750  ! best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   if format ne ' ' then format = strip(format)!!strip(put(formatl,
best12.))!!'.'!!strip(put(formatd, best12.));
1781751    else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd,
best12.));
1781752    end;
MPRINT(EM_DIAGRAM):   end;
1781753    else if format ne '' then format = strip(format)!!'.';
MPRINT(EM_DIAGRAM):   else if format ne '' then format = strip(format)!!'.';
1781754    if informl > 0 then do;
MPRINT(EM_DIAGRAM):   if informl > 0 then do;
1781755    if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
1781755  ! best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
best12.))!!'.'!!strip(put(informd, best12.));
1781756    else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd,
best12.));
1781757    end;
MPRINT(EM_DIAGRAM):   end;
1781758    else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EM_DIAGRAM):   else if informat ne '' then informat = strip(informat)!!'.';
1781759    if idxusage = 'NONE' then index ="N";
MPRINT(EM_DIAGRAM):   if idxusage = 'NONE' then index ="N";
1781760    else index = "Y";
MPRINT(EM_DIAGRAM):   else index = "Y";
1781761    indextype = idxusage;
MPRINT(EM_DIAGRAM):   indextype = idxusage;
1781762    drop idxusage itype formatl formatd informl informd;
MPRINT(EM_DIAGRAM):   drop idxusage itype formatl formatd informl informd;
1781763    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 74 observations read from the data set WORK.M0XPB_UG.
NOTE: The data set WORK.M0XPB_UG has 74 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1781764    data WORK.M0XPB_UG;
MPRINT(EM_DIAGRAM):    data WORK.M0XPB_UG;
1781765    length UNAME $64;
MPRINT(EM_DIAGRAM):   length UNAME $64;
1781766    set WORK.M0XPB_UG;
MPRINT(EM_DIAGRAM):   set WORK.M0XPB_UG;
1781767    UNAME = upcase(NAME);
MPRINT(EM_DIAGRAM):   UNAME = upcase(NAME);
1781768    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 74 observations read from the data set WORK.M0XPB_UG.
NOTE: The data set WORK.M0XPB_UG has 74 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):    proc sort data=WORK.M0IFMPM6 NOTHREADS;
MPRINT(EM_DIAGRAM):   by UNAME;
MPRINT(EM_DIAGRAM):   run;
1781772    data WORK.M0IFMPM6;
MPRINT(EM_DIAGRAM):    data WORK.M0IFMPM6;
1781773    drop UNAME;
MPRINT(EM_DIAGRAM):   drop UNAME;
1781774    set WORK.M0IFMPM6;
MPRINT(EM_DIAGRAM):   set WORK.M0IFMPM6;
1781775    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 74 observations read from the data set WORK.M0IFMPM6.
NOTE: The data set WORK.M0IFMPM6 has 74 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):    data WORK.M38LE_ZE(keep=NAME ATTR);
MPRINT(EM_DIAGRAM):   length ATTR $ 20;
MPRINT(EM_DIAGRAM):   set WORK.M0IFMPM6;
MPRINT(EM_DIAGRAM):   if level ne "INTERVAL" then do;
MPRINT(EM_DIAGRAM):   if order = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ORDER';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'FORMATTYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ROLE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'LEVEL';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if type = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'TYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if index = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'INDEX';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if report = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'REPORT';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort NOTHREADS;
MPRINT(EM_DIAGRAM):   by attr;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.M0IFMPM6;
MPRINT(EM_DIAGRAM):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $
10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EM_DIAGRAM):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EM_DIAGRAM):   set WORK.M0IFMPM6;
MPRINT(EM_DIAGRAM):   if formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   if format ne ' ' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
MPRINT(EM_DIAGRAM):   pos = indexc(format,'.1234567890');
MPRINT(EM_DIAGRAM):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EM_DIAGRAM):   else tempfmt = ' ';
MPRINT(EM_DIAGRAM):   flen = length(tempfmt);
MPRINT(EM_DIAGRAM):   select;
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN"
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO"
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON"
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD"
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" ))
formattype = 'DATE';
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype =
"TIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT"
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN"
"Z" "ZD")) formattype = "CODING";
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   formattype = "USER";
MPRINT(EM_DIAGRAM):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EM_DIAGRAM):   else if flen >= 4 then do;
MPRINT(EM_DIAGRAM):   str = substr(tempfmt,1,4);
MPRINT(EM_DIAGRAM):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EM_DIAGRAM):   else if str = "S370" then formattype = "CODING";
MPRINT(EM_DIAGRAM):   else if str = "BEST" then formattype = "NUM";
MPRINT(EM_DIAGRAM):   drop str;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType =
"DATE";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   drop flen tempfmt pos;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   formatType = "CATEGORY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if formatType = "NUM" then do;
MPRINT(EM_DIAGRAM):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EM_DIAGRAM):   else formatType = "QUANTITY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level =
"NOMINAL";
MPRINT(EM_DIAGRAM):   else level = "INTERVAL";
MPRINT(EM_DIAGRAM):   levelAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else level = upcase(level);
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   length name_prefix $8 _uname $64;
MPRINT(EM_DIAGRAM):   drop name_prefix _uname _freqflag;
MPRINT(EM_DIAGRAM):   retain _freqflag;
MPRINT(EM_DIAGRAM):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EM_DIAGRAM):   _uname = upcase(NAME);
MPRINT(EM_DIAGRAM):   select(_uname);
MPRINT(EM_DIAGRAM):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_SEGMENT') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('_NODE_') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('URI') ROLE = 'URL';
MPRINT(EM_DIAGRAM):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'REJECTED';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'FREQ';
MPRINT(EM_DIAGRAM):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EM_DIAGRAM):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   name_prefix = scan(_uname, 1, '_');
MPRINT(EM_DIAGRAM):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EM_DIAGRAM):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS',
'RAT') then ROLE = 'RESIDUAL';
MPRINT(EM_DIAGRAM):   else if name_prefix ='D' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix ='B' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI',
'IC') then ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR',
'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL',
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT',
'TIMEID');
MPRINT(EM_DIAGRAM):   drop _found_ i;
MPRINT(EM_DIAGRAM):   _found_=0;
MPRINT(EM_DIAGRAM):   do i=1 to 19 until(_found_=1);
MPRINT(EM_DIAGRAM):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EM_DIAGRAM):   ROLE=_ROLE_{i};
MPRINT(EM_DIAGRAM):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EM_DIAGRAM):   _found_=1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if length(_uname)>2 then do;
MPRINT(EM_DIAGRAM):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'ID';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EM_DIAGRAM):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EM_DIAGRAM):   else role = 'INPUT';
MPRINT(EM_DIAGRAM):   roleAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else role = upcase(role);
MPRINT(EM_DIAGRAM):   if REPORT = '' then REPORT = 'N';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    proc dmdb data=work._train(obs=1000000) batch classOut=_DMDB19FGYB6
maxLevel=22;
MPRINT(EM_DIAGRAM):   class
MPRINT(DMDBCLASS):   AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5
AcceptedCmpTotal Age Complain Custid DepVar Dt_Customer Education Element1 Element2 Element3
Element4 Frq F_DepVar Group GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_Recency GRP_RFMstat GRP_RMntFrq HigherEducation HigherEducationBinary
Income I_DepVar Kidhome Marital_Status Mnt MntFishProducts MntFruits MntGoldProds
MntMeatProducts MntSweetProducts MntWines MonthsAsCustomer NumCatalogPurchases
NumDealsPurchases NumDistPurchases NumStorePurchases NumWebPurchases NumWebVisitsMonth
P_DepVar0 P_DepVar1 Q_DepVar0 Q_DepVar1 Recency RFMstat RMntFrq R_DepVar0 R_DepVar1 Teenhome
U_DepVar V_DepVar0 V_DepVar1 Year_Birth Z_CostContact Z_Revenue _bin _dataobs_ _LEAF_ _NODE_
_WARN_
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc freq data=_DMDB19FGYB6 noprint;
MPRINT(EM_DIAGRAM):   table name / out=_DMDBCOUNT19FGYB6(drop=percent rename=(count=NLEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _MISS19FGYB6(rename=(frequency=NMISS));
MPRINT(EM_DIAGRAM):   set _DMDB19FGYB6(where=(NRAW=. and CRAW=''));
MPRINT(EM_DIAGRAM):   keep name frequency;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_MISS19FGYB6;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_DMDBCOUNT19FGYB6;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _COUNTS19FGYB6;
MPRINT(EM_DIAGRAM):   merge _DMDBCOUNT19FGYB6 _MISS19FGYB6;
MPRINT(EM_DIAGRAM):   label NLEVEL= 'Number of Category';
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if NMISS > 0 then do;
MPRINT(EM_DIAGRAM):   NLEVEL= NLEVEL-1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else NMISS = 0;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc sort data=_COUNTS19FGYB6 NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M0IFMPM6 NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data WORK.M0IFMPM6;
MPRINT(EM_DIAGRAM):   length NLEVEL 8 nmiss 8;
MPRINT(EM_DIAGRAM):   update WORK.M0IFMPM6 _COUNTS19FGYB6;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if name='' then name='_';
MPRINT(EM_DIAGRAM):   if levelAssigned and ROLE ne 'FREQ' then do;
MPRINT(EM_DIAGRAM):   select(NLEVEL);
MPRINT(EM_DIAGRAM):   when(.) do;
MPRINT(EM_DIAGRAM):   if type eq 'C' then level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when(0) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(1) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(2) level = 'BINARY';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if roleAssigned then do;
MPRINT(EM_DIAGRAM):   if level = 'NOMINAL' and NLEVEL > 20 then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   comment = "Exceeds maximum number of levels cutoff";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = 'UNARY' and ROLE ne 'FREQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   drop NLEVEL nmiss;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL=
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY=
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT=
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL=
"Label" LENGTH= "Length";
MPRINT(EM_DIAGRAM):   drop levelAssigned roleAssigned;
MPRINT(EM_DIAGRAM):   run;
1782068    data WORK.M145BPSG;
MPRINT(EM_DIAGRAM):    data WORK.M145BPSG;
1782069    set WORK.M145BPSG;
MPRINT(EM_DIAGRAM):   set WORK.M145BPSG;
1782070    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
1782071    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
1782072    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
1782073    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
1782074    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
1782075    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
1782076    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
1782077    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
1782078    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M145BPSG.
NOTE: The data set WORK.M145BPSG has 17 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782079    data WORK.M06YHPE1;
MPRINT(EM_DIAGRAM):    data WORK.M06YHPE1;
1782080    set WORK.M06YHPE1;
MPRINT(EM_DIAGRAM):   set WORK.M06YHPE1;
1782081    if role='INPUT' and use='D' then use='Y';
MPRINT(EM_DIAGRAM):   if role='INPUT' and use='D' then use='Y';
1782082    if NAME='_bin' then do;
MPRINT(EM_DIAGRAM):   if NAME='_bin' then do;
1782083    ROLE='TARGET';
MPRINT(EM_DIAGRAM):   ROLE='TARGET';
1782084    LEVEL='BINARY';
MPRINT(EM_DIAGRAM):   LEVEL='BINARY';
1782085    USE='Y';
MPRINT(EM_DIAGRAM):   USE='Y';
1782086    end;
MPRINT(EM_DIAGRAM):   end;
1782087    if NAME='DepVar' then do;
MPRINT(EM_DIAGRAM):   if NAME='DepVar' then do;
1782088    ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   ROLE='REJECTED';
1782089    end;
MPRINT(EM_DIAGRAM):   end;
1782090    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
1782091    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
1782092    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
1782093    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
1782094    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
1782095    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
1782096    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
1782097    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
1782098    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 18 observations read from the data set WORK.M06YHPE1.
NOTE: The data set WORK.M06YHPE1 has 18 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782099    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1782100    * Binary Model DepVar = 0;
MPRINT(EM_DIAGRAM):   * Binary Model DepVar = 0;
1782101    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782102    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782103    * REGRESSION MODEL DepVar binary BIN1;
MPRINT(EM_DIAGRAM):   * REGRESSION MODEL DepVar binary BIN1;
1782104    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782105    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782106    * Rule3: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule3: Create decision matrix;
1782107    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782108    data EM_DMREG / view=EM_DMREG;
MPRINT(EM_DIAGRAM):   data EM_DMREG / view=EM_DMREG;
1782109    set work._train(keep=
1782110    DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
1782111    GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
1782112    GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1782113    Year_Birth _bin);
MPRINT(EM_DIAGRAM):   set work._train(keep= DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth _bin);
1782114    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA STEP view saved on file WORK.EM_DMREG.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1782115    *------------------------------------------------------------* ;
1782116    * Rule3: DMDBClass Macro ;
1782117    *------------------------------------------------------------* ;
1782118    %macro DMDBClass;
1782119        DepVar(ASC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC) GRP_Mnt(ASC)
1782120       GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
1782121       GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
1782122       GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
1782123       _bin(DESC)
1782124    %mend DMDBClass;
1782125    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1782126    * Rule3: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBVar Macro ;
1782127    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1782128    %macro DMDBVar;
1782129        Year_Birth
1782130    %mend DMDBVar;
1782131    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782132    * Rule3: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule3: Create DMDB;
1782133    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782134    proc dmdb batch data=WORK.EM_DMREG
1782135    dmdbcat=WORK.Rule3_DMDB
1782136    maxlevel = 513
1782137    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=WORK.EM_DMREG dmdbcat=WORK.Rule3_DMDB maxlevel =
513 ;
MPRINT(EM_DIAGRAM):   class
1782138    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(ASC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC)
GRP_Mnt(ASC) GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC) _bin(DESC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
1782139    var %DMDBVar;
MPRINT(DMDBVAR):   Year_Birth
MPRINT(EM_DIAGRAM):  ;
1782140    target
1782141    _bin
1782142    ;
MPRINT(EM_DIAGRAM):   target _bin ;
1782143    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: There were 2374 observations read from the data set WORK._TRAIN.
NOTE: There were 2374 observations read from the data set WORK.EM_DMREG.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1782144    quit;
1782145    *--- end code ---*;
 
1782146    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1782147    * Rule3: Run DMREG procedure;
MPRINT(EM_DIAGRAM):   * Rule3: Run DMREG procedure;
1782148    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782149    proc dmreg data=EM_DMREG dmdbcat=WORK.Rule3_DMDB
1782150    validata = work._valid
1782151    outest = WORK.DMREG_26144_R_OUTEST
1782152    outterms = WORK.DMREG_26144_R_OUTTERMS
1782153    outmap= WORK.DMREG_26144_R_MAP namelen=200
1782154    ;
MPRINT(EM_DIAGRAM):   proc dmreg data=EM_DMREG dmdbcat=WORK.Rule3_DMDB validata = work._valid
outest = WORK.DMREG_26144_R_OUTEST outterms = WORK.DMREG_26144_R_OUTTERMS outmap=
WORK.DMREG_26144_R_MAP namelen=200 ;
1782155    class
1782156    _bin
1782157    GRP_AcceptedCmp5
1782158    GRP_Frq
1782159    GRP_Income
1782160    GRP_Mnt
1782161    GRP_MntFishProducts
1782162    GRP_MntGoldProds
1782163    GRP_MntMeatProducts
1782164    GRP_MntWines
1782165    GRP_NumCatalogPurchases
1782166    GRP_NumDistPurchases
1782167    GRP_NumWebPurchases
1782168    GRP_RFMstat
1782169    GRP_RMntFrq
1782170    GRP_Recency
1782171    ;
MPRINT(EM_DIAGRAM):   class _bin GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency ;
1782172    model _bin =
1782173    GRP_AcceptedCmp5
1782174    GRP_Frq
1782175    GRP_Income
1782176    GRP_Mnt
1782177    GRP_MntFishProducts
1782178    GRP_MntGoldProds
1782179    GRP_MntMeatProducts
1782180    GRP_MntWines
1782181    GRP_NumCatalogPurchases
1782182    GRP_NumDistPurchases
1782183    GRP_NumWebPurchases
1782184    GRP_RFMstat
1782185    GRP_RMntFrq
1782186    GRP_Recency
1782187    Year_Birth
1782188    /error=binomial link=LOGIT
1782189    coding=DEVIATION
1782190    nodesignprint
1782191    ;
MPRINT(EM_DIAGRAM):   model _bin = GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth
/error=binomial link=LOGIT coding=DEVIATION nodesignprint ;
1782192    ;
MPRINT(EM_DIAGRAM):   ;
1782193    score data=_train
1782194    out=_ptrain(label="")
1782195    ;
MPRINT(EM_DIAGRAM):   score data=_train out=_ptrain(label="") ;
1782196    score data=_valid
1782197    out=_pvalid(label="")
1782198    ;
MPRINT(EM_DIAGRAM):   score data=_valid out=_pvalid(label="") ;
1782199    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1782199  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1.sas"
1782200    group=Rule3_1
1782201    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1.sas" group=Rule3_1 ;
1782202    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1782202  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1_res.sas"
1782203    group=Rule3_1
1782204    residual
1782205    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1_res.sas" group=Rule3_1 residual ;
1782206    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable _WARN_ already exists on file WORK._PTRAIN, using _WARN_2 instead.
NOTE: Variable _WARN_ already exists on file WORK._PVALID, using _WARN_2 instead.
 
NOTE: PROC DMREG is modeling the probability that _bin='1'.
NOTE: Convergence criterion (GCONV=1E-6) satisfied.
NOTE: At least one element of the gradient is greater than 1e-3.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1.sas opened.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1_res.sas opened.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.21 seconds
      cpu time            0.21 seconds
 
NOTE: There were 2374 observations read from the data set WORK._TRAIN.
NOTE: There were 2374 observations read from the data set WORK.EM_DMREG.
NOTE: There were 1018 observations read from the data set WORK._VALID.
NOTE: There were 2374 observations read from the data set WORK._TRAIN.
NOTE: There were 1018 observations read from the data set WORK._VALID.
NOTE: The data set WORK.DMREG_26144_R_OUTEST has 3 observations and 75 variables.
NOTE: The data set WORK.DMREG_26144_R_OUTTERMS has 41 observations and 6 variables.
NOTE: The data set WORK.DMREG_26144_R_MAP has 2 observations and 42 variables.
NOTE: The data set WORK._PTRAIN has 2374 observations and 83 variables.
NOTE: The data set WORK._PVALID has 1018 observations and 84 variables.
NOTE: The PROCEDURE DMREG printed pages 1760-1761.
NOTE: PROCEDURE DMREG used (Total process time):
      real time           0.23 seconds
      cpu time            0.23 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
1782207    quit;
 
1782208    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
1782209    delete Rule3_DMDB;
MPRINT(EM_DIAGRAM):   delete Rule3_DMDB;
1782210    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The file WORK.RULE3_DMDB (memtype=DATA) was not found, but appears on a DELETE statement.
1782211    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1782212    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
1782213    delete Rule3_DMDB / memtype=catalog;
MPRINT(EM_DIAGRAM):   delete Rule3_DMDB / memtype=catalog;
1782214    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK.RULE3_DMDB (memtype=CATALOG).
1782215    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1782216    * BINARY: Training Classification;
MPRINT(EM_DIAGRAM):    * BINARY: Training Classification;
1782217    ;
MPRINT(EM_DIAGRAM):   ;
1782218    proc freq data = _ptrain noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _ptrain noprint;
1782219    tables F__bin * I__bin / out = _count;
MPRINT(EM_DIAGRAM):   tables F__bin * I__bin / out = _count;
1782220    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._COUNT has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1782221    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1782222    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1782223    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
1782224    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
1782225    label F__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label F__bin = "From";
1782226    label I__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label I__bin = "Into";
1782227    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * BINARY: Validation Classification;
MPRINT(EM_DIAGRAM):   ;
1782228    * BINARY: Validation Classification;
1782229    ;
1782230    proc freq data = _pvalid noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _pvalid noprint;
1782231    tables f__bin * i__bin / out=_vcount;
MPRINT(EM_DIAGRAM):   tables f__bin * i__bin / out=_vcount;
1782232    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VCOUNT has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1782233    data _vcount;
MPRINT(EM_DIAGRAM):   data _vcount;
1782234    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
1782235    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
1782236    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
1782237    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
1782238    label f__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label f__bin = "From";
1782239    label i__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label i__bin = "Into";
1782240    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
1782241    rename percent= vpercent;
MPRINT(EM_DIAGRAM):   rename percent= vpercent;
1782242    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
1782243    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1782244    *;
1782245    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1782246    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1782247    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
1782248    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
1782249    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * Merge Train and Valid classification;
MPRINT(EM_DIAGRAM):   ;
1782250    * Merge Train and Valid classification;
1782251    ;
1782252    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
1782253    by key;
MPRINT(EM_DIAGRAM):   by key;
1782254    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782255    proc sort data=_vcount;
MPRINT(EM_DIAGRAM):   proc sort data=_vcount;
1782256    by key;
MPRINT(EM_DIAGRAM):   by key;
1782257    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1782258    *;
1782259    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1782260    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
1782261    by key;
MPRINT(EM_DIAGRAM):   by key;
1782262    drop key;
MPRINT(EM_DIAGRAM):   drop key;
1782263    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 4 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   *BINARY: Print Classification;
MPRINT(EM_DIAGRAM):   ;
1782264    *BINARY: Print Classification;
1782265    ;
1782266    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_binmodel_title, NOQUOTE, DepVar,
1782266  ! %nrbquote(0)))";
MPRINT(EM_DIAGRAM):   title9 "Binary Model DepVar = 0";
1782267    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Classification Table";
1782268    proc print data = _count noobs label;
MPRINT(EM_DIAGRAM):   proc print data = _count noobs label;
1782269    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 1762.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782270    title9;
MPRINT(EM_DIAGRAM):   title9;
1782271    title10;
MPRINT(EM_DIAGRAM):   title10;
1782272    * Extract misfit training values;
MPRINT(EM_DIAGRAM):    * Extract misfit training values;
1782273    ;
MPRINT(EM_DIAGRAM):   ;
1782274    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
1782275    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1782276    if not ( I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not ( I__bin eq '1' and F__bin eq '1') then output;
1782277    keep
1782278    GRP_AcceptedCmp5
1782279    GRP_Frq
1782280    GRP_Income
1782281    GRP_Mnt
1782282    GRP_MntFishProducts
1782283    GRP_MntGoldProds
1782284    GRP_MntMeatProducts
1782285    GRP_MntWines
1782286    GRP_NumCatalogPurchases
1782287    GRP_NumDistPurchases
1782288    GRP_NumWebPurchases
1782289    GRP_RFMstat
1782290    GRP_RMntFrq
1782291    GRP_Recency
1782292    Year_Birth
1782293    DepVar;
MPRINT(EM_DIAGRAM):   keep GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth DepVar;
1782294    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 430 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   * Extract misfit validation values;
MPRINT(EM_DIAGRAM):   ;
1782295    * Extract misfit validation values;
1782296    ;
1782297    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
1782298    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1782299    if not (I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not (I__bin eq '1' and F__bin eq '1') then output;
1782300    keep
1782301    GRP_AcceptedCmp5
1782302    GRP_Frq
1782303    GRP_Income
1782304    GRP_Mnt
1782305    GRP_MntFishProducts
1782306    GRP_MntGoldProds
1782307    GRP_MntMeatProducts
1782308    GRP_MntWines
1782309    GRP_NumCatalogPurchases
1782310    GRP_NumDistPurchases
1782311    GRP_NumWebPurchases
1782312    GRP_RFMstat
1782313    GRP_RMntFrq
1782314    GRP_Recency
1782315    Year_Birth
1782316    DepVar;
MPRINT(EM_DIAGRAM):   keep GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth DepVar;
1782317    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 184 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782318    * Create training data set with binary target for modeling;
MPRINT(EM_DIAGRAM):    * Create training data set with binary target for modeling;
1782319    ;
MPRINT(EM_DIAGRAM):   ;
1782320    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
1782321    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
1782322    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1782323    _tmp=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp=putn(DepVar, 'best.');
1782324    %DMNORMIP(_tmp);
MPRINT(DMNORMIP):   call dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1782325    _tmpLevel = '1';
MPRINT(EM_DIAGRAM):   _tmpLevel = '1';
1782326    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1782327    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
1782328    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
1782329    drop _tmp _tmpLevel
1782330    ;
MPRINT(EM_DIAGRAM):   drop _tmp _tmpLevel ;
1782331    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 430 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 430 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782332    * Create validation data set with binary target for modeling;
MPRINT(EM_DIAGRAM):    * Create validation data set with binary target for modeling;
1782333    ;
MPRINT(EM_DIAGRAM):   ;
1782334    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
1782335    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
1782336    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1782337    _tmp = putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp = putn(DepVar, 'best.');
1782338    %DMNORMIP(_TMP);
MPRINT(DMNORMIP):   call dmnorm(_TMP,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1782339    _tmpLevel = '1';
MPRINT(EM_DIAGRAM):   _tmpLevel = '1';
1782340    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1782341    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
1782342    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
1782343    drop _tmp
1782344    ;
MPRINT(EM_DIAGRAM):   drop _tmp ;
1782345    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 184 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 184 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782346    data _train;
MPRINT(EM_DIAGRAM):    data _train;
1782347    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1782348    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 430 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._TRAIN has 430 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782349    data _valid;
MPRINT(EM_DIAGRAM):   data _valid;
1782350    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1782351    options validvarname=any;
MPRINT(EM_DIAGRAM):   options validvarname=any;
 
NOTE: There were 184 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VALID has 184 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782352    proc contents data=work._train out=_tempAdvisor noprint;
MPRINT(EM_DIAGRAM):   proc contents data=work._train out=_tempAdvisor noprint;
1782353    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK._TEMPADVISOR has 17 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782354    options validvarname=V7;
MPRINT(EM_DIAGRAM):   options validvarname=V7;
1782355    %let _dsidTable = 0;
1782356    %let _engineTable =;
1782357    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
1782358    dsid = open('work._train');
MPRINT(EM_DIAGRAM):   dsid = open('work._train');
1782359    call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EM_DIAGRAM):   call symput('_dsidTable', strip(put(dsid, best.)));
1782360    if dsid then do;
MPRINT(EM_DIAGRAM):   if dsid then do;
1782361    call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EM_DIAGRAM):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
1782362    dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
1782363    end;
MPRINT(EM_DIAGRAM):   end;
1782364    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782365    options fmterr;
MPRINT(EM_DIAGRAM):    options fmterr;
1782366    data _metaTestView;
MPRINT(EM_DIAGRAM):   data _metaTestView;
1782367    set work._train;
MPRINT(EM_DIAGRAM):   set work._train;
1782368    if _N_=1 then do;
MPRINT(EM_DIAGRAM):   if _N_=1 then do;
1782369    output;
MPRINT(EM_DIAGRAM):   output;
1782370    stop;
MPRINT(EM_DIAGRAM):   stop;
1782371    end;
MPRINT(EM_DIAGRAM):   end;
1782372    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK._METATESTVIEW has 1 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782373    proc contents data=work._train
1782374    out=WORK.M3MI6P4K noprint;
MPRINT(EM_DIAGRAM):    proc contents data=work._train out=WORK.M3MI6P4K noprint;
1782375    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK.M3MI6P4K has 17 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782376    data WORK.M3MI6P4K;
MPRINT(EM_DIAGRAM):    data WORK.M3MI6P4K;
1782377    length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 INDEXTYPE $
1782377  !  9;
MPRINT(EM_DIAGRAM):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1
INDEXTYPE $ 9;
1782378    label NAME =;
MPRINT(EM_DIAGRAM):   label NAME =;
1782379    set WORK.M3MI6P4K(keep=name type length label format formatl formatd informat
1782379  ! informl informd idxusage rename=(type=itype));
MPRINT(EM_DIAGRAM):   set WORK.M3MI6P4K(keep=name type length label format formatl formatd
informat informl informd idxusage rename=(type=itype));
1782380    if itype = 1 then type = 'N';
MPRINT(EM_DIAGRAM):   if itype = 1 then type = 'N';
1782381    else type = 'C';
MPRINT(EM_DIAGRAM):   else type = 'C';
1782382    if formatl > 0 then do;
MPRINT(EM_DIAGRAM):   if formatl > 0 then do;
1782383    if format ne ' ' then format = strip(format)!!strip(put(formatl,
1782383  ! best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   if format ne ' ' then format = strip(format)!!strip(put(formatl,
best12.))!!'.'!!strip(put(formatd, best12.));
1782384    else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd,
best12.));
1782385    end;
MPRINT(EM_DIAGRAM):   end;
1782386    else if format ne '' then format = strip(format)!!'.';
MPRINT(EM_DIAGRAM):   else if format ne '' then format = strip(format)!!'.';
1782387    if informl > 0 then do;
MPRINT(EM_DIAGRAM):   if informl > 0 then do;
1782388    if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
1782388  ! best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
best12.))!!'.'!!strip(put(informd, best12.));
1782389    else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd,
best12.));
1782390    end;
MPRINT(EM_DIAGRAM):   end;
1782391    else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EM_DIAGRAM):   else if informat ne '' then informat = strip(informat)!!'.';
1782392    if idxusage = 'NONE' then index ="N";
MPRINT(EM_DIAGRAM):   if idxusage = 'NONE' then index ="N";
1782393    else index = "Y";
MPRINT(EM_DIAGRAM):   else index = "Y";
1782394    indextype = idxusage;
MPRINT(EM_DIAGRAM):   indextype = idxusage;
1782395    drop idxusage itype formatl formatd informl informd;
MPRINT(EM_DIAGRAM):   drop idxusage itype formatl formatd informl informd;
1782396    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M3MI6P4K.
NOTE: The data set WORK.M3MI6P4K has 17 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782397    data WORK.M3MI6P4K;
MPRINT(EM_DIAGRAM):    data WORK.M3MI6P4K;
1782398    length UNAME $64;
MPRINT(EM_DIAGRAM):   length UNAME $64;
1782399    set WORK.M3MI6P4K;
MPRINT(EM_DIAGRAM):   set WORK.M3MI6P4K;
1782400    UNAME = upcase(NAME);
MPRINT(EM_DIAGRAM):   UNAME = upcase(NAME);
1782401    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M3MI6P4K.
NOTE: The data set WORK.M3MI6P4K has 17 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):    proc sort data=WORK.M2Y8ZFGG NOTHREADS;
MPRINT(EM_DIAGRAM):   by UNAME;
MPRINT(EM_DIAGRAM):   run;
1782405    data WORK.M2Y8ZFGG;
MPRINT(EM_DIAGRAM):    data WORK.M2Y8ZFGG;
1782406    drop UNAME;
MPRINT(EM_DIAGRAM):   drop UNAME;
1782407    set WORK.M2Y8ZFGG;
MPRINT(EM_DIAGRAM):   set WORK.M2Y8ZFGG;
1782408    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M2Y8ZFGG.
NOTE: The data set WORK.M2Y8ZFGG has 17 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):    data WORK.M3LXBGO2(keep=NAME ATTR);
MPRINT(EM_DIAGRAM):   length ATTR $ 20;
MPRINT(EM_DIAGRAM):   set WORK.M2Y8ZFGG;
MPRINT(EM_DIAGRAM):   if level ne "INTERVAL" then do;
MPRINT(EM_DIAGRAM):   if order = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ORDER';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'FORMATTYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ROLE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'LEVEL';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if type = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'TYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if index = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'INDEX';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if report = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'REPORT';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort NOTHREADS;
MPRINT(EM_DIAGRAM):   by attr;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.M2Y8ZFGG;
MPRINT(EM_DIAGRAM):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $
10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EM_DIAGRAM):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EM_DIAGRAM):   set WORK.M2Y8ZFGG;
MPRINT(EM_DIAGRAM):   if formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   if format ne ' ' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
MPRINT(EM_DIAGRAM):   pos = indexc(format,'.1234567890');
MPRINT(EM_DIAGRAM):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EM_DIAGRAM):   else tempfmt = ' ';
MPRINT(EM_DIAGRAM):   flen = length(tempfmt);
MPRINT(EM_DIAGRAM):   select;
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN"
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO"
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON"
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD"
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" ))
formattype = 'DATE';
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype =
"TIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT"
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN"
"Z" "ZD")) formattype = "CODING";
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   formattype = "USER";
MPRINT(EM_DIAGRAM):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EM_DIAGRAM):   else if flen >= 4 then do;
MPRINT(EM_DIAGRAM):   str = substr(tempfmt,1,4);
MPRINT(EM_DIAGRAM):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EM_DIAGRAM):   else if str = "S370" then formattype = "CODING";
MPRINT(EM_DIAGRAM):   else if str = "BEST" then formattype = "NUM";
MPRINT(EM_DIAGRAM):   drop str;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType =
"DATE";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   drop flen tempfmt pos;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   formatType = "CATEGORY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if formatType = "NUM" then do;
MPRINT(EM_DIAGRAM):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EM_DIAGRAM):   else formatType = "QUANTITY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level =
"NOMINAL";
MPRINT(EM_DIAGRAM):   else level = "INTERVAL";
MPRINT(EM_DIAGRAM):   levelAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else level = upcase(level);
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   length name_prefix $8 _uname $64;
MPRINT(EM_DIAGRAM):   drop name_prefix _uname _freqflag;
MPRINT(EM_DIAGRAM):   retain _freqflag;
MPRINT(EM_DIAGRAM):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EM_DIAGRAM):   _uname = upcase(NAME);
MPRINT(EM_DIAGRAM):   select(_uname);
MPRINT(EM_DIAGRAM):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_SEGMENT') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('_NODE_') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('URI') ROLE = 'URL';
MPRINT(EM_DIAGRAM):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'REJECTED';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'FREQ';
MPRINT(EM_DIAGRAM):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EM_DIAGRAM):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   name_prefix = scan(_uname, 1, '_');
MPRINT(EM_DIAGRAM):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EM_DIAGRAM):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS',
'RAT') then ROLE = 'RESIDUAL';
MPRINT(EM_DIAGRAM):   else if name_prefix ='D' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix ='B' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI',
'IC') then ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR',
'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL',
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT',
'TIMEID');
MPRINT(EM_DIAGRAM):   drop _found_ i;
MPRINT(EM_DIAGRAM):   _found_=0;
MPRINT(EM_DIAGRAM):   do i=1 to 19 until(_found_=1);
MPRINT(EM_DIAGRAM):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EM_DIAGRAM):   ROLE=_ROLE_{i};
MPRINT(EM_DIAGRAM):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EM_DIAGRAM):   _found_=1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if length(_uname)>2 then do;
MPRINT(EM_DIAGRAM):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'ID';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EM_DIAGRAM):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EM_DIAGRAM):   else role = 'INPUT';
MPRINT(EM_DIAGRAM):   roleAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else role = upcase(role);
MPRINT(EM_DIAGRAM):   if REPORT = '' then REPORT = 'N';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    proc dmdb data=work._train(obs=1000000) batch classOut=_DMDB0Y1KKU1
maxLevel=22;
MPRINT(EM_DIAGRAM):   class
MPRINT(DMDBCLASS):   DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_Recency GRP_RFMstat GRP_RMntFrq Year_Birth _bin
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc freq data=_DMDB0Y1KKU1 noprint;
MPRINT(EM_DIAGRAM):   table name / out=_DMDBCOUNT0Y1KKU1(drop=percent rename=(count=NLEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _MISS0Y1KKU1(rename=(frequency=NMISS));
MPRINT(EM_DIAGRAM):   set _DMDB0Y1KKU1(where=(NRAW=. and CRAW=''));
MPRINT(EM_DIAGRAM):   keep name frequency;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_MISS0Y1KKU1;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_DMDBCOUNT0Y1KKU1;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _COUNTS0Y1KKU1;
MPRINT(EM_DIAGRAM):   merge _DMDBCOUNT0Y1KKU1 _MISS0Y1KKU1;
MPRINT(EM_DIAGRAM):   label NLEVEL= 'Number of Category';
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if NMISS > 0 then do;
MPRINT(EM_DIAGRAM):   NLEVEL= NLEVEL-1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else NMISS = 0;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc sort data=_COUNTS0Y1KKU1 NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M2Y8ZFGG NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data WORK.M2Y8ZFGG;
MPRINT(EM_DIAGRAM):   length NLEVEL 8 nmiss 8;
MPRINT(EM_DIAGRAM):   update WORK.M2Y8ZFGG _COUNTS0Y1KKU1;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if name='' then name='_';
MPRINT(EM_DIAGRAM):   if levelAssigned and ROLE ne 'FREQ' then do;
MPRINT(EM_DIAGRAM):   select(NLEVEL);
MPRINT(EM_DIAGRAM):   when(.) do;
MPRINT(EM_DIAGRAM):   if type eq 'C' then level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when(0) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(1) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(2) level = 'BINARY';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if roleAssigned then do;
MPRINT(EM_DIAGRAM):   if level = 'NOMINAL' and NLEVEL > 20 then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   comment = "Exceeds maximum number of levels cutoff";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = 'UNARY' and ROLE ne 'FREQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   drop NLEVEL nmiss;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL=
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY=
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT=
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL=
"Label" LENGTH= "Length";
MPRINT(EM_DIAGRAM):   drop levelAssigned roleAssigned;
MPRINT(EM_DIAGRAM):   run;
1782692    data WORK.M145BPSG;
MPRINT(EM_DIAGRAM):    data WORK.M145BPSG;
1782693    set WORK.M145BPSG;
MPRINT(EM_DIAGRAM):   set WORK.M145BPSG;
1782694    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
1782695    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
1782696    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
1782697    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
1782698    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
1782699    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
1782700    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
1782701    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
1782702    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M145BPSG.
NOTE: The data set WORK.M145BPSG has 17 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782703    data WORK.M2FS9WFX;
MPRINT(EM_DIAGRAM):    data WORK.M2FS9WFX;
1782704    set WORK.M2FS9WFX;
MPRINT(EM_DIAGRAM):   set WORK.M2FS9WFX;
1782705    if role='INPUT' and use='D' then use='Y';
MPRINT(EM_DIAGRAM):   if role='INPUT' and use='D' then use='Y';
1782706    if NAME='_bin' then do;
MPRINT(EM_DIAGRAM):   if NAME='_bin' then do;
1782707    ROLE='TARGET';
MPRINT(EM_DIAGRAM):   ROLE='TARGET';
1782708    LEVEL='BINARY';
MPRINT(EM_DIAGRAM):   LEVEL='BINARY';
1782709    USE='Y';
MPRINT(EM_DIAGRAM):   USE='Y';
1782710    end;
MPRINT(EM_DIAGRAM):   end;
1782711    if NAME='DepVar' then do;
MPRINT(EM_DIAGRAM):   if NAME='DepVar' then do;
1782712    ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   ROLE='REJECTED';
1782713    end;
MPRINT(EM_DIAGRAM):   end;
1782714    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
1782715    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
1782716    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
1782717    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
1782718    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
1782719    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
1782720    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
1782721    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
1782722    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 18 observations read from the data set WORK.M2FS9WFX.
NOTE: The data set WORK.M2FS9WFX has 18 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782723    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1782724    * Binary Model DepVar = 1;
MPRINT(EM_DIAGRAM):   * Binary Model DepVar = 1;
1782725    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782726    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782727    * REGRESSION MODEL DepVar binary BIN2;
MPRINT(EM_DIAGRAM):   * REGRESSION MODEL DepVar binary BIN2;
1782728    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782729    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782730    * Rule3: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule3: Create decision matrix;
1782731    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782732    data EM_DMREG / view=EM_DMREG;
MPRINT(EM_DIAGRAM):   data EM_DMREG / view=EM_DMREG;
1782733    set work._train(keep=
1782734    DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
1782735    GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
1782736    GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1782737    Year_Birth _bin);
MPRINT(EM_DIAGRAM):   set work._train(keep= DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth _bin);
1782738    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA STEP view saved on file WORK.EM_DMREG.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1782739    *------------------------------------------------------------* ;
1782740    * Rule3: DMDBClass Macro ;
1782741    *------------------------------------------------------------* ;
1782742    %macro DMDBClass;
1782743        DepVar(ASC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC) GRP_Mnt(ASC)
1782744       GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
1782745       GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
1782746       GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
1782747       _bin(DESC)
1782748    %mend DMDBClass;
1782749    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1782750    * Rule3: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBVar Macro ;
1782751    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1782752    %macro DMDBVar;
1782753        Year_Birth
1782754    %mend DMDBVar;
1782755    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782756    * Rule3: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule3: Create DMDB;
1782757    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782758    proc dmdb batch data=WORK.EM_DMREG
1782759    dmdbcat=WORK.Rule3_DMDB
1782760    maxlevel = 513
1782761    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=WORK.EM_DMREG dmdbcat=WORK.Rule3_DMDB maxlevel =
513 ;
MPRINT(EM_DIAGRAM):   class
1782762    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(ASC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC)
GRP_Mnt(ASC) GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC) _bin(DESC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
1782763    var %DMDBVar;
MPRINT(DMDBVAR):   Year_Birth
MPRINT(EM_DIAGRAM):  ;
1782764    target
1782765    _bin
1782766    ;
MPRINT(EM_DIAGRAM):   target _bin ;
1782767    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 430   Memory used = 511K.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
NOTE: There were 430 observations read from the data set WORK._TRAIN.
NOTE: There were 430 observations read from the data set WORK.EM_DMREG.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1782768    quit;
1782769    *--- end code ---*;
 
1782770    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1782771    * Rule3: Run DMREG procedure;
MPRINT(EM_DIAGRAM):   * Rule3: Run DMREG procedure;
1782772    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1782773    proc dmreg data=EM_DMREG dmdbcat=WORK.Rule3_DMDB
1782774    validata = work._valid
1782775    outest = WORK.DMREG_060F441_OUTEST
1782776    outterms = WORK.DMREG_060F441_OUTTERMS
1782777    outmap= WORK.DMREG_060F441_MAP namelen=200
1782778    ;
MPRINT(EM_DIAGRAM):   proc dmreg data=EM_DMREG dmdbcat=WORK.Rule3_DMDB validata = work._valid
outest = WORK.DMREG_060F441_OUTEST outterms = WORK.DMREG_060F441_OUTTERMS outmap=
WORK.DMREG_060F441_MAP namelen=200 ;
1782779    class
1782780    _bin
1782781    GRP_AcceptedCmp5
1782782    GRP_Frq
1782783    GRP_Income
1782784    GRP_Mnt
1782785    GRP_MntFishProducts
1782786    GRP_MntGoldProds
1782787    GRP_MntMeatProducts
1782788    GRP_MntWines
1782789    GRP_NumCatalogPurchases
1782790    GRP_NumDistPurchases
1782791    GRP_NumWebPurchases
1782792    GRP_RFMstat
1782793    GRP_RMntFrq
1782794    GRP_Recency
1782795    ;
MPRINT(EM_DIAGRAM):   class _bin GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency ;
1782796    model _bin =
1782797    GRP_AcceptedCmp5
1782798    GRP_Frq
1782799    GRP_Income
1782800    GRP_Mnt
1782801    GRP_MntFishProducts
1782802    GRP_MntGoldProds
1782803    GRP_MntMeatProducts
1782804    GRP_MntWines
1782805    GRP_NumCatalogPurchases
1782806    GRP_NumDistPurchases
1782807    GRP_NumWebPurchases
1782808    GRP_RFMstat
1782809    GRP_RMntFrq
1782810    GRP_Recency
1782811    Year_Birth
1782812    /error=binomial link=LOGIT
1782813    coding=DEVIATION
1782814    nodesignprint
1782815    ;
MPRINT(EM_DIAGRAM):   model _bin = GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth
/error=binomial link=LOGIT coding=DEVIATION nodesignprint ;
1782816    ;
MPRINT(EM_DIAGRAM):   ;
1782817    score data=_train
1782818    out=_ptrain(label="")
1782819    ;
MPRINT(EM_DIAGRAM):   score data=_train out=_ptrain(label="") ;
1782820    score data=_valid
1782821    out=_pvalid(label="")
1782822    ;
MPRINT(EM_DIAGRAM):   score data=_valid out=_pvalid(label="") ;
1782823    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1782823  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2.sas"
1782824    group=Rule3_2
1782825    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2.sas" group=Rule3_2 ;
1782826    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1782826  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2_res.sas"
1782827    group=Rule3_2
1782828    residual
1782829    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2_res.sas" group=Rule3_2 residual ;
1782830    run;
MPRINT(EM_DIAGRAM):   run;
 
 
NOTE: PROC DMREG is modeling the probability that _bin='1'.
NOTE: Convergence criterion (GCONV=1E-6) satisfied.
NOTE: At least one element of the gradient is greater than 1e-3.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2.sas opened.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2_res.sas opened.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
 
NOTE: There were 430 observations read from the data set WORK._TRAIN.
NOTE: There were 430 observations read from the data set WORK.EM_DMREG.
NOTE: There were 184 observations read from the data set WORK._VALID.
NOTE: There were 430 observations read from the data set WORK._TRAIN.
NOTE: There were 184 observations read from the data set WORK._VALID.
NOTE: The data set WORK.DMREG_060F441_OUTEST has 3 observations and 75 variables.
NOTE: The data set WORK.DMREG_060F441_OUTTERMS has 41 observations and 6 variables.
NOTE: The data set WORK.DMREG_060F441_MAP has 2 observations and 42 variables.
NOTE: The data set WORK._PTRAIN has 430 observations and 26 variables.
NOTE: The data set WORK._PVALID has 184 observations and 27 variables.
NOTE: The PROCEDURE DMREG printed pages 1763-1764.
NOTE: PROCEDURE DMREG used (Total process time):
      real time           0.17 seconds
      cpu time            0.15 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
1782831    quit;
 
1782832    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
1782833    delete Rule3_DMDB;
MPRINT(EM_DIAGRAM):   delete Rule3_DMDB;
1782834    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The file WORK.RULE3_DMDB (memtype=DATA) was not found, but appears on a DELETE statement.
1782835    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
 
 
1782836    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
1782837    delete Rule3_DMDB / memtype=catalog;
MPRINT(EM_DIAGRAM):   delete Rule3_DMDB / memtype=catalog;
1782838    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK.RULE3_DMDB (memtype=CATALOG).
1782839    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1782840    * BINARY: Training Classification;
MPRINT(EM_DIAGRAM):    * BINARY: Training Classification;
1782841    ;
MPRINT(EM_DIAGRAM):   ;
1782842    proc freq data = _ptrain noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _ptrain noprint;
1782843    tables F__bin * I__bin / out = _count;
MPRINT(EM_DIAGRAM):   tables F__bin * I__bin / out = _count;
1782844    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 430 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._COUNT has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1782845    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1782846    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1782847    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
1782848    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
1782849    label F__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label F__bin = "From";
1782850    label I__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label I__bin = "Into";
1782851    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * BINARY: Validation Classification;
MPRINT(EM_DIAGRAM):   ;
1782852    * BINARY: Validation Classification;
1782853    ;
1782854    proc freq data = _pvalid noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _pvalid noprint;
1782855    tables f__bin * i__bin / out=_vcount;
MPRINT(EM_DIAGRAM):   tables f__bin * i__bin / out=_vcount;
1782856    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 184 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VCOUNT has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1782857    data _vcount;
MPRINT(EM_DIAGRAM):   data _vcount;
1782858    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
1782859    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
1782860    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
1782861    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
1782862    label f__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label f__bin = "From";
1782863    label i__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label i__bin = "Into";
1782864    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
1782865    rename percent= vpercent;
MPRINT(EM_DIAGRAM):   rename percent= vpercent;
1782866    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
1782867    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1782868    *;
1782869    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1782870    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1782871    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
1782872    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
1782873    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * Merge Train and Valid classification;
MPRINT(EM_DIAGRAM):   ;
1782874    * Merge Train and Valid classification;
1782875    ;
1782876    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
1782877    by key;
MPRINT(EM_DIAGRAM):   by key;
1782878    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782879    proc sort data=_vcount;
MPRINT(EM_DIAGRAM):   proc sort data=_vcount;
1782880    by key;
MPRINT(EM_DIAGRAM):   by key;
1782881    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1782882    *;
1782883    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1782884    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
1782885    by key;
MPRINT(EM_DIAGRAM):   by key;
1782886    drop key;
MPRINT(EM_DIAGRAM):   drop key;
1782887    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 4 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *BINARY: Print Classification;
MPRINT(EM_DIAGRAM):   ;
1782888    *BINARY: Print Classification;
1782889    ;
1782890    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_binmodel_title, NOQUOTE, DepVar,
1782890  ! %nrbquote(1)))";
MPRINT(EM_DIAGRAM):   title9 "Binary Model DepVar = 1";
1782891    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Classification Table";
1782892    proc print data = _count noobs label;
MPRINT(EM_DIAGRAM):   proc print data = _count noobs label;
1782893    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 1765.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782894    title9;
MPRINT(EM_DIAGRAM):   title9;
1782895    title10;
MPRINT(EM_DIAGRAM):   title10;
1782896    * Extract misfit training values;
MPRINT(EM_DIAGRAM):    * Extract misfit training values;
1782897    ;
MPRINT(EM_DIAGRAM):   ;
1782898    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
1782899    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1782900    if not ( I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not ( I__bin eq '1' and F__bin eq '1') then output;
1782901    keep
1782902    GRP_AcceptedCmp5
1782903    GRP_Frq
1782904    GRP_Income
1782905    GRP_Mnt
1782906    GRP_MntFishProducts
1782907    GRP_MntGoldProds
1782908    GRP_MntMeatProducts
1782909    GRP_MntWines
1782910    GRP_NumCatalogPurchases
1782911    GRP_NumDistPurchases
1782912    GRP_NumWebPurchases
1782913    GRP_RFMstat
1782914    GRP_RMntFrq
1782915    GRP_Recency
1782916    Year_Birth
1782917    DepVar;
MPRINT(EM_DIAGRAM):   keep GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth DepVar;
1782918    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 430 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 73 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * Extract misfit validation values;
MPRINT(EM_DIAGRAM):   ;
1782919    * Extract misfit validation values;
1782920    ;
1782921    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
1782922    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1782923    if not (I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not (I__bin eq '1' and F__bin eq '1') then output;
1782924    keep
1782925    GRP_AcceptedCmp5
1782926    GRP_Frq
1782927    GRP_Income
1782928    GRP_Mnt
1782929    GRP_MntFishProducts
1782930    GRP_MntGoldProds
1782931    GRP_MntMeatProducts
1782932    GRP_MntWines
1782933    GRP_NumCatalogPurchases
1782934    GRP_NumDistPurchases
1782935    GRP_NumWebPurchases
1782936    GRP_RFMstat
1782937    GRP_RMntFrq
1782938    GRP_Recency
1782939    Year_Birth
1782940    DepVar;
MPRINT(EM_DIAGRAM):   keep GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth DepVar;
1782941    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 184 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 40 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782942    data _train;
MPRINT(EM_DIAGRAM):    data _train;
1782943    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
1782944    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 73 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._TRAIN has 73 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782945    data _valid;
MPRINT(EM_DIAGRAM):   data _valid;
1782946    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
1782947    options validvarname=any;
MPRINT(EM_DIAGRAM):   options validvarname=any;
 
NOTE: There were 40 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VALID has 40 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782948    proc contents data=work._train out=_tempAdvisor noprint;
MPRINT(EM_DIAGRAM):   proc contents data=work._train out=_tempAdvisor noprint;
1782949    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK._TEMPADVISOR has 16 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782950    options validvarname=V7;
MPRINT(EM_DIAGRAM):   options validvarname=V7;
1782951    %let _dsidTable = 0;
1782952    %let _engineTable =;
1782953    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
1782954    dsid = open('work._train');
MPRINT(EM_DIAGRAM):   dsid = open('work._train');
1782955    call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EM_DIAGRAM):   call symput('_dsidTable', strip(put(dsid, best.)));
1782956    if dsid then do;
MPRINT(EM_DIAGRAM):   if dsid then do;
1782957    call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EM_DIAGRAM):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
1782958    dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
1782959    end;
MPRINT(EM_DIAGRAM):   end;
1782960    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782961    options fmterr;
MPRINT(EM_DIAGRAM):    options fmterr;
1782962    data _metaTestView;
MPRINT(EM_DIAGRAM):   data _metaTestView;
1782963    set work._train;
MPRINT(EM_DIAGRAM):   set work._train;
1782964    if _N_=1 then do;
MPRINT(EM_DIAGRAM):   if _N_=1 then do;
1782965    output;
MPRINT(EM_DIAGRAM):   output;
1782966    stop;
MPRINT(EM_DIAGRAM):   stop;
1782967    end;
MPRINT(EM_DIAGRAM):   end;
1782968    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK._METATESTVIEW has 1 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782969    proc contents data=work._train
1782970    out=WORK.M35DS7F9 noprint;
MPRINT(EM_DIAGRAM):    proc contents data=work._train out=WORK.M35DS7F9 noprint;
1782971    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK.M35DS7F9 has 16 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1782972    data WORK.M35DS7F9;
MPRINT(EM_DIAGRAM):    data WORK.M35DS7F9;
1782973    length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 INDEXTYPE $
1782973  !  9;
MPRINT(EM_DIAGRAM):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1
INDEXTYPE $ 9;
1782974    label NAME =;
MPRINT(EM_DIAGRAM):   label NAME =;
1782975    set WORK.M35DS7F9(keep=name type length label format formatl formatd informat
1782975  ! informl informd idxusage rename=(type=itype));
MPRINT(EM_DIAGRAM):   set WORK.M35DS7F9(keep=name type length label format formatl formatd
informat informl informd idxusage rename=(type=itype));
1782976    if itype = 1 then type = 'N';
MPRINT(EM_DIAGRAM):   if itype = 1 then type = 'N';
1782977    else type = 'C';
MPRINT(EM_DIAGRAM):   else type = 'C';
1782978    if formatl > 0 then do;
MPRINT(EM_DIAGRAM):   if formatl > 0 then do;
1782979    if format ne ' ' then format = strip(format)!!strip(put(formatl,
1782979  ! best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   if format ne ' ' then format = strip(format)!!strip(put(formatl,
best12.))!!'.'!!strip(put(formatd, best12.));
1782980    else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd,
best12.));
1782981    end;
MPRINT(EM_DIAGRAM):   end;
1782982    else if format ne '' then format = strip(format)!!'.';
MPRINT(EM_DIAGRAM):   else if format ne '' then format = strip(format)!!'.';
1782983    if informl > 0 then do;
MPRINT(EM_DIAGRAM):   if informl > 0 then do;
1782984    if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
1782984  ! best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
best12.))!!'.'!!strip(put(informd, best12.));
1782985    else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd,
best12.));
1782986    end;
MPRINT(EM_DIAGRAM):   end;
1782987    else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EM_DIAGRAM):   else if informat ne '' then informat = strip(informat)!!'.';
1782988    if idxusage = 'NONE' then index ="N";
MPRINT(EM_DIAGRAM):   if idxusage = 'NONE' then index ="N";
1782989    else index = "Y";
MPRINT(EM_DIAGRAM):   else index = "Y";
1782990    indextype = idxusage;
MPRINT(EM_DIAGRAM):   indextype = idxusage;
1782991    drop idxusage itype formatl formatd informl informd;
MPRINT(EM_DIAGRAM):   drop idxusage itype formatl formatd informl informd;
1782992    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 16 observations read from the data set WORK.M35DS7F9.
NOTE: The data set WORK.M35DS7F9 has 16 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1782993    data WORK.M35DS7F9;
MPRINT(EM_DIAGRAM):    data WORK.M35DS7F9;
1782994    length UNAME $64;
MPRINT(EM_DIAGRAM):   length UNAME $64;
1782995    set WORK.M35DS7F9;
MPRINT(EM_DIAGRAM):   set WORK.M35DS7F9;
1782996    UNAME = upcase(NAME);
MPRINT(EM_DIAGRAM):   UNAME = upcase(NAME);
1782997    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 16 observations read from the data set WORK.M35DS7F9.
NOTE: The data set WORK.M35DS7F9 has 16 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):    proc sort data=WORK.M12XO9UG NOTHREADS;
MPRINT(EM_DIAGRAM):   by UNAME;
MPRINT(EM_DIAGRAM):   run;
1783001    data WORK.M12XO9UG;
MPRINT(EM_DIAGRAM):    data WORK.M12XO9UG;
1783002    drop UNAME;
MPRINT(EM_DIAGRAM):   drop UNAME;
1783003    set WORK.M12XO9UG;
MPRINT(EM_DIAGRAM):   set WORK.M12XO9UG;
1783004    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 16 observations read from the data set WORK.M12XO9UG.
NOTE: The data set WORK.M12XO9UG has 16 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):    data WORK.M24EGE6A(keep=NAME ATTR);
MPRINT(EM_DIAGRAM):   length ATTR $ 20;
MPRINT(EM_DIAGRAM):   set WORK.M12XO9UG;
MPRINT(EM_DIAGRAM):   if level ne "INTERVAL" then do;
MPRINT(EM_DIAGRAM):   if order = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ORDER';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'FORMATTYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ROLE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'LEVEL';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if type = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'TYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if index = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'INDEX';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if report = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'REPORT';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort NOTHREADS;
MPRINT(EM_DIAGRAM):   by attr;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.M12XO9UG;
MPRINT(EM_DIAGRAM):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $
10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EM_DIAGRAM):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EM_DIAGRAM):   set WORK.M12XO9UG;
MPRINT(EM_DIAGRAM):   if formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   if format ne ' ' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
MPRINT(EM_DIAGRAM):   pos = indexc(format,'.1234567890');
MPRINT(EM_DIAGRAM):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EM_DIAGRAM):   else tempfmt = ' ';
MPRINT(EM_DIAGRAM):   flen = length(tempfmt);
MPRINT(EM_DIAGRAM):   select;
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN"
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO"
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON"
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD"
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" ))
formattype = 'DATE';
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype =
"TIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT"
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN"
"Z" "ZD")) formattype = "CODING";
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   formattype = "USER";
MPRINT(EM_DIAGRAM):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EM_DIAGRAM):   else if flen >= 4 then do;
MPRINT(EM_DIAGRAM):   str = substr(tempfmt,1,4);
MPRINT(EM_DIAGRAM):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EM_DIAGRAM):   else if str = "S370" then formattype = "CODING";
MPRINT(EM_DIAGRAM):   else if str = "BEST" then formattype = "NUM";
MPRINT(EM_DIAGRAM):   drop str;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType =
"DATE";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   drop flen tempfmt pos;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   formatType = "CATEGORY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if formatType = "NUM" then do;
MPRINT(EM_DIAGRAM):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EM_DIAGRAM):   else formatType = "QUANTITY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level =
"NOMINAL";
MPRINT(EM_DIAGRAM):   else level = "INTERVAL";
MPRINT(EM_DIAGRAM):   levelAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else level = upcase(level);
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   length name_prefix $8 _uname $64;
MPRINT(EM_DIAGRAM):   drop name_prefix _uname _freqflag;
MPRINT(EM_DIAGRAM):   retain _freqflag;
MPRINT(EM_DIAGRAM):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EM_DIAGRAM):   _uname = upcase(NAME);
MPRINT(EM_DIAGRAM):   select(_uname);
MPRINT(EM_DIAGRAM):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_SEGMENT') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('_NODE_') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('URI') ROLE = 'URL';
MPRINT(EM_DIAGRAM):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'REJECTED';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'FREQ';
MPRINT(EM_DIAGRAM):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EM_DIAGRAM):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   name_prefix = scan(_uname, 1, '_');
MPRINT(EM_DIAGRAM):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EM_DIAGRAM):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS',
'RAT') then ROLE = 'RESIDUAL';
MPRINT(EM_DIAGRAM):   else if name_prefix ='D' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix ='B' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI',
'IC') then ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR',
'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL',
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT',
'TIMEID');
MPRINT(EM_DIAGRAM):   drop _found_ i;
MPRINT(EM_DIAGRAM):   _found_=0;
MPRINT(EM_DIAGRAM):   do i=1 to 19 until(_found_=1);
MPRINT(EM_DIAGRAM):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EM_DIAGRAM):   ROLE=_ROLE_{i};
MPRINT(EM_DIAGRAM):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EM_DIAGRAM):   _found_=1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if length(_uname)>2 then do;
MPRINT(EM_DIAGRAM):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'ID';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EM_DIAGRAM):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EM_DIAGRAM):   else role = 'INPUT';
MPRINT(EM_DIAGRAM):   roleAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else role = upcase(role);
MPRINT(EM_DIAGRAM):   if REPORT = '' then REPORT = 'N';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    proc dmdb data=work._train(obs=1000000) batch classOut=_DMDB0X1QG8P
maxLevel=22;
MPRINT(EM_DIAGRAM):   class
MPRINT(DMDBCLASS):   DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_Recency GRP_RFMstat GRP_RMntFrq Year_Birth
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc freq data=_DMDB0X1QG8P noprint;
MPRINT(EM_DIAGRAM):   table name / out=_DMDBCOUNT0X1QG8P(drop=percent rename=(count=NLEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _MISS0X1QG8P(rename=(frequency=NMISS));
MPRINT(EM_DIAGRAM):   set _DMDB0X1QG8P(where=(NRAW=. and CRAW=''));
MPRINT(EM_DIAGRAM):   keep name frequency;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_MISS0X1QG8P;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_DMDBCOUNT0X1QG8P;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _COUNTS0X1QG8P;
MPRINT(EM_DIAGRAM):   merge _DMDBCOUNT0X1QG8P _MISS0X1QG8P;
MPRINT(EM_DIAGRAM):   label NLEVEL= 'Number of Category';
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if NMISS > 0 then do;
MPRINT(EM_DIAGRAM):   NLEVEL= NLEVEL-1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else NMISS = 0;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc sort data=_COUNTS0X1QG8P NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M12XO9UG NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data WORK.M12XO9UG;
MPRINT(EM_DIAGRAM):   length NLEVEL 8 nmiss 8;
MPRINT(EM_DIAGRAM):   update WORK.M12XO9UG _COUNTS0X1QG8P;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if name='' then name='_';
MPRINT(EM_DIAGRAM):   if levelAssigned and ROLE ne 'FREQ' then do;
MPRINT(EM_DIAGRAM):   select(NLEVEL);
MPRINT(EM_DIAGRAM):   when(.) do;
MPRINT(EM_DIAGRAM):   if type eq 'C' then level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when(0) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(1) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(2) level = 'BINARY';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if roleAssigned then do;
MPRINT(EM_DIAGRAM):   if level = 'NOMINAL' and NLEVEL > 20 then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   comment = "Exceeds maximum number of levels cutoff";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = 'UNARY' and ROLE ne 'FREQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   drop NLEVEL nmiss;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL=
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY=
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT=
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL=
"Label" LENGTH= "Length";
MPRINT(EM_DIAGRAM):   drop levelAssigned roleAssigned;
MPRINT(EM_DIAGRAM):   run;
1783288    title8 "%sysfunc(sasmsg(sashelp.dmine, rpt_clean_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):    title8 "Cleanup Model";
1783289    data WORK.M145BPSG;
MPRINT(EM_DIAGRAM):   data WORK.M145BPSG;
1783290    set WORK.M145BPSG;
MPRINT(EM_DIAGRAM):   set WORK.M145BPSG;
1783291    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
1783292    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
1783293    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
1783294    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
1783295    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
1783296    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
1783297    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
1783298    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
1783299    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 17 observations read from the data set WORK.M145BPSG.
NOTE: The data set WORK.M145BPSG has 17 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1783300    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1783301    * Cleanup Model;
MPRINT(EM_DIAGRAM):   * Cleanup Model;
1783302    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783303    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783304    * NEURAL MODEL DepVar BINARY CM;
MPRINT(EM_DIAGRAM):   * NEURAL MODEL DepVar BINARY CM;
1783305    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783306    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783307    * Rule3: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule3: Create decision matrix;
1783308    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783309    data EM_Rule3;
MPRINT(EM_DIAGRAM):   data EM_Rule3;
1783310    set work._train(keep=
1783311    DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
1783312    GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
1783313    GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1783314    Year_Birth );
MPRINT(EM_DIAGRAM):   set work._train(keep= DepVar GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt
GRP_MntFishProducts GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency Year_Birth );
1783315    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 73 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK.EM_RULE3 has 73 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783316    *------------------------------------------------------------* ;
1783317    * Rule3: DMDBClass Macro ;
1783318    *------------------------------------------------------------* ;
1783319    %macro DMDBClass;
1783320        DepVar(DESC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC) GRP_Mnt(ASC)
1783321       GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
1783322       GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
1783323       GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
1783324    %mend DMDBClass;
1783325    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783326    * Rule3: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: DMDBVar Macro ;
1783327    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783328    %macro DMDBVar;
1783329        Year_Birth
1783330    %mend DMDBVar;
1783331    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783332    * Rule3: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule3: Create DMDB;
1783333    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783334    proc dmdb batch data=WORK.EM_Rule3
1783335    dmdbcat=WORK.Rule3_DMDB
1783336    maxlevel = 513
1783337    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=WORK.EM_Rule3 dmdbcat=WORK.Rule3_DMDB maxlevel =
513 ;
MPRINT(EM_DIAGRAM):   class
1783338    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC) GRP_AcceptedCmp5(ASC) GRP_Frq(ASC) GRP_Income(ASC)
GRP_Mnt(ASC) GRP_MntFishProducts(ASC) GRP_MntGoldProds(ASC) GRP_MntMeatProducts(ASC)
GRP_MntWines(ASC) GRP_NumCatalogPurchases(ASC) GRP_NumDistPurchases(ASC)
GRP_NumWebPurchases(ASC) GRP_RFMstat(ASC) GRP_RMntFrq(ASC) GRP_Recency(ASC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
1783339    var %DMDBVar;
MPRINT(DMDBVAR):   Year_Birth
MPRINT(EM_DIAGRAM):  ;
1783340    target
1783341    DepVar
1783342    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
1783343    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 73   Memory used = 511K.
NOTE: There were 73 observations read from the data set WORK.EM_RULE3.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
1783344    quit;
1783345    *--- end code ---*;
 
1783346    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
1783347    * Rule3: Interval Input Variables Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Interval Input Variables Macro ;
1783348    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783349    %macro INTINPUTS;
1783350        Year_Birth
1783351    %mend INTINPUTS;
1783352    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783353    * Rule3: Binary Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Binary Inputs Macro ;
1783354    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783355    %macro BININPUTS;
1783356
1783357    %mend BININPUTS;
1783358    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783359    * Rule3: Nominal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Nominal Inputs Macro ;
1783360    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783361    %macro NOMINPUTS;
1783362        GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
1783363       GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases
1783364       GRP_NumDistPurchases GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1783365    %mend NOMINPUTS;
1783366    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783367    * Rule3: Ordinal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule3: Ordinal Inputs Macro ;
1783368    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
1783369    %macro ORDINPUTS;
1783370
1783371    %mend ORDINPUTS;
1783372    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783373    * Neural Network Training;
MPRINT(EM_DIAGRAM):   * Neural Network Training;
1783374    ;
MPRINT(EM_DIAGRAM):   ;
1783375    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783376    proc neural data=EM_Rule3 dmdbcat=WORK.Rule3_DMDB
1783377    validdata = work._valid
1783378    random=12345
1783379    ;
MPRINT(EM_DIAGRAM):   proc neural data=EM_Rule3 dmdbcat=WORK.Rule3_DMDB validdata =
work._valid random=12345 ;
1783380    nloptions
1783381    noprint
1783382    ;
MPRINT(EM_DIAGRAM):   nloptions noprint ;
1783383    performance alldetails noutilfile;
MPRINT(EM_DIAGRAM):   performance alldetails noutilfile;
1783384    netopts
1783385    decay=0;
MPRINT(EM_DIAGRAM):   netopts decay=0;
MPRINT(EM_DIAGRAM):   input
1783386    input %INTINPUTS / level=interval id=intvl
MPRINT(INTINPUTS):   Year_Birth
1783387    ;
MPRINT(EM_DIAGRAM):   / level=interval id=intvl ;
MPRINT(EM_DIAGRAM):   input
1783388    input %NOMINPUTS / level=nominal id=nom
MPRINT(NOMINPUTS):   GRP_AcceptedCmp5 GRP_Frq GRP_Income GRP_Mnt GRP_MntFishProducts
GRP_MntGoldProds GRP_MntMeatProducts GRP_MntWines GRP_NumCatalogPurchases GRP_NumDistPurchases
GRP_NumWebPurchases GRP_RFMstat GRP_RMntFrq GRP_Recency
1783389    ;
MPRINT(EM_DIAGRAM):   / level=nominal id=nom ;
1783390    target DepVar / level=NOMINAL id=DepVar
1783391    bias
1783392    ;
MPRINT(EM_DIAGRAM):   target DepVar / level=NOMINAL id=DepVar bias ;
1783393    arch NRBFEQ
1783394    Hidden=3
1783395    ;
MPRINT(EM_DIAGRAM):   arch NRBFEQ Hidden=3 ;
1783396    Prelim 8 preiter=10
1783397    pretime=3600
1783398    Outest=WORK.PRELIMOUTEST_EMNEURAL_0UEKSU8
1783399    ;
MPRINT(EM_DIAGRAM):   Prelim 8 preiter=10 pretime=3600
Outest=WORK.PRELIMOUTEST_EMNEURAL_0UEKSU8 ;
NOTE:  Synchronizing the objectives and the Solution.
NOTE: QUANEW Optimization cannot be completed.
NOTE: QUANEW needs more than 10 iterations or 2147483647 function calls.
NOTE: Convergence criterion (ABSGCONV=0.00001) satisfied.
NOTE: Convergence criterion (ABSGCONV=0.00001) satisfied.
NOTE: Convergence criterion (ABSCONV=0.0036250918) satisfied.
NOTE: QUANEW Optimization cannot be completed.
NOTE: QUANEW needs more than 10 iterations or 2147483647 function calls.
NOTE: QUANEW Optimization cannot be completed.
NOTE: QUANEW needs more than 10 iterations or 2147483647 function calls.
NOTE: Convergence criterion (ABSGCONV=0.00001) satisfied.
NOTE: QUANEW Optimization cannot be completed.
NOTE: QUANEW needs more than 10 iterations or 2147483647 function calls.
NOTE: The data set WORK.PRELIMOUTEST_EMNEURAL_0UEKSU8 has 17 observations and 136 variables.
1783400    save network=WORK.NETWORK.dm_neural;
MPRINT(EM_DIAGRAM):   save network=WORK.NETWORK.dm_neural;
NOTE: Entry WORK.NETWORK.DM_NEURAL has been opened.
NOTE: Entry WORK.NETWORK.DM_NEURAL has been closed.
1783401    train Maxiter=20
1783402    maxtime=14400
1783403    Outest=WORK.Rule3_outest estiter=1
1783404    Outfit=_rnfit
1783405    ;
MPRINT(EM_DIAGRAM):   train Maxiter=20 maxtime=14400 Outest=WORK.Rule3_outest estiter=1
Outfit=_rnfit ;
NOTE: Convergence criterion (ABSCONV=0.0036250918) satisfied.
NOTE: The data set WORK.RULE3_OUTEST has 3 observations and 136 variables.
NOTE: The data set WORK._RNFIT has 4 observations and 36 variables.
1783406    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK.EM_RULE3 has 73 observations and 16 variables.
NOTE: The data set WORK._VALID has 40 observations and 16 variables.
NOTE: Closing the Neural Application.
NOTE: The PROCEDURE NEURAL printed page 1766.
NOTE: PROCEDURE NEURAL used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
1783407    quit;
 
1783408    proc sort data=_rnfit(where=(_iter_ ne . and _NAME_="OVERALL")) out=fit_Rule3;
MPRINT(EM_DIAGRAM):    proc sort data=_rnfit(where=(_iter_ ne . and _NAME_="OVERALL"))
out=fit_Rule3;
1783409    by _VAVERR_;
MPRINT(EM_DIAGRAM):   by _VAVERR_;
1783410    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._RNFIT.
      WHERE (_iter_ not = .) and (_NAME_='OVERALL');
NOTE: The data set WORK.FIT_RULE3 has 2 observations and 36 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1783411    %GLOBAL ITER;
1783412    data _null_;
MPRINT(EM_DIAGRAM):   data _null_;
1783413    set fit_Rule3(obs=1);
MPRINT(EM_DIAGRAM):   set fit_Rule3(obs=1);
1783414    call symput('ITER',put(_ITER_, 6.));
MPRINT(EM_DIAGRAM):   call symput('ITER',put(_ITER_, 6.));
1783415    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set WORK.FIT_RULE3.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1783416    data WORK.INITIAL_EMNEURAL_0UEKSU8;
MPRINT(EM_DIAGRAM):   data WORK.INITIAL_EMNEURAL_0UEKSU8;
1783417    set WORK.Rule3_outest(where=(_ITER_ eq &ITER and _OBJ_ ne .));
MPRINT(EM_DIAGRAM):   set WORK.Rule3_outest(where=(_ITER_ eq 0 and _OBJ_ ne .));
1783418    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK.RULE3_OUTEST.
      WHERE (_ITER_=0) and (_OBJ_ not = .);
NOTE: The data set WORK.INITIAL_EMNEURAL_0UEKSU8 has 2 observations and 136 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1783419    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1783420    * Neural Network Model Selection;
MPRINT(EM_DIAGRAM):   * Neural Network Model Selection;
1783421    ;
MPRINT(EM_DIAGRAM):   ;
1783422    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783423    proc neural data=EM_Rule3 dmdbcat=WORK.Rule3_DMDB
1783424    validdata = work._valid
1783425    network = WORK.NETWORK.dm_neural
1783426    random=12345
1783427    ;
MPRINT(EM_DIAGRAM):   proc neural data=EM_Rule3 dmdbcat=WORK.Rule3_DMDB validdata =
work._valid network = WORK.NETWORK.dm_neural random=12345 ;
NOTE: Entry WORK.NETWORK.DM_NEURAL has been opened.
NOTE: Entry WORK.NETWORK.DM_NEURAL has been closed.
1783428    nloptions noprint;
MPRINT(EM_DIAGRAM):   nloptions noprint;
1783429    performance alldetails noutilfile;
MPRINT(EM_DIAGRAM):   performance alldetails noutilfile;
1783430    initial inest=WORK.INITIAL_EMNEURAL_0UEKSU8;
MPRINT(EM_DIAGRAM):   initial inest=WORK.INITIAL_EMNEURAL_0UEKSU8;
NOTE: The data set WORK.INITIAL_EMNEURAL_0UEKSU8 has 2 observations and 136 variables.
1783431    train tech=NONE;
MPRINT(EM_DIAGRAM):   train tech=NONE;
NOTE: No optimization performed.
1783432    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1783432  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\CM.sas"
1783433    group=Rule3
1783434    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\CM.sas" group=Rule3 ;
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\CM.sas opened.
1783435    ;
MPRINT(EM_DIAGRAM):   ;
1783436    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
1783436  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\CM_res.sas"
1783437    group=Rule3
1783438    residual
1783439    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
Files\_TD9752_WN7LF-LEAVE_\Prc2\CM_res.sas" group=Rule3 residual ;
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
      Files\_TD9752_WN7LF-LEAVE_\Prc2\CM_res.sas opened.
1783440    ;
MPRINT(EM_DIAGRAM):   ;
1783441    score data=_train out=_ptrain
1783442    outkey=WORK.OUTKEY_EMNEURAL_0UEKSU8;
MPRINT(EM_DIAGRAM):   score data=_train out=_ptrain outkey=WORK.OUTKEY_EMNEURAL_0UEKSU8;
NOTE: The data set WORK.OUTKEY_EMNEURAL_0UEKSU8 has 14 observations and 8 variables.
NOTE: The data set WORK._TRAIN has 73 observations and 16 variables.
NOTE: The data set WORK._PTRAIN has 73 observations and 30 variables.
1783443    score data=_valid out=_pvalid
1783444    outkey=WORK.OUTKEY_EMNEURAL_0UEKSU8;
MPRINT(EM_DIAGRAM):   score data=_valid out=_pvalid outkey=WORK.OUTKEY_EMNEURAL_0UEKSU8;
NOTE: The data set WORK.OUTKEY_EMNEURAL_0UEKSU8 has 14 observations and 8 variables.
NOTE: The data set WORK._VALID has 40 observations and 16 variables.
NOTE: The data set WORK._PVALID has 40 observations and 30 variables.
1783445    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set WORK.EM_RULE3 has 73 observations and 16 variables.
NOTE: The data set WORK._VALID has 40 observations and 16 variables.
NOTE: Closing the Neural Application.
NOTE: PROCEDURE NEURAL used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
1783446    quit;
1783447    data _rnest;
MPRINT(EM_DIAGRAM):   data _rnest;
1783448    set WORK.Rule3_outest;
MPRINT(EM_DIAGRAM):   set WORK.Rule3_outest;
1783449    if _type_ ^in('HESSIAN' 'GRAD');
MPRINT(EM_DIAGRAM):   if _type_ ^in('HESSIAN' 'GRAD');
1783450    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.RULE3_OUTEST.
NOTE: The data set WORK._RNEST has 2 observations and 136 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1783451    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
1783452    delete EM_Rule3;
MPRINT(EM_DIAGRAM):   delete EM_Rule3;
1783453    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK.EM_RULE3 (memtype=DATA).
1783454    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1783455    * CLEANUP: Training Classification;
MPRINT(EM_DIAGRAM):    * CLEANUP: Training Classification;
1783456    ;
MPRINT(EM_DIAGRAM):   ;
1783457    proc freq data= _ptrain noprint;
MPRINT(EM_DIAGRAM):   proc freq data= _ptrain noprint;
1783458    tables F_DepVar * I_DepVar / out = _count;
MPRINT(EM_DIAGRAM):   tables F_DepVar * I_DepVar / out = _count;
1783459    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 73 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._COUNT has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1783460    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1783461    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1783462    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
1783463    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
1783464    label F_DepVar = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label F_DepVar = "Target";
1783465    label I_DepVar = "%sysfunc(sasmsg(sashelp.dmine, rpt_predict_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label I_DepVar = "Predict";
1783466    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * CLEANUP: Validation Classification;
MPRINT(EM_DIAGRAM):   ;
1783467    * CLEANUP: Validation Classification;
1783468    ;
1783469    proc freq data= _pvalid noprint;
MPRINT(EM_DIAGRAM):   proc freq data= _pvalid noprint;
1783470    tables F_DepVar * I_DepVar / out = _vcount;
MPRINT(EM_DIAGRAM):   tables F_DepVar * I_DepVar / out = _vcount;
1783471    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 40 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VCOUNT has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
1783472    data _vcount;
MPRINT(EM_DIAGRAM):   data _vcount;
1783473    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
1783474    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
1783475    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
1783476    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
1783477    label F_DepVar = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label F_DepVar = "Target";
1783478    label I_DepVar = "%sysfunc(sasmsg(sashelp.dmine, rpt_predict_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label I_DepVar = "Predict";
1783479    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
1783480    rename percent= vpercent;
MPRINT(EM_DIAGRAM):   rename percent= vpercent;
1783481    key = ktrim(kleft(F_DepVar) !! '_' !! ktrim(kleft(I_DepVar)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(F_DepVar) !! '_' !! ktrim(kleft(I_DepVar)));
1783482    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1783483    *;
1783484    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1783485    set _count;
MPRINT(EM_DIAGRAM):   set _count;
1783486    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
1783487    key = ktrim(kleft(F_DepVar) !!'_' !!ktrim(kleft(I_DepVar)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(F_DepVar) !!'_' !!ktrim(kleft(I_DepVar)));
1783488    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * Merge Train and Valid classification;
MPRINT(EM_DIAGRAM):   ;
1783489    * Merge Train and Valid classification;
1783490    ;
1783491    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
1783492    by key;
MPRINT(EM_DIAGRAM):   by key;
1783493    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1783494    proc sort data=_vcount;
MPRINT(EM_DIAGRAM):   proc sort data=_vcount;
1783495    by key;
MPRINT(EM_DIAGRAM):   by key;
1783496    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *;
1783497    *;
1783498    data _count;
MPRINT(EM_DIAGRAM):   data _count;
1783499    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
1783500    by key;
MPRINT(EM_DIAGRAM):   by key;
1783501    drop key;
MPRINT(EM_DIAGRAM):   drop key;
1783502    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   * CLEANUP: Print Classification;
MPRINT(EM_DIAGRAM):   ;
1783503    * CLEANUP: Print Classification;
1783504    ;
1783505    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_cleanup_title, NOQUOTE, DepVar))";
MPRINT(EM_DIAGRAM):   title9 "TARGET=DepVar : Cleanup Model";
1783506    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Classification Table";
1783507    proc print data = _count noobs label;
MPRINT(EM_DIAGRAM):   proc print data = _count noobs label;
1783508    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 1767.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1783509    title9;
MPRINT(EM_DIAGRAM):   title9;
1783510    title10;
MPRINT(EM_DIAGRAM):   title10;
1783511    title8;
MPRINT(EM_DIAGRAM):    title8;
1783512    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=work nolist;
1783513    delete _train;
MPRINT(EM_DIAGRAM):   delete _train;
1783514    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK._TRAIN (memtype=DATA).
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1783515    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
1783516    delete _ptrain;
MPRINT(EM_DIAGRAM):   delete _ptrain;
1783517    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK._PTRAIN (memtype=DATA).
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1783518    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
1783519    delete _valid;
MPRINT(EM_DIAGRAM):   delete _valid;
1783520    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK._VALID (memtype=DATA).
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
1783521    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
1783522    delete _pvalid;
MPRINT(EM_DIAGRAM):   delete _pvalid;
1783523    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK._PVALID (memtype=DATA).
1783524    %makeResidualVars(target=DepVar, decmeta=EMWS8.Rule3_DepVar_DM , fref=#LN16241);
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
 
 
MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   set EMWS8.Rule3_DepVar_DM end=eof;
MPRINT(MAKERESIDUALVARS):   where _TYPE_ in('TARGET', 'FROM');
MPRINT(MAKERESIDUALVARS):   if _TYPE_='TARGET' then call symput('target_level', strip(LEVEL));
MPRINT(MAKERESIDUALVARS):   else call symput('from_var', strip(VARIABLE));
MPRINT(MAKERESIDUALVARS):   run;
 
NOTE: There were 2 observations read from the data set EMWS8.RULE3_DEPVAR_DM.
      WHERE _TYPE_ in ('FROM', 'TARGET');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   set EMWS8.Rule3_DepVar_DM;
MPRINT(MAKERESIDUALVARS):   where _TYPE_ ='PREDICTED';
MPRINT(MAKERESIDUALVARS):   call symput('pred_vars'!!strip(put(_N_,BEST.)), strip(Variable));
MPRINT(MAKERESIDUALVARS):   run;
 
NOTE: There were 2 observations read from the data set EMWS8.RULE3_DEPVAR_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   set EMWS8.Rule3_DepVar_DM end=eof;
MPRINT(MAKERESIDUALVARS):   where _TYPE_ ='RESIDUAL';
MPRINT(MAKERESIDUALVARS):   call symput('res_vars'!!strip(put(_N_,BEST.)), strip(Variable));
MPRINT(MAKERESIDUALVARS):   call symput('res_labels'!!strip(put(_N_,BEST.)),
strip(tranwrd(LABEL,"'","''")));
MPRINT(MAKERESIDUALVARS):   call symput('res_levels'!!strip(put(_N_,BEST.)),
strip(tranwrd(LEVEL,"'","''")));
MPRINT(MAKERESIDUALVARS):   if eof then call symput('numLevels', strip(put(_N_,BEST.)));
MPRINT(MAKERESIDUALVARS):   run;
 
NOTE: There were 2 observations read from the data set EMWS8.RULE3_DEPVAR_DM.
      WHERE _TYPE_='RESIDUAL';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   file #LN16241;
MPRINT(MAKERESIDUALVARS):   put
"*------------------------------------------------------------*;";
MPRINT(MAKERESIDUALVARS):   put "*Computing Residual Vars: DepVar;";
MPRINT(MAKERESIDUALVARS):   put
"*------------------------------------------------------------*;";
MPRINT(MAKERESIDUALVARS):   put "Label R_DepVar1='Residual: DepVar=1';";
MPRINT(MAKERESIDUALVARS):   put "Label R_DepVar0='Residual: DepVar=0';";
MPRINT(MAKERESIDUALVARS):   put "if ";
MPRINT(MAKERESIDUALVARS):   put " F_DepVar ne '1'";
MPRINT(MAKERESIDUALVARS):   put "and F_DepVar ne '0'";
MPRINT(MAKERESIDUALVARS):   put " then do;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar1=.;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar0=.;";
MPRINT(MAKERESIDUALVARS):   put "end;";
MPRINT(MAKERESIDUALVARS):   put "else do;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar1= - P_DepVar1;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar0= - P_DepVar0;";
MPRINT(MAKERESIDUALVARS):   put "select(F_DepVar);";
MPRINT(MAKERESIDUALVARS):   put "when('1')R_DepVar1= R_DepVar1+1;";
MPRINT(MAKERESIDUALVARS):   put "when('0')R_DepVar0= R_DepVar0+1;";
MPRINT(MAKERESIDUALVARS):   put 'otherwise;';
MPRINT(MAKERESIDUALVARS):   put 'end;';
MPRINT(MAKERESIDUALVARS):   put 'end;';
MPRINT(MAKERESIDUALVARS):   run;
 
NOTE: The file #LN16241 is:
      Filename=C:\\predictive-models-project\Workspaces\EMWS8\Rule3\RESIDUALCODE.sas,
      RECFM=V,LRECL=256,File Size (bytes)=0,
      Last Modified=28. April 2016 09.51 Uhr,
      Create Time=27. April 2016 22.29 Uhr
 
NOTE: 21 records were written to the file #LN16241.
      The minimum record length was 3.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):  ;
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09.51 Uhr" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Score Log
Date:                28. April 2016
Time:                09.51 Uhr
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O1C0H33A
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O1C0H33A new;
MPRINT(EM_DIAGRAM):   run;
1783626    filename emflow
1783626  ! "C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):    filename emflow
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Rule3: Scoring DATA data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783627    *------------------------------------------------------------*;
1783628    * Rule3: Scoring DATA data;
1783629    *------------------------------------------------------------*;
1783630    data EMWS8.Rule3_TRAIN
1783631    / view=EMWS8.Rule3_TRAIN
1783632    ;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_TRAIN / view=EMWS8.Rule3_TRAIN ;
1783633    set EMWS8.BINNING_TRAIN
1783634    ;
MPRINT(EM_DIAGRAM):   set EMWS8.BINNING_TRAIN ;
1783635    %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file
      C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMFLOWSCORE.sas.
1783636   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783637   +* Rule Induction Scoring Code;
MPRINT(EM_DIAGRAM):   * Rule Induction Scoring Code;
1783638   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783639   +length _bin $12 I__bin $12 I_DepVar $32;
MPRINT(EM_DIAGRAM):   length _bin $12 I__bin $12 I_DepVar $32;
1783640   +label I_DepVar = 'Into: DepVar';
MPRINT(EM_DIAGRAM):   label I_DepVar = 'Into: DepVar';
1783641   +label F_DepVar = 'Into: DepVar';
MPRINT(EM_DIAGRAM):   label F_DepVar = 'Into: DepVar';
1783642   +*;
MPRINT(EM_DIAGRAM):   *;
1783643   +drop I__bin;
MPRINT(EM_DIAGRAM):   drop I__bin;
1783644   +*;
MPRINT(EM_DIAGRAM):   *;
1783645   +F_DepVar=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   F_DepVar=putn(DepVar, 'best.');
1783646   +%DMNORMIP(F_DepVar);
MPRINT(DMNORMIP):   call dmnorm(F_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1783647   +I_DepVar = '';
MPRINT(EM_DIAGRAM):   I_DepVar = '';
1783648   +I__bin= '0';
MPRINT(EM_DIAGRAM):   I__bin= '0';
1783649   +*;
MPRINT(EM_DIAGRAM):   *;
1783650   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783651   +* Null Model;
MPRINT(EM_DIAGRAM):   * Null Model;
1783652   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783653   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783654   +*Binary model for DepVar = 0;
MPRINT(EM_DIAGRAM):   *Binary model for DepVar = 0;
1783655   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1783656   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1783657   +*** begin scoring code for regression;
MPRINT(EM_DIAGRAM):   *** begin scoring code for regression;
1783658   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1783659   +
1783660   +length _WARN_ $4;
MPRINT(EM_DIAGRAM):   length _WARN_ $4;
1783661   +label _WARN_ = 'Warnings' ;
MPRINT(EM_DIAGRAM):   label _WARN_ = 'Warnings' ;
1783662   +
1783663   +length I__bin $ 12;
MPRINT(EM_DIAGRAM):   length I__bin $ 12;
1783664   +label I__bin = 'Into: _bin' ;
MPRINT(EM_DIAGRAM):   label I__bin = 'Into: _bin' ;
1783665   +*** Target Values;
MPRINT(EM_DIAGRAM):   *** Target Values;
1783666   +array RULE3_1DRF [2] $12 _temporary_ ('1' '0' );
MPRINT(EM_DIAGRAM):   array RULE3_1DRF [2] $12 _temporary_ ('1' '0' );
1783667   +label U__bin = 'Unnormalized Into: _bin' ;
MPRINT(EM_DIAGRAM):   label U__bin = 'Unnormalized Into: _bin' ;
1783668   +length U__bin $ 12;
MPRINT(EM_DIAGRAM):   length U__bin $ 12;
1783669   +*** Unnormalized target values;
MPRINT(EM_DIAGRAM):   *** Unnormalized target values;
1783670   +array RULE3_1DRU[2] $ 12 _temporary_ ('1           '  '0           ' );
MPRINT(EM_DIAGRAM):   array RULE3_1DRU[2] $ 12 _temporary_ ('1           ' '0           ' );
1783671   +
1783672   +drop _DM_BAD;
MPRINT(EM_DIAGRAM):   drop _DM_BAD;
1783673   +_DM_BAD=0;
MPRINT(EM_DIAGRAM):   _DM_BAD=0;
1783674   +
1783675   +*** Check Year_Birth for missing values ;
MPRINT(EM_DIAGRAM):   *** Check Year_Birth for missing values ;
1783676   +if missing( Year_Birth ) then do;
MPRINT(EM_DIAGRAM):   if missing( Year_Birth ) then do;
1783677   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783678   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783679   +end;
MPRINT(EM_DIAGRAM):   end;
1783680   +
1783681   +*** Generate dummy variables for GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_AcceptedCmp5 ;
1783682   +drop _1_0 ;
MPRINT(EM_DIAGRAM):   drop _1_0 ;
1783683   +if missing( GRP_AcceptedCmp5 ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_AcceptedCmp5 ) then do;
1783684   +   _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1783685   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783686   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783687   +end;
MPRINT(EM_DIAGRAM):   end;
1783688   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783689   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783690   +   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
1783691   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783692   +   if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '2' then do;
1783693   +      _1_0 = 1;
MPRINT(EM_DIAGRAM):   _1_0 = 1;
1783694   +   end;
MPRINT(EM_DIAGRAM):   end;
1783695   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1783696   +      _1_0 = -1;
MPRINT(EM_DIAGRAM):   _1_0 = -1;
1783697   +   end;
MPRINT(EM_DIAGRAM):   end;
1783698   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783699   +      _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1783700   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783701   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783702   +   end;
MPRINT(EM_DIAGRAM):   end;
1783703   +end;
MPRINT(EM_DIAGRAM):   end;
1783704   +
1783705   +*** Generate dummy variables for GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Frq ;
1783706   +drop _2_0 _2_1 _2_2 ;
MPRINT(EM_DIAGRAM):   drop _2_0 _2_1 _2_2 ;
1783707   +if missing( GRP_Frq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Frq ) then do;
1783708   +   _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1783709   +   _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1783710   +   _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1783711   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783712   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783713   +end;
MPRINT(EM_DIAGRAM):   end;
1783714   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783715   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783716   +   _dm12 = put( GRP_Frq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Frq , BEST12. );
1783717   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783718   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1783719   +      _2_0 = -1;
MPRINT(EM_DIAGRAM):   _2_0 = -1;
1783720   +      _2_1 = -1;
MPRINT(EM_DIAGRAM):   _2_1 = -1;
1783721   +      _2_2 = -1;
MPRINT(EM_DIAGRAM):   _2_2 = -1;
1783722   +   end;
MPRINT(EM_DIAGRAM):   end;
1783723   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1783724   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1783725   +      _2_1 = 1;
MPRINT(EM_DIAGRAM):   _2_1 = 1;
1783726   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1783727   +   end;
MPRINT(EM_DIAGRAM):   end;
1783728   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783729   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1783730   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1783731   +      _2_2 = 1;
MPRINT(EM_DIAGRAM):   _2_2 = 1;
1783732   +   end;
MPRINT(EM_DIAGRAM):   end;
1783733   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783734   +      _2_0 = 1;
MPRINT(EM_DIAGRAM):   _2_0 = 1;
1783735   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1783736   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1783737   +   end;
MPRINT(EM_DIAGRAM):   end;
1783738   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783739   +      _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1783740   +      _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1783741   +      _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1783742   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783743   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783744   +   end;
MPRINT(EM_DIAGRAM):   end;
1783745   +end;
MPRINT(EM_DIAGRAM):   end;
1783746   +
1783747   +*** Generate dummy variables for GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Income ;
1783748   +drop _3_0 _3_1 _3_2 ;
MPRINT(EM_DIAGRAM):   drop _3_0 _3_1 _3_2 ;
1783749   +if missing( GRP_Income ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Income ) then do;
1783750   +   _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1783751   +   _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1783752   +   _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1783753   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783754   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783755   +end;
MPRINT(EM_DIAGRAM):   end;
1783756   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783757   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783758   +   _dm12 = put( GRP_Income , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Income , BEST12. );
1783759   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783760   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1783761   +      _3_0 = -1;
MPRINT(EM_DIAGRAM):   _3_0 = -1;
1783762   +      _3_1 = -1;
MPRINT(EM_DIAGRAM):   _3_1 = -1;
1783763   +      _3_2 = -1;
MPRINT(EM_DIAGRAM):   _3_2 = -1;
1783764   +   end;
MPRINT(EM_DIAGRAM):   end;
1783765   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783766   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1783767   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1783768   +      _3_2 = 1;
MPRINT(EM_DIAGRAM):   _3_2 = 1;
1783769   +   end;
MPRINT(EM_DIAGRAM):   end;
1783770   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1783771   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1783772   +      _3_1 = 1;
MPRINT(EM_DIAGRAM):   _3_1 = 1;
1783773   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1783774   +   end;
MPRINT(EM_DIAGRAM):   end;
1783775   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783776   +      _3_0 = 1;
MPRINT(EM_DIAGRAM):   _3_0 = 1;
1783777   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1783778   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1783779   +   end;
MPRINT(EM_DIAGRAM):   end;
1783780   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783781   +      _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1783782   +      _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1783783   +      _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1783784   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783785   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783786   +   end;
MPRINT(EM_DIAGRAM):   end;
1783787   +end;
MPRINT(EM_DIAGRAM):   end;
1783788   +
1783789   +*** Generate dummy variables for GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Mnt ;
1783790   +drop _4_0 _4_1 _4_2 ;
MPRINT(EM_DIAGRAM):   drop _4_0 _4_1 _4_2 ;
1783791   +if missing( GRP_Mnt ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Mnt ) then do;
1783792   +   _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1783793   +   _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1783794   +   _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1783795   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783796   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783797   +end;
MPRINT(EM_DIAGRAM):   end;
1783798   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783799   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783800   +   _dm12 = put( GRP_Mnt , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Mnt , BEST12. );
1783801   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783802   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1783803   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1783804   +      _4_1 = 1;
MPRINT(EM_DIAGRAM):   _4_1 = 1;
1783805   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1783806   +   end;
MPRINT(EM_DIAGRAM):   end;
1783807   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1783808   +      _4_0 = -1;
MPRINT(EM_DIAGRAM):   _4_0 = -1;
1783809   +      _4_1 = -1;
MPRINT(EM_DIAGRAM):   _4_1 = -1;
1783810   +      _4_2 = -1;
MPRINT(EM_DIAGRAM):   _4_2 = -1;
1783811   +   end;
MPRINT(EM_DIAGRAM):   end;
1783812   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783813   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1783814   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1783815   +      _4_2 = 1;
MPRINT(EM_DIAGRAM):   _4_2 = 1;
1783816   +   end;
MPRINT(EM_DIAGRAM):   end;
1783817   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783818   +      _4_0 = 1;
MPRINT(EM_DIAGRAM):   _4_0 = 1;
1783819   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1783820   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1783821   +   end;
MPRINT(EM_DIAGRAM):   end;
1783822   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783823   +      _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1783824   +      _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1783825   +      _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1783826   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783827   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783828   +   end;
MPRINT(EM_DIAGRAM):   end;
1783829   +end;
MPRINT(EM_DIAGRAM):   end;
1783830   +
1783831   +*** Generate dummy variables for GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntFishProducts ;
1783832   +drop _5_0 _5_1 _5_2 ;
MPRINT(EM_DIAGRAM):   drop _5_0 _5_1 _5_2 ;
1783833   +if missing( GRP_MntFishProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntFishProducts ) then do;
1783834   +   _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1783835   +   _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1783836   +   _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1783837   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783838   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783839   +end;
MPRINT(EM_DIAGRAM):   end;
1783840   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783841   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783842   +   _dm12 = put( GRP_MntFishProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntFishProducts , BEST12. );
1783843   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783844   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1783845   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1783846   +      _5_1 = 1;
MPRINT(EM_DIAGRAM):   _5_1 = 1;
1783847   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1783848   +   end;
MPRINT(EM_DIAGRAM):   end;
1783849   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1783850   +      _5_0 = -1;
MPRINT(EM_DIAGRAM):   _5_0 = -1;
1783851   +      _5_1 = -1;
MPRINT(EM_DIAGRAM):   _5_1 = -1;
1783852   +      _5_2 = -1;
MPRINT(EM_DIAGRAM):   _5_2 = -1;
1783853   +   end;
MPRINT(EM_DIAGRAM):   end;
1783854   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783855   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1783856   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1783857   +      _5_2 = 1;
MPRINT(EM_DIAGRAM):   _5_2 = 1;
1783858   +   end;
MPRINT(EM_DIAGRAM):   end;
1783859   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783860   +      _5_0 = 1;
MPRINT(EM_DIAGRAM):   _5_0 = 1;
1783861   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1783862   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1783863   +   end;
MPRINT(EM_DIAGRAM):   end;
1783864   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783865   +      _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1783866   +      _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1783867   +      _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1783868   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783869   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783870   +   end;
MPRINT(EM_DIAGRAM):   end;
1783871   +end;
MPRINT(EM_DIAGRAM):   end;
1783872   +
1783873   +*** Generate dummy variables for GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntGoldProds ;
1783874   +drop _6_0 _6_1 _6_2 ;
MPRINT(EM_DIAGRAM):   drop _6_0 _6_1 _6_2 ;
1783875   +if missing( GRP_MntGoldProds ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntGoldProds ) then do;
1783876   +   _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1783877   +   _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1783878   +   _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1783879   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783880   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783881   +end;
MPRINT(EM_DIAGRAM):   end;
1783882   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783883   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783884   +   _dm12 = put( GRP_MntGoldProds , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntGoldProds , BEST12. );
1783885   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783886   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1783887   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1783888   +      _6_1 = 1;
MPRINT(EM_DIAGRAM):   _6_1 = 1;
1783889   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1783890   +   end;
MPRINT(EM_DIAGRAM):   end;
1783891   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783892   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1783893   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1783894   +      _6_2 = 1;
MPRINT(EM_DIAGRAM):   _6_2 = 1;
1783895   +   end;
MPRINT(EM_DIAGRAM):   end;
1783896   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1783897   +      _6_0 = -1;
MPRINT(EM_DIAGRAM):   _6_0 = -1;
1783898   +      _6_1 = -1;
MPRINT(EM_DIAGRAM):   _6_1 = -1;
1783899   +      _6_2 = -1;
MPRINT(EM_DIAGRAM):   _6_2 = -1;
1783900   +   end;
MPRINT(EM_DIAGRAM):   end;
1783901   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783902   +      _6_0 = 1;
MPRINT(EM_DIAGRAM):   _6_0 = 1;
1783903   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1783904   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1783905   +   end;
MPRINT(EM_DIAGRAM):   end;
1783906   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783907   +      _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1783908   +      _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1783909   +      _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1783910   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783911   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783912   +   end;
MPRINT(EM_DIAGRAM):   end;
1783913   +end;
MPRINT(EM_DIAGRAM):   end;
1783914   +
1783915   +*** Generate dummy variables for GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntMeatProducts ;
1783916   +drop _7_0 _7_1 _7_2 ;
MPRINT(EM_DIAGRAM):   drop _7_0 _7_1 _7_2 ;
1783917   +if missing( GRP_MntMeatProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntMeatProducts ) then do;
1783918   +   _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1783919   +   _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1783920   +   _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1783921   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783922   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783923   +end;
MPRINT(EM_DIAGRAM):   end;
1783924   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783925   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783926   +   _dm12 = put( GRP_MntMeatProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntMeatProducts , BEST12. );
1783927   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783928   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1783929   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1783930   +      _7_1 = 1;
MPRINT(EM_DIAGRAM):   _7_1 = 1;
1783931   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1783932   +   end;
MPRINT(EM_DIAGRAM):   end;
1783933   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783934   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1783935   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1783936   +      _7_2 = 1;
MPRINT(EM_DIAGRAM):   _7_2 = 1;
1783937   +   end;
MPRINT(EM_DIAGRAM):   end;
1783938   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1783939   +      _7_0 = -1;
MPRINT(EM_DIAGRAM):   _7_0 = -1;
1783940   +      _7_1 = -1;
MPRINT(EM_DIAGRAM):   _7_1 = -1;
1783941   +      _7_2 = -1;
MPRINT(EM_DIAGRAM):   _7_2 = -1;
1783942   +   end;
MPRINT(EM_DIAGRAM):   end;
1783943   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783944   +      _7_0 = 1;
MPRINT(EM_DIAGRAM):   _7_0 = 1;
1783945   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1783946   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1783947   +   end;
MPRINT(EM_DIAGRAM):   end;
1783948   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783949   +      _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1783950   +      _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1783951   +      _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1783952   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783953   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783954   +   end;
MPRINT(EM_DIAGRAM):   end;
1783955   +end;
MPRINT(EM_DIAGRAM):   end;
1783956   +
1783957   +*** Generate dummy variables for GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntWines ;
1783958   +drop _8_0 _8_1 _8_2 ;
MPRINT(EM_DIAGRAM):   drop _8_0 _8_1 _8_2 ;
1783959   +if missing( GRP_MntWines ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntWines ) then do;
1783960   +   _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1783961   +   _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1783962   +   _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1783963   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1783964   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783965   +end;
MPRINT(EM_DIAGRAM):   end;
1783966   +else do;
MPRINT(EM_DIAGRAM):   else do;
1783967   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1783968   +   _dm12 = put( GRP_MntWines , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntWines , BEST12. );
1783969   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1783970   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1783971   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1783972   +      _8_1 = 1;
MPRINT(EM_DIAGRAM):   _8_1 = 1;
1783973   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1783974   +   end;
MPRINT(EM_DIAGRAM):   end;
1783975   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1783976   +      _8_0 = -1;
MPRINT(EM_DIAGRAM):   _8_0 = -1;
1783977   +      _8_1 = -1;
MPRINT(EM_DIAGRAM):   _8_1 = -1;
1783978   +      _8_2 = -1;
MPRINT(EM_DIAGRAM):   _8_2 = -1;
1783979   +   end;
MPRINT(EM_DIAGRAM):   end;
1783980   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1783981   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1783982   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1783983   +      _8_2 = 1;
MPRINT(EM_DIAGRAM):   _8_2 = 1;
1783984   +   end;
MPRINT(EM_DIAGRAM):   end;
1783985   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1783986   +      _8_0 = 1;
MPRINT(EM_DIAGRAM):   _8_0 = 1;
1783987   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1783988   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1783989   +   end;
MPRINT(EM_DIAGRAM):   end;
1783990   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1783991   +      _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1783992   +      _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1783993   +      _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1783994   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1783995   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1783996   +   end;
MPRINT(EM_DIAGRAM):   end;
1783997   +end;
MPRINT(EM_DIAGRAM):   end;
1783998   +
1783999   +*** Generate dummy variables for GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumCatalogPurchases ;
1784000   +drop _9_0 _9_1 ;
MPRINT(EM_DIAGRAM):   drop _9_0 _9_1 ;
1784001   +if missing( GRP_NumCatalogPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumCatalogPurchases ) then do;
1784002   +   _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1784003   +   _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1784004   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784005   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784006   +end;
MPRINT(EM_DIAGRAM):   end;
1784007   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784008   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784009   +   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
1784010   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784011   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1784012   +      _9_0 = 1;
MPRINT(EM_DIAGRAM):   _9_0 = 1;
1784013   +      _9_1 = 0;
MPRINT(EM_DIAGRAM):   _9_1 = 0;
1784014   +   end;
MPRINT(EM_DIAGRAM):   end;
1784015   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1784016   +      _9_0 = -1;
MPRINT(EM_DIAGRAM):   _9_0 = -1;
1784017   +      _9_1 = -1;
MPRINT(EM_DIAGRAM):   _9_1 = -1;
1784018   +   end;
MPRINT(EM_DIAGRAM):   end;
1784019   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784020   +      _9_0 = 0;
MPRINT(EM_DIAGRAM):   _9_0 = 0;
1784021   +      _9_1 = 1;
MPRINT(EM_DIAGRAM):   _9_1 = 1;
1784022   +   end;
MPRINT(EM_DIAGRAM):   end;
1784023   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784024   +      _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1784025   +      _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1784026   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784027   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784028   +   end;
MPRINT(EM_DIAGRAM):   end;
1784029   +end;
MPRINT(EM_DIAGRAM):   end;
1784030   +
1784031   +*** Generate dummy variables for GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumDistPurchases ;
1784032   +drop _10_0 _10_1 _10_2 ;
MPRINT(EM_DIAGRAM):   drop _10_0 _10_1 _10_2 ;
1784033   +if missing( GRP_NumDistPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumDistPurchases ) then do;
1784034   +   _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1784035   +   _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1784036   +   _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1784037   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784038   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784039   +end;
MPRINT(EM_DIAGRAM):   end;
1784040   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784041   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784042   +   _dm12 = put( GRP_NumDistPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumDistPurchases , BEST12. );
1784043   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784044   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784045   +      _10_0 = -1;
MPRINT(EM_DIAGRAM):   _10_0 = -1;
1784046   +      _10_1 = -1;
MPRINT(EM_DIAGRAM):   _10_1 = -1;
1784047   +      _10_2 = -1;
MPRINT(EM_DIAGRAM):   _10_2 = -1;
1784048   +   end;
MPRINT(EM_DIAGRAM):   end;
1784049   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784050   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1784051   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1784052   +      _10_2 = 1;
MPRINT(EM_DIAGRAM):   _10_2 = 1;
1784053   +   end;
MPRINT(EM_DIAGRAM):   end;
1784054   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784055   +      _10_0 = 1;
MPRINT(EM_DIAGRAM):   _10_0 = 1;
1784056   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1784057   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1784058   +   end;
MPRINT(EM_DIAGRAM):   end;
1784059   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784060   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1784061   +      _10_1 = 1;
MPRINT(EM_DIAGRAM):   _10_1 = 1;
1784062   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1784063   +   end;
MPRINT(EM_DIAGRAM):   end;
1784064   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784065   +      _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1784066   +      _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1784067   +      _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1784068   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784069   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784070   +   end;
MPRINT(EM_DIAGRAM):   end;
1784071   +end;
MPRINT(EM_DIAGRAM):   end;
1784072   +
1784073   +*** Generate dummy variables for GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumWebPurchases ;
1784074   +drop _11_0 _11_1 _11_2 ;
MPRINT(EM_DIAGRAM):   drop _11_0 _11_1 _11_2 ;
1784075   +if missing( GRP_NumWebPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumWebPurchases ) then do;
1784076   +   _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1784077   +   _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1784078   +   _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1784079   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784080   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784081   +end;
MPRINT(EM_DIAGRAM):   end;
1784082   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784083   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784084   +   _dm12 = put( GRP_NumWebPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumWebPurchases , BEST12. );
1784085   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784086   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1784087   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1784088   +      _11_1 = 1;
MPRINT(EM_DIAGRAM):   _11_1 = 1;
1784089   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1784090   +   end;
MPRINT(EM_DIAGRAM):   end;
1784091   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1784092   +      _11_0 = -1;
MPRINT(EM_DIAGRAM):   _11_0 = -1;
1784093   +      _11_1 = -1;
MPRINT(EM_DIAGRAM):   _11_1 = -1;
1784094   +      _11_2 = -1;
MPRINT(EM_DIAGRAM):   _11_2 = -1;
1784095   +   end;
MPRINT(EM_DIAGRAM):   end;
1784096   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784097   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1784098   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1784099   +      _11_2 = 1;
MPRINT(EM_DIAGRAM):   _11_2 = 1;
1784100   +   end;
MPRINT(EM_DIAGRAM):   end;
1784101   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784102   +      _11_0 = 1;
MPRINT(EM_DIAGRAM):   _11_0 = 1;
1784103   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1784104   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1784105   +   end;
MPRINT(EM_DIAGRAM):   end;
1784106   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784107   +      _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1784108   +      _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1784109   +      _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1784110   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784111   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784112   +   end;
MPRINT(EM_DIAGRAM):   end;
1784113   +end;
MPRINT(EM_DIAGRAM):   end;
1784114   +
1784115   +*** Generate dummy variables for GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RFMstat ;
1784116   +drop _12_0 _12_1 _12_2 ;
MPRINT(EM_DIAGRAM):   drop _12_0 _12_1 _12_2 ;
1784117   +if missing( GRP_RFMstat ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RFMstat ) then do;
1784118   +   _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1784119   +   _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1784120   +   _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1784121   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784122   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784123   +end;
MPRINT(EM_DIAGRAM):   end;
1784124   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784125   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784126   +   _dm12 = put( GRP_RFMstat , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RFMstat , BEST12. );
1784127   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784128   +   if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '4' then do;
1784129   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1784130   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1784131   +      _12_2 = 1;
MPRINT(EM_DIAGRAM):   _12_2 = 1;
1784132   +   end;
MPRINT(EM_DIAGRAM):   end;
1784133   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784134   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1784135   +      _12_1 = 1;
MPRINT(EM_DIAGRAM):   _12_1 = 1;
1784136   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1784137   +   end;
MPRINT(EM_DIAGRAM):   end;
1784138   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1784139   +      _12_0 = -1;
MPRINT(EM_DIAGRAM):   _12_0 = -1;
1784140   +      _12_1 = -1;
MPRINT(EM_DIAGRAM):   _12_1 = -1;
1784141   +      _12_2 = -1;
MPRINT(EM_DIAGRAM):   _12_2 = -1;
1784142   +   end;
MPRINT(EM_DIAGRAM):   end;
1784143   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784144   +      _12_0 = 1;
MPRINT(EM_DIAGRAM):   _12_0 = 1;
1784145   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1784146   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1784147   +   end;
MPRINT(EM_DIAGRAM):   end;
1784148   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784149   +      _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1784150   +      _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1784151   +      _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1784152   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784153   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784154   +   end;
MPRINT(EM_DIAGRAM):   end;
1784155   +end;
MPRINT(EM_DIAGRAM):   end;
1784156   +
1784157   +*** Generate dummy variables for GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RMntFrq ;
1784158   +drop _13_0 _13_1 _13_2 ;
MPRINT(EM_DIAGRAM):   drop _13_0 _13_1 _13_2 ;
1784159   +if missing( GRP_RMntFrq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RMntFrq ) then do;
1784160   +   _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1784161   +   _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1784162   +   _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1784163   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784164   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784165   +end;
MPRINT(EM_DIAGRAM):   end;
1784166   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784167   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784168   +   _dm12 = put( GRP_RMntFrq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RMntFrq , BEST12. );
1784169   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784170   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1784171   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1784172   +      _13_1 = 1;
MPRINT(EM_DIAGRAM):   _13_1 = 1;
1784173   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1784174   +   end;
MPRINT(EM_DIAGRAM):   end;
1784175   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1784176   +      _13_0 = -1;
MPRINT(EM_DIAGRAM):   _13_0 = -1;
1784177   +      _13_1 = -1;
MPRINT(EM_DIAGRAM):   _13_1 = -1;
1784178   +      _13_2 = -1;
MPRINT(EM_DIAGRAM):   _13_2 = -1;
1784179   +   end;
MPRINT(EM_DIAGRAM):   end;
1784180   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784181   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1784182   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1784183   +      _13_2 = 1;
MPRINT(EM_DIAGRAM):   _13_2 = 1;
1784184   +   end;
MPRINT(EM_DIAGRAM):   end;
1784185   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784186   +      _13_0 = 1;
MPRINT(EM_DIAGRAM):   _13_0 = 1;
1784187   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1784188   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1784189   +   end;
MPRINT(EM_DIAGRAM):   end;
1784190   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784191   +      _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1784192   +      _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1784193   +      _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1784194   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784195   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784196   +   end;
MPRINT(EM_DIAGRAM):   end;
1784197   +end;
MPRINT(EM_DIAGRAM):   end;
1784198   +
1784199   +*** Generate dummy variables for GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Recency ;
1784200   +drop _14_0 _14_1 _14_2 ;
MPRINT(EM_DIAGRAM):   drop _14_0 _14_1 _14_2 ;
1784201   +if missing( GRP_Recency ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Recency ) then do;
1784202   +   _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1784203   +   _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1784204   +   _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1784205   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784206   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784207   +end;
MPRINT(EM_DIAGRAM):   end;
1784208   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784209   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784210   +   _dm12 = put( GRP_Recency , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Recency , BEST12. );
1784211   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784212   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784213   +      _14_0 = -1;
MPRINT(EM_DIAGRAM):   _14_0 = -1;
1784214   +      _14_1 = -1;
MPRINT(EM_DIAGRAM):   _14_1 = -1;
1784215   +      _14_2 = -1;
MPRINT(EM_DIAGRAM):   _14_2 = -1;
1784216   +   end;
MPRINT(EM_DIAGRAM):   end;
1784217   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784218   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1784219   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1784220   +      _14_2 = 1;
MPRINT(EM_DIAGRAM):   _14_2 = 1;
1784221   +   end;
MPRINT(EM_DIAGRAM):   end;
1784222   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784223   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1784224   +      _14_1 = 1;
MPRINT(EM_DIAGRAM):   _14_1 = 1;
1784225   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1784226   +   end;
MPRINT(EM_DIAGRAM):   end;
1784227   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784228   +      _14_0 = 1;
MPRINT(EM_DIAGRAM):   _14_0 = 1;
1784229   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1784230   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1784231   +   end;
MPRINT(EM_DIAGRAM):   end;
1784232   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784233   +      _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1784234   +      _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1784235   +      _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1784236   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784237   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784238   +   end;
MPRINT(EM_DIAGRAM):   end;
1784239   +end;
MPRINT(EM_DIAGRAM):   end;
1784240   +
1784241   +*** If missing inputs, use averages;
MPRINT(EM_DIAGRAM):   *** If missing inputs, use averages;
1784242   +if _DM_BAD > 0 then do;
MPRINT(EM_DIAGRAM):   if _DM_BAD > 0 then do;
1784243   +   _P0 = 0.848778433;
MPRINT(EM_DIAGRAM):   _P0 = 0.848778433;
1784244   +   _P1 = 0.151221567;
MPRINT(EM_DIAGRAM):   _P1 = 0.151221567;
1784245   +   goto RULE3_1DR1;
MPRINT(EM_DIAGRAM):   goto RULE3_1DR1;
1784246   +end;
MPRINT(EM_DIAGRAM):   end;
1784247   +
1784248   +*** Compute Linear Predictor;
MPRINT(EM_DIAGRAM):   *** Compute Linear Predictor;
1784249   +drop _TEMP;
MPRINT(EM_DIAGRAM):   drop _TEMP;
1784250   +drop _LP0;
MPRINT(EM_DIAGRAM):   drop _LP0;
1784251   +_LP0 = 0;
MPRINT(EM_DIAGRAM):   _LP0 = 0;
1784252   +
1784253   +***  Effect: GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_AcceptedCmp5 ;
1784254   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784255   +_LP0 = _LP0 + (    0.99733656758775) * _TEMP * _1_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.99733656758775) * _TEMP * _1_0;
1784256   +
1784257   +***  Effect: GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Frq ;
1784258   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784259   +_LP0 = _LP0 + (   -2.23368933318007) * _TEMP * _2_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -2.23368933318007) * _TEMP * _2_0;
1784260   +_LP0 = _LP0 + (   -0.25095248894121) * _TEMP * _2_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.25095248894121) * _TEMP * _2_1;
1784261   +_LP0 = _LP0 + (     0.8387769347269) * _TEMP * _2_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.8387769347269) * _TEMP * _2_2;
1784262   +
1784263   +***  Effect: GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Income ;
1784264   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784265   +_LP0 = _LP0 + (   -0.99078035521361) * _TEMP * _3_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.99078035521361) * _TEMP * _3_0;
1784266   +_LP0 = _LP0 + (   -0.88661982524205) * _TEMP * _3_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.88661982524205) * _TEMP * _3_1;
1784267   +_LP0 = _LP0 + (    0.95470778586134) * _TEMP * _3_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.95470778586134) * _TEMP * _3_2;
1784268   +
1784269   +***  Effect: GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Mnt ;
1784270   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784271   +_LP0 = _LP0 + (    0.56285493845236) * _TEMP * _4_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.56285493845236) * _TEMP * _4_0;
1784272   +_LP0 = _LP0 + (    0.33650487164657) * _TEMP * _4_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.33650487164657) * _TEMP * _4_1;
1784273   +_LP0 = _LP0 + (   -0.26285568117112) * _TEMP * _4_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.26285568117112) * _TEMP * _4_2;
1784274   +
1784275   +***  Effect: GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntFishProducts ;
1784276   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784277   +_LP0 = _LP0 + (     -0.721500716476) * _TEMP * _5_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.721500716476) * _TEMP * _5_0;
1784278   +_LP0 = _LP0 + (   -0.08163727747607) * _TEMP * _5_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.08163727747607) * _TEMP * _5_1;
1784279   +_LP0 = _LP0 + (    0.08970108712955) * _TEMP * _5_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.08970108712955) * _TEMP * _5_2;
1784280   +
1784281   +***  Effect: GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntGoldProds ;
1784282   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784283   +_LP0 = _LP0 + (    0.23750271092964) * _TEMP * _6_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.23750271092964) * _TEMP * _6_0;
1784284   +_LP0 = _LP0 + (    0.04814501514157) * _TEMP * _6_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.04814501514157) * _TEMP * _6_1;
1784285   +_LP0 = _LP0 + (    0.00356893973566) * _TEMP * _6_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.00356893973566) * _TEMP * _6_2;
1784286   +
1784287   +***  Effect: GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntMeatProducts ;
1784288   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784289   +_LP0 = _LP0 + (    1.37278090702821) * _TEMP * _7_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.37278090702821) * _TEMP * _7_0;
1784290   +_LP0 = _LP0 + (    0.22207512218681) * _TEMP * _7_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.22207512218681) * _TEMP * _7_1;
1784291   +_LP0 = _LP0 + (   -0.53385403881984) * _TEMP * _7_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.53385403881984) * _TEMP * _7_2;
1784292   +
1784293   +***  Effect: GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntWines ;
1784294   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784295   +_LP0 = _LP0 + (   -1.11716202001212) * _TEMP * _8_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.11716202001212) * _TEMP * _8_0;
1784296   +_LP0 = _LP0 + (   -0.51167594500869) * _TEMP * _8_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.51167594500869) * _TEMP * _8_1;
1784297   +_LP0 = _LP0 + (    0.64784283470689) * _TEMP * _8_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.64784283470689) * _TEMP * _8_2;
1784298   +
1784299   +***  Effect: GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumCatalogPurchases ;
1784300   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784301   +_LP0 = _LP0 + (    1.01474391679706) * _TEMP * _9_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.01474391679706) * _TEMP * _9_0;
1784302   +_LP0 = _LP0 + (   -0.03038001206526) * _TEMP * _9_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.03038001206526) * _TEMP * _9_1;
1784303   +
1784304   +***  Effect: GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumDistPurchases ;
1784305   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784306   +_LP0 = _LP0 + (    2.66475250943038) * _TEMP * _10_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 2.66475250943038) * _TEMP * _10_0;
1784307   +_LP0 = _LP0 + (    0.04624841851569) * _TEMP * _10_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.04624841851569) * _TEMP * _10_1;
1784308   +_LP0 = _LP0 + (   -0.53479007375242) * _TEMP * _10_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.53479007375242) * _TEMP * _10_2;
1784309   +
1784310   +***  Effect: GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumWebPurchases ;
1784311   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784312   +_LP0 = _LP0 + (   -0.13829564901609) * _TEMP * _11_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.13829564901609) * _TEMP * _11_0;
1784313   +_LP0 = _LP0 + (   -0.12263501103992) * _TEMP * _11_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.12263501103992) * _TEMP * _11_1;
1784314   +_LP0 = _LP0 + (    0.02226799691206) * _TEMP * _11_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.02226799691206) * _TEMP * _11_2;
1784315   +
1784316   +***  Effect: GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RFMstat ;
1784317   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784318   +_LP0 = _LP0 + (    0.75053078016285) * _TEMP * _12_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.75053078016285) * _TEMP * _12_0;
1784319   +_LP0 = _LP0 + (    0.13674904177699) * _TEMP * _12_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.13674904177699) * _TEMP * _12_1;
1784320   +_LP0 = _LP0 + (   -0.28040137971405) * _TEMP * _12_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.28040137971405) * _TEMP * _12_2;
1784321   +
1784322   +***  Effect: GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RMntFrq ;
1784323   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784324   +_LP0 = _LP0 + (   -0.36702439031685) * _TEMP * _13_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.36702439031685) * _TEMP * _13_0;
1784325   +_LP0 = _LP0 + (   -0.24550330955003) * _TEMP * _13_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.24550330955003) * _TEMP * _13_1;
1784326   +_LP0 = _LP0 + (    0.69153126983534) * _TEMP * _13_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.69153126983534) * _TEMP * _13_2;
1784327   +
1784328   +***  Effect: GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Recency ;
1784329   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784330   +_LP0 = _LP0 + (    -1.7633808694344) * _TEMP * _14_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.7633808694344) * _TEMP * _14_0;
1784331   +_LP0 = _LP0 + (   -0.48174022563147) * _TEMP * _14_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.48174022563147) * _TEMP * _14_1;
1784332   +_LP0 = _LP0 + (    0.55544312461752) * _TEMP * _14_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.55544312461752) * _TEMP * _14_2;
1784333   +
1784334   +***  Effect: Year_Birth ;
MPRINT(EM_DIAGRAM):   *** Effect: Year_Birth ;
1784335   +_TEMP = Year_Birth ;
MPRINT(EM_DIAGRAM):   _TEMP = Year_Birth ;
1784336   +_LP0 = _LP0 + (   -0.01709272489091 * _TEMP);
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.01709272489091 * _TEMP);
1784337   +
1784338   +*** Naive Posterior Probabilities;
MPRINT(EM_DIAGRAM):   *** Naive Posterior Probabilities;
1784339   +drop _MAXP _IY _P0 _P1;
MPRINT(EM_DIAGRAM):   drop _MAXP _IY _P0 _P1;
1784340   +_TEMP =      35.509534550978 + _LP0;
MPRINT(EM_DIAGRAM):   _TEMP = 35.509534550978 + _LP0;
1784341   +if (_TEMP < 0) then do;
MPRINT(EM_DIAGRAM):   if (_TEMP < 0) then do;
1784342   +   _TEMP = exp(_TEMP);
MPRINT(EM_DIAGRAM):   _TEMP = exp(_TEMP);
1784343   +   _P0 = _TEMP / (1 + _TEMP);
MPRINT(EM_DIAGRAM):   _P0 = _TEMP / (1 + _TEMP);
1784344   +end;
MPRINT(EM_DIAGRAM):   end;
1784345   +else _P0 = 1 / (1 + exp(-_TEMP));
MPRINT(EM_DIAGRAM):   else _P0 = 1 / (1 + exp(-_TEMP));
1784346   +_P1 = 1.0 - _P0;
MPRINT(EM_DIAGRAM):   _P1 = 1.0 - _P0;
1784347   +
1784348   +RULE3_1DR1:
1784349   +
1784350   +
1784351   +*** Posterior Probabilities and Predicted Level;
MPRINT(EM_DIAGRAM):   RULE3_1DR1: *** Posterior Probabilities and Predicted Level;
1784352   +label P__bin1 = 'Predicted: _bin=1' ;
MPRINT(EM_DIAGRAM):   label P__bin1 = 'Predicted: _bin=1' ;
1784353   +label P__bin0 = 'Predicted: _bin=0' ;
MPRINT(EM_DIAGRAM):   label P__bin0 = 'Predicted: _bin=0' ;
1784354   +P__bin1 = _P0;
MPRINT(EM_DIAGRAM):   P__bin1 = _P0;
1784355   +_MAXP = _P0;
MPRINT(EM_DIAGRAM):   _MAXP = _P0;
1784356   +_IY = 1;
MPRINT(EM_DIAGRAM):   _IY = 1;
1784357   +P__bin0 = _P1;
MPRINT(EM_DIAGRAM):   P__bin0 = _P1;
1784358   +if (_P1 >  _MAXP + 1E-8) then do;
MPRINT(EM_DIAGRAM):   if (_P1 > _MAXP + 1E-8) then do;
1784359   +   _MAXP = _P1;
MPRINT(EM_DIAGRAM):   _MAXP = _P1;
1784360   +   _IY = 2;
MPRINT(EM_DIAGRAM):   _IY = 2;
1784361   +end;
MPRINT(EM_DIAGRAM):   end;
1784362   +I__bin = RULE3_1DRF[_IY];
MPRINT(EM_DIAGRAM):   I__bin = RULE3_1DRF[_IY];
1784363   +U__bin = RULE3_1DRU[_IY];
MPRINT(EM_DIAGRAM):   U__bin = RULE3_1DRU[_IY];
1784364   +
1784365   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1784366   +***** end scoring code for regression;
MPRINT(EM_DIAGRAM):   ***** end scoring code for regression;
1784367   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1784368   +*;
MPRINT(EM_DIAGRAM):   *;
1784369   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1784370   +if I__bin eq '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin eq '1' then do;
1784371   +I_DepVar = ("0");
MPRINT(EM_DIAGRAM):   I_DepVar = ("0");
1784372   +%DMNORMCP(I_DepVar, I_DepVar);
MPRINT(DMNORMCP):   I_DepVar=dmnorm(I_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1784373   +P_DepVar0=P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar0=P__bin1;
1784374   +P_DepVar1 = 1-P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar1 = 1-P__bin1;
1784375   +end;
MPRINT(EM_DIAGRAM):   end;
1784376   +*;
MPRINT(EM_DIAGRAM):   *;
1784377   +*;
MPRINT(EM_DIAGRAM):   *;
1784378   +* END Binary Model for DepVar = 0;
MPRINT(EM_DIAGRAM):   * END Binary Model for DepVar = 0;
1784379   +;
MPRINT(EM_DIAGRAM):   ;
1784380   +*;
MPRINT(EM_DIAGRAM):   *;
1784381   +DROP P__bin1 P__bin0;
MPRINT(EM_DIAGRAM):   DROP P__bin1 P__bin0;
1784382   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1784383   +*Binary model for DepVar = 1;
MPRINT(EM_DIAGRAM):   *Binary model for DepVar = 1;
1784384   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1784385   +*;
MPRINT(EM_DIAGRAM):   *;
1784386   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1784387   +if I__bin ne '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin ne '1' then do;
1784388   +*;
MPRINT(EM_DIAGRAM):   *;
1784389   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1784390   +*** begin scoring code for regression;
MPRINT(EM_DIAGRAM):   *** begin scoring code for regression;
1784391   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1784392   +
1784393   +length _WARN_ $4;
MPRINT(EM_DIAGRAM):   length _WARN_ $4;
1784394   +label _WARN_ = 'Warnings' ;
MPRINT(EM_DIAGRAM):   label _WARN_ = 'Warnings' ;
1784395   +
1784396   +length I__bin $ 12;
MPRINT(EM_DIAGRAM):   length I__bin $ 12;
1784397   +label I__bin = 'Into: _bin' ;
MPRINT(EM_DIAGRAM):   label I__bin = 'Into: _bin' ;
1784398   +*** Target Values;
MPRINT(EM_DIAGRAM):   *** Target Values;
1784399   +array RULE3_2DRF [2] $12 _temporary_ ('1' '0' );
MPRINT(EM_DIAGRAM):   array RULE3_2DRF [2] $12 _temporary_ ('1' '0' );
1784400   +label U__bin = 'Unnormalized Into: _bin' ;
MPRINT(EM_DIAGRAM):   label U__bin = 'Unnormalized Into: _bin' ;
1784401   +length U__bin $ 12;
MPRINT(EM_DIAGRAM):   length U__bin $ 12;
1784402   +*** Unnormalized target values;
MPRINT(EM_DIAGRAM):   *** Unnormalized target values;
1784403   +array RULE3_2DRU[2] $ 12 _temporary_ ('1           '  '0           ' );
MPRINT(EM_DIAGRAM):   array RULE3_2DRU[2] $ 12 _temporary_ ('1           ' '0           ' );
1784404   +
1784405   +drop _DM_BAD;
MPRINT(EM_DIAGRAM):   drop _DM_BAD;
1784406   +_DM_BAD=0;
MPRINT(EM_DIAGRAM):   _DM_BAD=0;
1784407   +
1784408   +*** Check Year_Birth for missing values ;
MPRINT(EM_DIAGRAM):   *** Check Year_Birth for missing values ;
1784409   +if missing( Year_Birth ) then do;
MPRINT(EM_DIAGRAM):   if missing( Year_Birth ) then do;
1784410   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784411   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784412   +end;
MPRINT(EM_DIAGRAM):   end;
1784413   +
1784414   +*** Generate dummy variables for GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_AcceptedCmp5 ;
1784415   +drop _1_0 ;
MPRINT(EM_DIAGRAM):   drop _1_0 ;
1784416   +if missing( GRP_AcceptedCmp5 ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_AcceptedCmp5 ) then do;
1784417   +   _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1784418   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784419   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784420   +end;
MPRINT(EM_DIAGRAM):   end;
1784421   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784422   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784423   +   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
1784424   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784425   +   if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '2' then do;
1784426   +      _1_0 = 1;
MPRINT(EM_DIAGRAM):   _1_0 = 1;
1784427   +   end;
MPRINT(EM_DIAGRAM):   end;
1784428   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784429   +      _1_0 = -1;
MPRINT(EM_DIAGRAM):   _1_0 = -1;
1784430   +   end;
MPRINT(EM_DIAGRAM):   end;
1784431   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784432   +      _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1784433   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784434   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784435   +   end;
MPRINT(EM_DIAGRAM):   end;
1784436   +end;
MPRINT(EM_DIAGRAM):   end;
1784437   +
1784438   +*** Generate dummy variables for GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Frq ;
1784439   +drop _2_0 _2_1 _2_2 ;
MPRINT(EM_DIAGRAM):   drop _2_0 _2_1 _2_2 ;
1784440   +if missing( GRP_Frq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Frq ) then do;
1784441   +   _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1784442   +   _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1784443   +   _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1784444   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784445   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784446   +end;
MPRINT(EM_DIAGRAM):   end;
1784447   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784448   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784449   +   _dm12 = put( GRP_Frq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Frq , BEST12. );
1784450   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784451   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784452   +      _2_0 = -1;
MPRINT(EM_DIAGRAM):   _2_0 = -1;
1784453   +      _2_1 = -1;
MPRINT(EM_DIAGRAM):   _2_1 = -1;
1784454   +      _2_2 = -1;
MPRINT(EM_DIAGRAM):   _2_2 = -1;
1784455   +   end;
MPRINT(EM_DIAGRAM):   end;
1784456   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784457   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1784458   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1784459   +      _2_2 = 1;
MPRINT(EM_DIAGRAM):   _2_2 = 1;
1784460   +   end;
MPRINT(EM_DIAGRAM):   end;
1784461   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784462   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1784463   +      _2_1 = 1;
MPRINT(EM_DIAGRAM):   _2_1 = 1;
1784464   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1784465   +   end;
MPRINT(EM_DIAGRAM):   end;
1784466   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784467   +      _2_0 = 1;
MPRINT(EM_DIAGRAM):   _2_0 = 1;
1784468   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1784469   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1784470   +   end;
MPRINT(EM_DIAGRAM):   end;
1784471   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784472   +      _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1784473   +      _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1784474   +      _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1784475   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784476   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784477   +   end;
MPRINT(EM_DIAGRAM):   end;
1784478   +end;
MPRINT(EM_DIAGRAM):   end;
1784479   +
1784480   +*** Generate dummy variables for GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Income ;
1784481   +drop _3_0 _3_1 _3_2 ;
MPRINT(EM_DIAGRAM):   drop _3_0 _3_1 _3_2 ;
1784482   +if missing( GRP_Income ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Income ) then do;
1784483   +   _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1784484   +   _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1784485   +   _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1784486   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784487   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784488   +end;
MPRINT(EM_DIAGRAM):   end;
1784489   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784490   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784491   +   _dm12 = put( GRP_Income , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Income , BEST12. );
1784492   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784493   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784494   +      _3_0 = -1;
MPRINT(EM_DIAGRAM):   _3_0 = -1;
1784495   +      _3_1 = -1;
MPRINT(EM_DIAGRAM):   _3_1 = -1;
1784496   +      _3_2 = -1;
MPRINT(EM_DIAGRAM):   _3_2 = -1;
1784497   +   end;
MPRINT(EM_DIAGRAM):   end;
1784498   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784499   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1784500   +      _3_1 = 1;
MPRINT(EM_DIAGRAM):   _3_1 = 1;
1784501   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1784502   +   end;
MPRINT(EM_DIAGRAM):   end;
1784503   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784504   +      _3_0 = 1;
MPRINT(EM_DIAGRAM):   _3_0 = 1;
1784505   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1784506   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1784507   +   end;
MPRINT(EM_DIAGRAM):   end;
1784508   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784509   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1784510   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1784511   +      _3_2 = 1;
MPRINT(EM_DIAGRAM):   _3_2 = 1;
1784512   +   end;
MPRINT(EM_DIAGRAM):   end;
1784513   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784514   +      _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1784515   +      _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1784516   +      _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1784517   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784518   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784519   +   end;
MPRINT(EM_DIAGRAM):   end;
1784520   +end;
MPRINT(EM_DIAGRAM):   end;
1784521   +
1784522   +*** Generate dummy variables for GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Mnt ;
1784523   +drop _4_0 _4_1 _4_2 ;
MPRINT(EM_DIAGRAM):   drop _4_0 _4_1 _4_2 ;
1784524   +if missing( GRP_Mnt ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Mnt ) then do;
1784525   +   _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1784526   +   _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1784527   +   _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1784528   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784529   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784530   +end;
MPRINT(EM_DIAGRAM):   end;
1784531   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784532   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784533   +   _dm12 = put( GRP_Mnt , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Mnt , BEST12. );
1784534   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784535   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784536   +      _4_0 = -1;
MPRINT(EM_DIAGRAM):   _4_0 = -1;
1784537   +      _4_1 = -1;
MPRINT(EM_DIAGRAM):   _4_1 = -1;
1784538   +      _4_2 = -1;
MPRINT(EM_DIAGRAM):   _4_2 = -1;
1784539   +   end;
MPRINT(EM_DIAGRAM):   end;
1784540   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784541   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1784542   +      _4_1 = 1;
MPRINT(EM_DIAGRAM):   _4_1 = 1;
1784543   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1784544   +   end;
MPRINT(EM_DIAGRAM):   end;
1784545   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784546   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1784547   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1784548   +      _4_2 = 1;
MPRINT(EM_DIAGRAM):   _4_2 = 1;
1784549   +   end;
MPRINT(EM_DIAGRAM):   end;
1784550   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784551   +      _4_0 = 1;
MPRINT(EM_DIAGRAM):   _4_0 = 1;
1784552   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1784553   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1784554   +   end;
MPRINT(EM_DIAGRAM):   end;
1784555   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784556   +      _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1784557   +      _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1784558   +      _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1784559   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784560   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784561   +   end;
MPRINT(EM_DIAGRAM):   end;
1784562   +end;
MPRINT(EM_DIAGRAM):   end;
1784563   +
1784564   +*** Generate dummy variables for GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntFishProducts ;
1784565   +drop _5_0 _5_1 _5_2 ;
MPRINT(EM_DIAGRAM):   drop _5_0 _5_1 _5_2 ;
1784566   +if missing( GRP_MntFishProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntFishProducts ) then do;
1784567   +   _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1784568   +   _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1784569   +   _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1784570   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784571   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784572   +end;
MPRINT(EM_DIAGRAM):   end;
1784573   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784574   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784575   +   _dm12 = put( GRP_MntFishProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntFishProducts , BEST12. );
1784576   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784577   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784578   +      _5_0 = -1;
MPRINT(EM_DIAGRAM):   _5_0 = -1;
1784579   +      _5_1 = -1;
MPRINT(EM_DIAGRAM):   _5_1 = -1;
1784580   +      _5_2 = -1;
MPRINT(EM_DIAGRAM):   _5_2 = -1;
1784581   +   end;
MPRINT(EM_DIAGRAM):   end;
1784582   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784583   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1784584   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1784585   +      _5_2 = 1;
MPRINT(EM_DIAGRAM):   _5_2 = 1;
1784586   +   end;
MPRINT(EM_DIAGRAM):   end;
1784587   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784588   +      _5_0 = 1;
MPRINT(EM_DIAGRAM):   _5_0 = 1;
1784589   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1784590   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1784591   +   end;
MPRINT(EM_DIAGRAM):   end;
1784592   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784593   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1784594   +      _5_1 = 1;
MPRINT(EM_DIAGRAM):   _5_1 = 1;
1784595   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1784596   +   end;
MPRINT(EM_DIAGRAM):   end;
1784597   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784598   +      _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1784599   +      _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1784600   +      _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1784601   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784602   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784603   +   end;
MPRINT(EM_DIAGRAM):   end;
1784604   +end;
MPRINT(EM_DIAGRAM):   end;
1784605   +
1784606   +*** Generate dummy variables for GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntGoldProds ;
1784607   +drop _6_0 _6_1 _6_2 ;
MPRINT(EM_DIAGRAM):   drop _6_0 _6_1 _6_2 ;
1784608   +if missing( GRP_MntGoldProds ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntGoldProds ) then do;
1784609   +   _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1784610   +   _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1784611   +   _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1784612   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784613   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784614   +end;
MPRINT(EM_DIAGRAM):   end;
1784615   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784616   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784617   +   _dm12 = put( GRP_MntGoldProds , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntGoldProds , BEST12. );
1784618   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784619   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784620   +      _6_0 = -1;
MPRINT(EM_DIAGRAM):   _6_0 = -1;
1784621   +      _6_1 = -1;
MPRINT(EM_DIAGRAM):   _6_1 = -1;
1784622   +      _6_2 = -1;
MPRINT(EM_DIAGRAM):   _6_2 = -1;
1784623   +   end;
MPRINT(EM_DIAGRAM):   end;
1784624   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784625   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1784626   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1784627   +      _6_2 = 1;
MPRINT(EM_DIAGRAM):   _6_2 = 1;
1784628   +   end;
MPRINT(EM_DIAGRAM):   end;
1784629   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784630   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1784631   +      _6_1 = 1;
MPRINT(EM_DIAGRAM):   _6_1 = 1;
1784632   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1784633   +   end;
MPRINT(EM_DIAGRAM):   end;
1784634   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784635   +      _6_0 = 1;
MPRINT(EM_DIAGRAM):   _6_0 = 1;
1784636   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1784637   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1784638   +   end;
MPRINT(EM_DIAGRAM):   end;
1784639   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784640   +      _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1784641   +      _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1784642   +      _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1784643   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784644   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784645   +   end;
MPRINT(EM_DIAGRAM):   end;
1784646   +end;
MPRINT(EM_DIAGRAM):   end;
1784647   +
1784648   +*** Generate dummy variables for GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntMeatProducts ;
1784649   +drop _7_0 _7_1 _7_2 ;
MPRINT(EM_DIAGRAM):   drop _7_0 _7_1 _7_2 ;
1784650   +if missing( GRP_MntMeatProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntMeatProducts ) then do;
1784651   +   _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1784652   +   _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1784653   +   _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1784654   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784655   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784656   +end;
MPRINT(EM_DIAGRAM):   end;
1784657   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784658   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784659   +   _dm12 = put( GRP_MntMeatProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntMeatProducts , BEST12. );
1784660   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784661   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784662   +      _7_0 = -1;
MPRINT(EM_DIAGRAM):   _7_0 = -1;
1784663   +      _7_1 = -1;
MPRINT(EM_DIAGRAM):   _7_1 = -1;
1784664   +      _7_2 = -1;
MPRINT(EM_DIAGRAM):   _7_2 = -1;
1784665   +   end;
MPRINT(EM_DIAGRAM):   end;
1784666   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784667   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1784668   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1784669   +      _7_2 = 1;
MPRINT(EM_DIAGRAM):   _7_2 = 1;
1784670   +   end;
MPRINT(EM_DIAGRAM):   end;
1784671   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784672   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1784673   +      _7_1 = 1;
MPRINT(EM_DIAGRAM):   _7_1 = 1;
1784674   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1784675   +   end;
MPRINT(EM_DIAGRAM):   end;
1784676   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784677   +      _7_0 = 1;
MPRINT(EM_DIAGRAM):   _7_0 = 1;
1784678   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1784679   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1784680   +   end;
MPRINT(EM_DIAGRAM):   end;
1784681   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784682   +      _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1784683   +      _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1784684   +      _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1784685   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784686   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784687   +   end;
MPRINT(EM_DIAGRAM):   end;
1784688   +end;
MPRINT(EM_DIAGRAM):   end;
1784689   +
1784690   +*** Generate dummy variables for GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntWines ;
1784691   +drop _8_0 _8_1 _8_2 ;
MPRINT(EM_DIAGRAM):   drop _8_0 _8_1 _8_2 ;
1784692   +if missing( GRP_MntWines ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntWines ) then do;
1784693   +   _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1784694   +   _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1784695   +   _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1784696   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784697   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784698   +end;
MPRINT(EM_DIAGRAM):   end;
1784699   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784700   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784701   +   _dm12 = put( GRP_MntWines , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntWines , BEST12. );
1784702   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784703   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784704   +      _8_0 = -1;
MPRINT(EM_DIAGRAM):   _8_0 = -1;
1784705   +      _8_1 = -1;
MPRINT(EM_DIAGRAM):   _8_1 = -1;
1784706   +      _8_2 = -1;
MPRINT(EM_DIAGRAM):   _8_2 = -1;
1784707   +   end;
MPRINT(EM_DIAGRAM):   end;
1784708   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784709   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1784710   +      _8_1 = 1;
MPRINT(EM_DIAGRAM):   _8_1 = 1;
1784711   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1784712   +   end;
MPRINT(EM_DIAGRAM):   end;
1784713   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784714   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1784715   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1784716   +      _8_2 = 1;
MPRINT(EM_DIAGRAM):   _8_2 = 1;
1784717   +   end;
MPRINT(EM_DIAGRAM):   end;
1784718   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784719   +      _8_0 = 1;
MPRINT(EM_DIAGRAM):   _8_0 = 1;
1784720   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1784721   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1784722   +   end;
MPRINT(EM_DIAGRAM):   end;
1784723   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784724   +      _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1784725   +      _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1784726   +      _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1784727   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784728   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784729   +   end;
MPRINT(EM_DIAGRAM):   end;
1784730   +end;
MPRINT(EM_DIAGRAM):   end;
1784731   +
1784732   +*** Generate dummy variables for GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumCatalogPurchases ;
1784733   +drop _9_0 _9_1 ;
MPRINT(EM_DIAGRAM):   drop _9_0 _9_1 ;
1784734   +if missing( GRP_NumCatalogPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumCatalogPurchases ) then do;
1784735   +   _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1784736   +   _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1784737   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784738   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784739   +end;
MPRINT(EM_DIAGRAM):   end;
1784740   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784741   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784742   +   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
1784743   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784744   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784745   +      _9_0 = -1;
MPRINT(EM_DIAGRAM):   _9_0 = -1;
1784746   +      _9_1 = -1;
MPRINT(EM_DIAGRAM):   _9_1 = -1;
1784747   +   end;
MPRINT(EM_DIAGRAM):   end;
1784748   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784749   +      _9_0 = 1;
MPRINT(EM_DIAGRAM):   _9_0 = 1;
1784750   +      _9_1 = 0;
MPRINT(EM_DIAGRAM):   _9_1 = 0;
1784751   +   end;
MPRINT(EM_DIAGRAM):   end;
1784752   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784753   +      _9_0 = 0;
MPRINT(EM_DIAGRAM):   _9_0 = 0;
1784754   +      _9_1 = 1;
MPRINT(EM_DIAGRAM):   _9_1 = 1;
1784755   +   end;
MPRINT(EM_DIAGRAM):   end;
1784756   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784757   +      _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1784758   +      _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1784759   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784760   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784761   +   end;
MPRINT(EM_DIAGRAM):   end;
1784762   +end;
MPRINT(EM_DIAGRAM):   end;
1784763   +
1784764   +*** Generate dummy variables for GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumDistPurchases ;
1784765   +drop _10_0 _10_1 _10_2 ;
MPRINT(EM_DIAGRAM):   drop _10_0 _10_1 _10_2 ;
1784766   +if missing( GRP_NumDistPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumDistPurchases ) then do;
1784767   +   _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1784768   +   _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1784769   +   _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1784770   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784771   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784772   +end;
MPRINT(EM_DIAGRAM):   end;
1784773   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784774   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784775   +   _dm12 = put( GRP_NumDistPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumDistPurchases , BEST12. );
1784776   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784777   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784778   +      _10_0 = -1;
MPRINT(EM_DIAGRAM):   _10_0 = -1;
1784779   +      _10_1 = -1;
MPRINT(EM_DIAGRAM):   _10_1 = -1;
1784780   +      _10_2 = -1;
MPRINT(EM_DIAGRAM):   _10_2 = -1;
1784781   +   end;
MPRINT(EM_DIAGRAM):   end;
1784782   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784783   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1784784   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1784785   +      _10_2 = 1;
MPRINT(EM_DIAGRAM):   _10_2 = 1;
1784786   +   end;
MPRINT(EM_DIAGRAM):   end;
1784787   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784788   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1784789   +      _10_1 = 1;
MPRINT(EM_DIAGRAM):   _10_1 = 1;
1784790   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1784791   +   end;
MPRINT(EM_DIAGRAM):   end;
1784792   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784793   +      _10_0 = 1;
MPRINT(EM_DIAGRAM):   _10_0 = 1;
1784794   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1784795   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1784796   +   end;
MPRINT(EM_DIAGRAM):   end;
1784797   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784798   +      _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1784799   +      _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1784800   +      _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1784801   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784802   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784803   +   end;
MPRINT(EM_DIAGRAM):   end;
1784804   +end;
MPRINT(EM_DIAGRAM):   end;
1784805   +
1784806   +*** Generate dummy variables for GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumWebPurchases ;
1784807   +drop _11_0 _11_1 _11_2 ;
MPRINT(EM_DIAGRAM):   drop _11_0 _11_1 _11_2 ;
1784808   +if missing( GRP_NumWebPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumWebPurchases ) then do;
1784809   +   _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1784810   +   _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1784811   +   _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1784812   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784813   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784814   +end;
MPRINT(EM_DIAGRAM):   end;
1784815   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784816   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784817   +   _dm12 = put( GRP_NumWebPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumWebPurchases , BEST12. );
1784818   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784819   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784820   +      _11_0 = -1;
MPRINT(EM_DIAGRAM):   _11_0 = -1;
1784821   +      _11_1 = -1;
MPRINT(EM_DIAGRAM):   _11_1 = -1;
1784822   +      _11_2 = -1;
MPRINT(EM_DIAGRAM):   _11_2 = -1;
1784823   +   end;
MPRINT(EM_DIAGRAM):   end;
1784824   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784825   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1784826   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1784827   +      _11_2 = 1;
MPRINT(EM_DIAGRAM):   _11_2 = 1;
1784828   +   end;
MPRINT(EM_DIAGRAM):   end;
1784829   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784830   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1784831   +      _11_1 = 1;
MPRINT(EM_DIAGRAM):   _11_1 = 1;
1784832   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1784833   +   end;
MPRINT(EM_DIAGRAM):   end;
1784834   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784835   +      _11_0 = 1;
MPRINT(EM_DIAGRAM):   _11_0 = 1;
1784836   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1784837   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1784838   +   end;
MPRINT(EM_DIAGRAM):   end;
1784839   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784840   +      _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1784841   +      _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1784842   +      _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1784843   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784844   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784845   +   end;
MPRINT(EM_DIAGRAM):   end;
1784846   +end;
MPRINT(EM_DIAGRAM):   end;
1784847   +
1784848   +*** Generate dummy variables for GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RFMstat ;
1784849   +drop _12_0 _12_1 _12_2 ;
MPRINT(EM_DIAGRAM):   drop _12_0 _12_1 _12_2 ;
1784850   +if missing( GRP_RFMstat ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RFMstat ) then do;
1784851   +   _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1784852   +   _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1784853   +   _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1784854   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784855   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784856   +end;
MPRINT(EM_DIAGRAM):   end;
1784857   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784858   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784859   +   _dm12 = put( GRP_RFMstat , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RFMstat , BEST12. );
1784860   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784861   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784862   +      _12_0 = -1;
MPRINT(EM_DIAGRAM):   _12_0 = -1;
1784863   +      _12_1 = -1;
MPRINT(EM_DIAGRAM):   _12_1 = -1;
1784864   +      _12_2 = -1;
MPRINT(EM_DIAGRAM):   _12_2 = -1;
1784865   +   end;
MPRINT(EM_DIAGRAM):   end;
1784866   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784867   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1784868   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1784869   +      _12_2 = 1;
MPRINT(EM_DIAGRAM):   _12_2 = 1;
1784870   +   end;
MPRINT(EM_DIAGRAM):   end;
1784871   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784872   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1784873   +      _12_1 = 1;
MPRINT(EM_DIAGRAM):   _12_1 = 1;
1784874   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1784875   +   end;
MPRINT(EM_DIAGRAM):   end;
1784876   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784877   +      _12_0 = 1;
MPRINT(EM_DIAGRAM):   _12_0 = 1;
1784878   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1784879   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1784880   +   end;
MPRINT(EM_DIAGRAM):   end;
1784881   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784882   +      _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1784883   +      _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1784884   +      _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1784885   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784886   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784887   +   end;
MPRINT(EM_DIAGRAM):   end;
1784888   +end;
MPRINT(EM_DIAGRAM):   end;
1784889   +
1784890   +*** Generate dummy variables for GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RMntFrq ;
1784891   +drop _13_0 _13_1 _13_2 ;
MPRINT(EM_DIAGRAM):   drop _13_0 _13_1 _13_2 ;
1784892   +if missing( GRP_RMntFrq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RMntFrq ) then do;
1784893   +   _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1784894   +   _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1784895   +   _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1784896   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784897   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784898   +end;
MPRINT(EM_DIAGRAM):   end;
1784899   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784900   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784901   +   _dm12 = put( GRP_RMntFrq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RMntFrq , BEST12. );
1784902   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784903   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1784904   +      _13_0 = -1;
MPRINT(EM_DIAGRAM):   _13_0 = -1;
1784905   +      _13_1 = -1;
MPRINT(EM_DIAGRAM):   _13_1 = -1;
1784906   +      _13_2 = -1;
MPRINT(EM_DIAGRAM):   _13_2 = -1;
1784907   +   end;
MPRINT(EM_DIAGRAM):   end;
1784908   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784909   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1784910   +      _13_1 = 1;
MPRINT(EM_DIAGRAM):   _13_1 = 1;
1784911   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1784912   +   end;
MPRINT(EM_DIAGRAM):   end;
1784913   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784914   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1784915   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1784916   +      _13_2 = 1;
MPRINT(EM_DIAGRAM):   _13_2 = 1;
1784917   +   end;
MPRINT(EM_DIAGRAM):   end;
1784918   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1784919   +      _13_0 = 1;
MPRINT(EM_DIAGRAM):   _13_0 = 1;
1784920   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1784921   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1784922   +   end;
MPRINT(EM_DIAGRAM):   end;
1784923   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784924   +      _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1784925   +      _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1784926   +      _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1784927   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784928   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784929   +   end;
MPRINT(EM_DIAGRAM):   end;
1784930   +end;
MPRINT(EM_DIAGRAM):   end;
1784931   +
1784932   +*** Generate dummy variables for GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Recency ;
1784933   +drop _14_0 _14_1 _14_2 ;
MPRINT(EM_DIAGRAM):   drop _14_0 _14_1 _14_2 ;
1784934   +if missing( GRP_Recency ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Recency ) then do;
1784935   +   _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1784936   +   _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1784937   +   _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1784938   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1784939   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784940   +end;
MPRINT(EM_DIAGRAM):   end;
1784941   +else do;
MPRINT(EM_DIAGRAM):   else do;
1784942   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1784943   +   _dm12 = put( GRP_Recency , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Recency , BEST12. );
1784944   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1784945   +   if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '2' then do;
1784946   +      _14_0 = 1;
MPRINT(EM_DIAGRAM):   _14_0 = 1;
1784947   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1784948   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1784949   +   end;
MPRINT(EM_DIAGRAM):   end;
1784950   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1784951   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1784952   +      _14_1 = 1;
MPRINT(EM_DIAGRAM):   _14_1 = 1;
1784953   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1784954   +   end;
MPRINT(EM_DIAGRAM):   end;
1784955   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1784956   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1784957   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1784958   +      _14_2 = 1;
MPRINT(EM_DIAGRAM):   _14_2 = 1;
1784959   +   end;
MPRINT(EM_DIAGRAM):   end;
1784960   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1784961   +      _14_0 = -1;
MPRINT(EM_DIAGRAM):   _14_0 = -1;
1784962   +      _14_1 = -1;
MPRINT(EM_DIAGRAM):   _14_1 = -1;
1784963   +      _14_2 = -1;
MPRINT(EM_DIAGRAM):   _14_2 = -1;
1784964   +   end;
MPRINT(EM_DIAGRAM):   end;
1784965   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1784966   +      _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1784967   +      _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1784968   +      _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1784969   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1784970   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1784971   +   end;
MPRINT(EM_DIAGRAM):   end;
1784972   +end;
MPRINT(EM_DIAGRAM):   end;
1784973   +
1784974   +*** If missing inputs, use averages;
MPRINT(EM_DIAGRAM):   *** If missing inputs, use averages;
1784975   +if _DM_BAD > 0 then do;
MPRINT(EM_DIAGRAM):   if _DM_BAD > 0 then do;
1784976   +   _P0 = 0.8348837209;
MPRINT(EM_DIAGRAM):   _P0 = 0.8348837209;
1784977   +   _P1 = 0.1651162791;
MPRINT(EM_DIAGRAM):   _P1 = 0.1651162791;
1784978   +   goto RULE3_2DR1;
MPRINT(EM_DIAGRAM):   goto RULE3_2DR1;
1784979   +end;
MPRINT(EM_DIAGRAM):   end;
1784980   +
1784981   +*** Compute Linear Predictor;
MPRINT(EM_DIAGRAM):   *** Compute Linear Predictor;
1784982   +drop _TEMP;
MPRINT(EM_DIAGRAM):   drop _TEMP;
1784983   +drop _LP0;
MPRINT(EM_DIAGRAM):   drop _LP0;
1784984   +_LP0 = 0;
MPRINT(EM_DIAGRAM):   _LP0 = 0;
1784985   +
1784986   +***  Effect: GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_AcceptedCmp5 ;
1784987   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784988   +_LP0 = _LP0 + (     0.2755854906389) * _TEMP * _1_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.2755854906389) * _TEMP * _1_0;
1784989   +
1784990   +***  Effect: GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Frq ;
1784991   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784992   +_LP0 = _LP0 + (   -3.75810078867511) * _TEMP * _2_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -3.75810078867511) * _TEMP * _2_0;
1784993   +_LP0 = _LP0 + (    0.54972535728544) * _TEMP * _2_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.54972535728544) * _TEMP * _2_1;
1784994   +_LP0 = _LP0 + (     1.1432462397042) * _TEMP * _2_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.1432462397042) * _TEMP * _2_2;
1784995   +
1784996   +***  Effect: GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Income ;
1784997   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1784998   +_LP0 = _LP0 + (   -1.97297373633573) * _TEMP * _3_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.97297373633573) * _TEMP * _3_0;
1784999   +_LP0 = _LP0 + (   -0.67820578191593) * _TEMP * _3_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.67820578191593) * _TEMP * _3_1;
1785000   +_LP0 = _LP0 + (    1.37979656554052) * _TEMP * _3_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.37979656554052) * _TEMP * _3_2;
1785001   +
1785002   +***  Effect: GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Mnt ;
1785003   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785004   +_LP0 = _LP0 + (    3.56520060916351) * _TEMP * _4_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 3.56520060916351) * _TEMP * _4_0;
1785005   +_LP0 = _LP0 + (    0.27230485121635) * _TEMP * _4_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.27230485121635) * _TEMP * _4_1;
1785006   +_LP0 = _LP0 + (   -1.78790448642515) * _TEMP * _4_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.78790448642515) * _TEMP * _4_2;
1785007   +
1785008   +***  Effect: GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntFishProducts ;
1785009   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785010   +_LP0 = _LP0 + (   -0.72129392998676) * _TEMP * _5_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.72129392998676) * _TEMP * _5_0;
1785011   +_LP0 = _LP0 + (    0.38499939670176) * _TEMP * _5_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.38499939670176) * _TEMP * _5_1;
1785012   +_LP0 = _LP0 + (    0.22388001037485) * _TEMP * _5_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.22388001037485) * _TEMP * _5_2;
1785013   +
1785014   +***  Effect: GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntGoldProds ;
1785015   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785016   +_LP0 = _LP0 + (    0.76717357691553) * _TEMP * _6_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.76717357691553) * _TEMP * _6_0;
1785017   +_LP0 = _LP0 + (   -0.24937326232659) * _TEMP * _6_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.24937326232659) * _TEMP * _6_1;
1785018   +_LP0 = _LP0 + (    0.11092888065087) * _TEMP * _6_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.11092888065087) * _TEMP * _6_2;
1785019   +
1785020   +***  Effect: GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntMeatProducts ;
1785021   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785022   +_LP0 = _LP0 + (    2.39898778191823) * _TEMP * _7_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 2.39898778191823) * _TEMP * _7_0;
1785023   +_LP0 = _LP0 + (    0.55195796238636) * _TEMP * _7_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.55195796238636) * _TEMP * _7_1;
1785024   +_LP0 = _LP0 + (   -1.40436175575026) * _TEMP * _7_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.40436175575026) * _TEMP * _7_2;
1785025   +
1785026   +***  Effect: GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntWines ;
1785027   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785028   +_LP0 = _LP0 + (    0.84803792934378) * _TEMP * _8_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.84803792934378) * _TEMP * _8_0;
1785029   +_LP0 = _LP0 + (    0.20838403498632) * _TEMP * _8_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.20838403498632) * _TEMP * _8_1;
1785030   +_LP0 = _LP0 + (   -0.45106764907277) * _TEMP * _8_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.45106764907277) * _TEMP * _8_2;
1785031   +
1785032   +***  Effect: GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumCatalogPurchases ;
1785033   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785034   +_LP0 = _LP0 + (    1.39844808004489) * _TEMP * _9_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.39844808004489) * _TEMP * _9_0;
1785035   +_LP0 = _LP0 + (   -0.32023677204533) * _TEMP * _9_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.32023677204533) * _TEMP * _9_1;
1785036   +
1785037   +***  Effect: GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumDistPurchases ;
1785038   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785039   +_LP0 = _LP0 + (    9.48183440350088) * _TEMP * _10_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 9.48183440350088) * _TEMP * _10_0;
1785040   +_LP0 = _LP0 + (   -3.69312594582071) * _TEMP * _10_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -3.69312594582071) * _TEMP * _10_1;
1785041   +_LP0 = _LP0 + (   -2.42567033749322) * _TEMP * _10_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -2.42567033749322) * _TEMP * _10_2;
1785042   +
1785043   +***  Effect: GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumWebPurchases ;
1785044   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785045   +_LP0 = _LP0 + (    0.73155492362896) * _TEMP * _11_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.73155492362896) * _TEMP * _11_0;
1785046   +_LP0 = _LP0 + (    -0.0632363477256) * _TEMP * _11_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.0632363477256) * _TEMP * _11_1;
1785047   +_LP0 = _LP0 + (   -0.23160884340405) * _TEMP * _11_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.23160884340405) * _TEMP * _11_2;
1785048   +
1785049   +***  Effect: GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RFMstat ;
1785050   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785051   +_LP0 = _LP0 + (    0.80547627121444) * _TEMP * _12_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.80547627121444) * _TEMP * _12_0;
1785052   +_LP0 = _LP0 + (    0.18872433644203) * _TEMP * _12_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.18872433644203) * _TEMP * _12_1;
1785053   +_LP0 = _LP0 + (   -0.00439389281149) * _TEMP * _12_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.00439389281149) * _TEMP * _12_2;
1785054   +
1785055   +***  Effect: GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RMntFrq ;
1785056   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785057   +_LP0 = _LP0 + (   -4.38345957326098) * _TEMP * _13_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -4.38345957326098) * _TEMP * _13_0;
1785058   +_LP0 = _LP0 + (   -0.82877013686493) * _TEMP * _13_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.82877013686493) * _TEMP * _13_1;
1785059   +_LP0 = _LP0 + (    2.87379405520898) * _TEMP * _13_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 2.87379405520898) * _TEMP * _13_2;
1785060   +
1785061   +***  Effect: GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Recency ;
1785062   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785063   +_LP0 = _LP0 + (   -0.84415144261954) * _TEMP * _14_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.84415144261954) * _TEMP * _14_0;
1785064   +_LP0 = _LP0 + (   -0.06961662518501) * _TEMP * _14_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.06961662518501) * _TEMP * _14_1;
1785065   +_LP0 = _LP0 + (    -0.4618611915042) * _TEMP * _14_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.4618611915042) * _TEMP * _14_2;
1785066   +
1785067   +***  Effect: Year_Birth ;
MPRINT(EM_DIAGRAM):   *** Effect: Year_Birth ;
1785068   +_TEMP = Year_Birth ;
MPRINT(EM_DIAGRAM):   _TEMP = Year_Birth ;
1785069   +_LP0 = _LP0 + (    -0.0039991752783 * _TEMP);
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.0039991752783 * _TEMP);
1785070   +
1785071   +*** Naive Posterior Probabilities;
MPRINT(EM_DIAGRAM):   *** Naive Posterior Probabilities;
1785072   +drop _MAXP _IY _P0 _P1;
MPRINT(EM_DIAGRAM):   drop _MAXP _IY _P0 _P1;
1785073   +_TEMP =     14.2898298532565 + _LP0;
MPRINT(EM_DIAGRAM):   _TEMP = 14.2898298532565 + _LP0;
1785074   +if (_TEMP < 0) then do;
MPRINT(EM_DIAGRAM):   if (_TEMP < 0) then do;
1785075   +   _TEMP = exp(_TEMP);
MPRINT(EM_DIAGRAM):   _TEMP = exp(_TEMP);
1785076   +   _P0 = _TEMP / (1 + _TEMP);
MPRINT(EM_DIAGRAM):   _P0 = _TEMP / (1 + _TEMP);
1785077   +end;
MPRINT(EM_DIAGRAM):   end;
1785078   +else _P0 = 1 / (1 + exp(-_TEMP));
MPRINT(EM_DIAGRAM):   else _P0 = 1 / (1 + exp(-_TEMP));
1785079   +_P1 = 1.0 - _P0;
MPRINT(EM_DIAGRAM):   _P1 = 1.0 - _P0;
1785080   +
1785081   +RULE3_2DR1:
1785082   +
1785083   +
1785084   +*** Posterior Probabilities and Predicted Level;
MPRINT(EM_DIAGRAM):   RULE3_2DR1: *** Posterior Probabilities and Predicted Level;
1785085   +label P__bin1 = 'Predicted: _bin=1' ;
MPRINT(EM_DIAGRAM):   label P__bin1 = 'Predicted: _bin=1' ;
1785086   +label P__bin0 = 'Predicted: _bin=0' ;
MPRINT(EM_DIAGRAM):   label P__bin0 = 'Predicted: _bin=0' ;
1785087   +P__bin1 = _P0;
MPRINT(EM_DIAGRAM):   P__bin1 = _P0;
1785088   +_MAXP = _P0;
MPRINT(EM_DIAGRAM):   _MAXP = _P0;
1785089   +_IY = 1;
MPRINT(EM_DIAGRAM):   _IY = 1;
1785090   +P__bin0 = _P1;
MPRINT(EM_DIAGRAM):   P__bin0 = _P1;
1785091   +if (_P1 >  _MAXP + 1E-8) then do;
MPRINT(EM_DIAGRAM):   if (_P1 > _MAXP + 1E-8) then do;
1785092   +   _MAXP = _P1;
MPRINT(EM_DIAGRAM):   _MAXP = _P1;
1785093   +   _IY = 2;
MPRINT(EM_DIAGRAM):   _IY = 2;
1785094   +end;
MPRINT(EM_DIAGRAM):   end;
1785095   +I__bin = RULE3_2DRF[_IY];
MPRINT(EM_DIAGRAM):   I__bin = RULE3_2DRF[_IY];
1785096   +U__bin = RULE3_2DRU[_IY];
MPRINT(EM_DIAGRAM):   U__bin = RULE3_2DRU[_IY];
1785097   +
1785098   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785099   +***** end scoring code for regression;
MPRINT(EM_DIAGRAM):   ***** end scoring code for regression;
1785100   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785101   +*;
MPRINT(EM_DIAGRAM):   *;
1785102   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1785103   +if I__bin eq '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin eq '1' then do;
1785104   +I_DepVar = ("1");
MPRINT(EM_DIAGRAM):   I_DepVar = ("1");
1785105   +%DMNORMCP(I_DepVar, I_DepVar);
MPRINT(DMNORMCP):   I_DepVar=dmnorm(I_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1785106   +P_DepVar1=P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar1=P__bin1;
1785107   +P_DepVar0 = 1-P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar0 = 1-P__bin1;
1785108   +end;
MPRINT(EM_DIAGRAM):   end;
1785109   +*;
MPRINT(EM_DIAGRAM):   *;
1785110   +*;
MPRINT(EM_DIAGRAM):   *;
1785111   +end;
MPRINT(EM_DIAGRAM):   end;
1785112   +*;
MPRINT(EM_DIAGRAM):   *;
1785113   +DROP P__bin1 P__bin0;
MPRINT(EM_DIAGRAM):   DROP P__bin1 P__bin0;
1785114   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785115   +* Cleanup Model for DepVar;
MPRINT(EM_DIAGRAM):   * Cleanup Model for DepVar;
1785116   +* Null Model based on training frequencies;
MPRINT(EM_DIAGRAM):   * Null Model based on training frequencies;
1785117   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785118   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1785119   +if I__bin ne '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin ne '1' then do;
1785120   +I_DepVar = ("1");
MPRINT(EM_DIAGRAM):   I_DepVar = ("1");
1785121   +%DMNORMCP(I_DepVar, I_DepVar);
MPRINT(DMNORMCP):   I_DepVar=dmnorm(I_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1785122   +P_DepVar1 = 0.15122156697556;
MPRINT(EM_DIAGRAM):   P_DepVar1 = 0.15122156697556;
1785123   +P_DepVar0 = 0.84877843302443;
MPRINT(EM_DIAGRAM):   P_DepVar0 = 0.84877843302443;
1785124   +*;
MPRINT(EM_DIAGRAM):   *;
1785125   +end;
MPRINT(EM_DIAGRAM):   end;
1785126   +*;
MPRINT(EM_DIAGRAM):   *;
1785127   +*;
MPRINT(EM_DIAGRAM):   *;
1785128   +drop U__bin _bin;
MPRINT(EM_DIAGRAM):   drop U__bin _bin;
1785129   +*;
MPRINT(EM_DIAGRAM):   *;
1785130   +_FORMAT = PUT(DepVar, BEST.);
MPRINT(EM_DIAGRAM):   _FORMAT = PUT(DepVar, BEST.);
1785131   +%DMNORMCP(_FORMAT, F_DepVar);
MPRINT(DMNORMCP):   F_DepVar=dmnorm(_FORMAT,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1785132   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785133   +*Computing Residual Vars: DepVar;
MPRINT(EM_DIAGRAM):   *Computing Residual Vars: DepVar;
1785134   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785135   +Label R_DepVar1='Residual: DepVar=1';
MPRINT(EM_DIAGRAM):   Label R_DepVar1= 'Residual: DepVar=1';
1785136   +Label R_DepVar0='Residual: DepVar=0';
MPRINT(EM_DIAGRAM):   Label R_DepVar0= 'Residual: DepVar=0';
1785137   +if
1785138   + F_DepVar ne '1'
1785139   +and F_DepVar ne '0'
1785140   + then do;
MPRINT(EM_DIAGRAM):   if F_DepVar ne '1' and F_DepVar ne '0' then do;
1785141   +R_DepVar1=.;
MPRINT(EM_DIAGRAM):   R_DepVar1=.;
1785142   +R_DepVar0=.;
MPRINT(EM_DIAGRAM):   R_DepVar0=.;
1785143   +end;
MPRINT(EM_DIAGRAM):   end;
1785144   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785145   +R_DepVar1= - P_DepVar1;
MPRINT(EM_DIAGRAM):   R_DepVar1= - P_DepVar1;
1785146   +R_DepVar0= - P_DepVar0;
MPRINT(EM_DIAGRAM):   R_DepVar0= - P_DepVar0;
1785147   +select(F_DepVar);
MPRINT(EM_DIAGRAM):   select(F_DepVar);
1785148   +when('1')R_DepVar1= R_DepVar1+1;
MPRINT(EM_DIAGRAM):   when('1')R_DepVar1= R_DepVar1+1;
1785149   +when('0')R_DepVar0= R_DepVar0+1;
MPRINT(EM_DIAGRAM):   when('0')R_DepVar0= R_DepVar0+1;
1785150   +otherwise;
MPRINT(EM_DIAGRAM):   otherwise;
1785151   +end;
MPRINT(EM_DIAGRAM):   end;
1785152   +end;
MPRINT(EM_DIAGRAM):   end;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_DIAGRAM):   run;
1785153    run;
 
NOTE: DATA STEP view saved on file EMWS8.RULE3_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS8.BINNING_TRAIN.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
1785154    quit;
1785155    filename emflow;
MPRINT(EM_DIAGRAM):   filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
1785156    filename emflow
1785156  ! "C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):    filename emflow
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Rule3: Scoring VALIDATE data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785157    *------------------------------------------------------------*;
1785158    * Rule3: Scoring VALIDATE data;
1785159    *------------------------------------------------------------*;
1785160    data EMWS8.Rule3_VALIDATE
1785161    / view=EMWS8.Rule3_VALIDATE
1785162    ;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_VALIDATE / view=EMWS8.Rule3_VALIDATE ;
1785163    set EMWS8.BINNING_VALIDATE
1785164    ;
MPRINT(EM_DIAGRAM):   set EMWS8.BINNING_VALIDATE ;
1785165    %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file
      C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMFLOWSCORE.sas.
1785166   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785167   +* Rule Induction Scoring Code;
MPRINT(EM_DIAGRAM):   * Rule Induction Scoring Code;
1785168   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785169   +length _bin $12 I__bin $12 I_DepVar $32;
MPRINT(EM_DIAGRAM):   length _bin $12 I__bin $12 I_DepVar $32;
1785170   +label I_DepVar = 'Into: DepVar';
MPRINT(EM_DIAGRAM):   label I_DepVar = 'Into: DepVar';
1785171   +label F_DepVar = 'Into: DepVar';
MPRINT(EM_DIAGRAM):   label F_DepVar = 'Into: DepVar';
1785172   +*;
MPRINT(EM_DIAGRAM):   *;
1785173   +drop I__bin;
MPRINT(EM_DIAGRAM):   drop I__bin;
1785174   +*;
MPRINT(EM_DIAGRAM):   *;
1785175   +F_DepVar=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   F_DepVar=putn(DepVar, 'best.');
1785176   +%DMNORMIP(F_DepVar);
MPRINT(DMNORMIP):   call dmnorm(F_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1785177   +I_DepVar = '';
MPRINT(EM_DIAGRAM):   I_DepVar = '';
1785178   +I__bin= '0';
MPRINT(EM_DIAGRAM):   I__bin= '0';
1785179   +*;
MPRINT(EM_DIAGRAM):   *;
1785180   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785181   +* Null Model;
MPRINT(EM_DIAGRAM):   * Null Model;
1785182   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785183   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785184   +*Binary model for DepVar = 0;
MPRINT(EM_DIAGRAM):   *Binary model for DepVar = 0;
1785185   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785186   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785187   +*** begin scoring code for regression;
MPRINT(EM_DIAGRAM):   *** begin scoring code for regression;
1785188   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785189   +
1785190   +length _WARN_ $4;
MPRINT(EM_DIAGRAM):   length _WARN_ $4;
1785191   +label _WARN_ = 'Warnings' ;
MPRINT(EM_DIAGRAM):   label _WARN_ = 'Warnings' ;
1785192   +
1785193   +length I__bin $ 12;
MPRINT(EM_DIAGRAM):   length I__bin $ 12;
1785194   +label I__bin = 'Into: _bin' ;
MPRINT(EM_DIAGRAM):   label I__bin = 'Into: _bin' ;
1785195   +*** Target Values;
MPRINT(EM_DIAGRAM):   *** Target Values;
1785196   +array RULE3_1DRF [2] $12 _temporary_ ('1' '0' );
MPRINT(EM_DIAGRAM):   array RULE3_1DRF [2] $12 _temporary_ ('1' '0' );
1785197   +label U__bin = 'Unnormalized Into: _bin' ;
MPRINT(EM_DIAGRAM):   label U__bin = 'Unnormalized Into: _bin' ;
1785198   +length U__bin $ 12;
MPRINT(EM_DIAGRAM):   length U__bin $ 12;
1785199   +*** Unnormalized target values;
MPRINT(EM_DIAGRAM):   *** Unnormalized target values;
1785200   +array RULE3_1DRU[2] $ 12 _temporary_ ('1           '  '0           ' );
MPRINT(EM_DIAGRAM):   array RULE3_1DRU[2] $ 12 _temporary_ ('1           ' '0           ' );
1785201   +
1785202   +drop _DM_BAD;
MPRINT(EM_DIAGRAM):   drop _DM_BAD;
1785203   +_DM_BAD=0;
MPRINT(EM_DIAGRAM):   _DM_BAD=0;
1785204   +
1785205   +*** Check Year_Birth for missing values ;
MPRINT(EM_DIAGRAM):   *** Check Year_Birth for missing values ;
1785206   +if missing( Year_Birth ) then do;
MPRINT(EM_DIAGRAM):   if missing( Year_Birth ) then do;
1785207   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785208   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785209   +end;
MPRINT(EM_DIAGRAM):   end;
1785210   +
1785211   +*** Generate dummy variables for GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_AcceptedCmp5 ;
1785212   +drop _1_0 ;
MPRINT(EM_DIAGRAM):   drop _1_0 ;
1785213   +if missing( GRP_AcceptedCmp5 ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_AcceptedCmp5 ) then do;
1785214   +   _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1785215   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785216   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785217   +end;
MPRINT(EM_DIAGRAM):   end;
1785218   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785219   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785220   +   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
1785221   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785222   +   if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '2' then do;
1785223   +      _1_0 = 1;
MPRINT(EM_DIAGRAM):   _1_0 = 1;
1785224   +   end;
MPRINT(EM_DIAGRAM):   end;
1785225   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785226   +      _1_0 = -1;
MPRINT(EM_DIAGRAM):   _1_0 = -1;
1785227   +   end;
MPRINT(EM_DIAGRAM):   end;
1785228   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785229   +      _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1785230   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785231   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785232   +   end;
MPRINT(EM_DIAGRAM):   end;
1785233   +end;
MPRINT(EM_DIAGRAM):   end;
1785234   +
1785235   +*** Generate dummy variables for GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Frq ;
1785236   +drop _2_0 _2_1 _2_2 ;
MPRINT(EM_DIAGRAM):   drop _2_0 _2_1 _2_2 ;
1785237   +if missing( GRP_Frq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Frq ) then do;
1785238   +   _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1785239   +   _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1785240   +   _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1785241   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785242   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785243   +end;
MPRINT(EM_DIAGRAM):   end;
1785244   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785245   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785246   +   _dm12 = put( GRP_Frq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Frq , BEST12. );
1785247   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785248   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1785249   +      _2_0 = -1;
MPRINT(EM_DIAGRAM):   _2_0 = -1;
1785250   +      _2_1 = -1;
MPRINT(EM_DIAGRAM):   _2_1 = -1;
1785251   +      _2_2 = -1;
MPRINT(EM_DIAGRAM):   _2_2 = -1;
1785252   +   end;
MPRINT(EM_DIAGRAM):   end;
1785253   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785254   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1785255   +      _2_1 = 1;
MPRINT(EM_DIAGRAM):   _2_1 = 1;
1785256   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1785257   +   end;
MPRINT(EM_DIAGRAM):   end;
1785258   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785259   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1785260   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1785261   +      _2_2 = 1;
MPRINT(EM_DIAGRAM):   _2_2 = 1;
1785262   +   end;
MPRINT(EM_DIAGRAM):   end;
1785263   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785264   +      _2_0 = 1;
MPRINT(EM_DIAGRAM):   _2_0 = 1;
1785265   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1785266   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1785267   +   end;
MPRINT(EM_DIAGRAM):   end;
1785268   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785269   +      _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1785270   +      _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1785271   +      _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1785272   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785273   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785274   +   end;
MPRINT(EM_DIAGRAM):   end;
1785275   +end;
MPRINT(EM_DIAGRAM):   end;
1785276   +
1785277   +*** Generate dummy variables for GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Income ;
1785278   +drop _3_0 _3_1 _3_2 ;
MPRINT(EM_DIAGRAM):   drop _3_0 _3_1 _3_2 ;
1785279   +if missing( GRP_Income ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Income ) then do;
1785280   +   _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1785281   +   _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1785282   +   _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1785283   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785284   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785285   +end;
MPRINT(EM_DIAGRAM):   end;
1785286   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785287   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785288   +   _dm12 = put( GRP_Income , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Income , BEST12. );
1785289   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785290   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1785291   +      _3_0 = -1;
MPRINT(EM_DIAGRAM):   _3_0 = -1;
1785292   +      _3_1 = -1;
MPRINT(EM_DIAGRAM):   _3_1 = -1;
1785293   +      _3_2 = -1;
MPRINT(EM_DIAGRAM):   _3_2 = -1;
1785294   +   end;
MPRINT(EM_DIAGRAM):   end;
1785295   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785296   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1785297   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1785298   +      _3_2 = 1;
MPRINT(EM_DIAGRAM):   _3_2 = 1;
1785299   +   end;
MPRINT(EM_DIAGRAM):   end;
1785300   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785301   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1785302   +      _3_1 = 1;
MPRINT(EM_DIAGRAM):   _3_1 = 1;
1785303   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1785304   +   end;
MPRINT(EM_DIAGRAM):   end;
1785305   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785306   +      _3_0 = 1;
MPRINT(EM_DIAGRAM):   _3_0 = 1;
1785307   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1785308   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1785309   +   end;
MPRINT(EM_DIAGRAM):   end;
1785310   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785311   +      _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1785312   +      _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1785313   +      _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1785314   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785315   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785316   +   end;
MPRINT(EM_DIAGRAM):   end;
1785317   +end;
MPRINT(EM_DIAGRAM):   end;
1785318   +
1785319   +*** Generate dummy variables for GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Mnt ;
1785320   +drop _4_0 _4_1 _4_2 ;
MPRINT(EM_DIAGRAM):   drop _4_0 _4_1 _4_2 ;
1785321   +if missing( GRP_Mnt ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Mnt ) then do;
1785322   +   _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1785323   +   _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1785324   +   _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1785325   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785326   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785327   +end;
MPRINT(EM_DIAGRAM):   end;
1785328   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785329   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785330   +   _dm12 = put( GRP_Mnt , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Mnt , BEST12. );
1785331   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785332   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785333   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1785334   +      _4_1 = 1;
MPRINT(EM_DIAGRAM):   _4_1 = 1;
1785335   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1785336   +   end;
MPRINT(EM_DIAGRAM):   end;
1785337   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785338   +      _4_0 = -1;
MPRINT(EM_DIAGRAM):   _4_0 = -1;
1785339   +      _4_1 = -1;
MPRINT(EM_DIAGRAM):   _4_1 = -1;
1785340   +      _4_2 = -1;
MPRINT(EM_DIAGRAM):   _4_2 = -1;
1785341   +   end;
MPRINT(EM_DIAGRAM):   end;
1785342   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785343   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1785344   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1785345   +      _4_2 = 1;
MPRINT(EM_DIAGRAM):   _4_2 = 1;
1785346   +   end;
MPRINT(EM_DIAGRAM):   end;
1785347   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785348   +      _4_0 = 1;
MPRINT(EM_DIAGRAM):   _4_0 = 1;
1785349   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1785350   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1785351   +   end;
MPRINT(EM_DIAGRAM):   end;
1785352   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785353   +      _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1785354   +      _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1785355   +      _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1785356   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785357   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785358   +   end;
MPRINT(EM_DIAGRAM):   end;
1785359   +end;
MPRINT(EM_DIAGRAM):   end;
1785360   +
1785361   +*** Generate dummy variables for GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntFishProducts ;
1785362   +drop _5_0 _5_1 _5_2 ;
MPRINT(EM_DIAGRAM):   drop _5_0 _5_1 _5_2 ;
1785363   +if missing( GRP_MntFishProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntFishProducts ) then do;
1785364   +   _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1785365   +   _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1785366   +   _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1785367   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785368   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785369   +end;
MPRINT(EM_DIAGRAM):   end;
1785370   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785371   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785372   +   _dm12 = put( GRP_MntFishProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntFishProducts , BEST12. );
1785373   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785374   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785375   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1785376   +      _5_1 = 1;
MPRINT(EM_DIAGRAM):   _5_1 = 1;
1785377   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1785378   +   end;
MPRINT(EM_DIAGRAM):   end;
1785379   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785380   +      _5_0 = -1;
MPRINT(EM_DIAGRAM):   _5_0 = -1;
1785381   +      _5_1 = -1;
MPRINT(EM_DIAGRAM):   _5_1 = -1;
1785382   +      _5_2 = -1;
MPRINT(EM_DIAGRAM):   _5_2 = -1;
1785383   +   end;
MPRINT(EM_DIAGRAM):   end;
1785384   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785385   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1785386   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1785387   +      _5_2 = 1;
MPRINT(EM_DIAGRAM):   _5_2 = 1;
1785388   +   end;
MPRINT(EM_DIAGRAM):   end;
1785389   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785390   +      _5_0 = 1;
MPRINT(EM_DIAGRAM):   _5_0 = 1;
1785391   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1785392   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1785393   +   end;
MPRINT(EM_DIAGRAM):   end;
1785394   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785395   +      _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1785396   +      _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1785397   +      _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1785398   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785399   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785400   +   end;
MPRINT(EM_DIAGRAM):   end;
1785401   +end;
MPRINT(EM_DIAGRAM):   end;
1785402   +
1785403   +*** Generate dummy variables for GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntGoldProds ;
1785404   +drop _6_0 _6_1 _6_2 ;
MPRINT(EM_DIAGRAM):   drop _6_0 _6_1 _6_2 ;
1785405   +if missing( GRP_MntGoldProds ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntGoldProds ) then do;
1785406   +   _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1785407   +   _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1785408   +   _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1785409   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785410   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785411   +end;
MPRINT(EM_DIAGRAM):   end;
1785412   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785413   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785414   +   _dm12 = put( GRP_MntGoldProds , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntGoldProds , BEST12. );
1785415   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785416   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785417   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1785418   +      _6_1 = 1;
MPRINT(EM_DIAGRAM):   _6_1 = 1;
1785419   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1785420   +   end;
MPRINT(EM_DIAGRAM):   end;
1785421   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785422   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1785423   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1785424   +      _6_2 = 1;
MPRINT(EM_DIAGRAM):   _6_2 = 1;
1785425   +   end;
MPRINT(EM_DIAGRAM):   end;
1785426   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785427   +      _6_0 = -1;
MPRINT(EM_DIAGRAM):   _6_0 = -1;
1785428   +      _6_1 = -1;
MPRINT(EM_DIAGRAM):   _6_1 = -1;
1785429   +      _6_2 = -1;
MPRINT(EM_DIAGRAM):   _6_2 = -1;
1785430   +   end;
MPRINT(EM_DIAGRAM):   end;
1785431   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785432   +      _6_0 = 1;
MPRINT(EM_DIAGRAM):   _6_0 = 1;
1785433   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1785434   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1785435   +   end;
MPRINT(EM_DIAGRAM):   end;
1785436   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785437   +      _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1785438   +      _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1785439   +      _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1785440   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785441   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785442   +   end;
MPRINT(EM_DIAGRAM):   end;
1785443   +end;
MPRINT(EM_DIAGRAM):   end;
1785444   +
1785445   +*** Generate dummy variables for GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntMeatProducts ;
1785446   +drop _7_0 _7_1 _7_2 ;
MPRINT(EM_DIAGRAM):   drop _7_0 _7_1 _7_2 ;
1785447   +if missing( GRP_MntMeatProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntMeatProducts ) then do;
1785448   +   _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1785449   +   _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1785450   +   _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1785451   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785452   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785453   +end;
MPRINT(EM_DIAGRAM):   end;
1785454   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785455   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785456   +   _dm12 = put( GRP_MntMeatProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntMeatProducts , BEST12. );
1785457   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785458   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785459   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1785460   +      _7_1 = 1;
MPRINT(EM_DIAGRAM):   _7_1 = 1;
1785461   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1785462   +   end;
MPRINT(EM_DIAGRAM):   end;
1785463   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785464   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1785465   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1785466   +      _7_2 = 1;
MPRINT(EM_DIAGRAM):   _7_2 = 1;
1785467   +   end;
MPRINT(EM_DIAGRAM):   end;
1785468   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785469   +      _7_0 = -1;
MPRINT(EM_DIAGRAM):   _7_0 = -1;
1785470   +      _7_1 = -1;
MPRINT(EM_DIAGRAM):   _7_1 = -1;
1785471   +      _7_2 = -1;
MPRINT(EM_DIAGRAM):   _7_2 = -1;
1785472   +   end;
MPRINT(EM_DIAGRAM):   end;
1785473   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785474   +      _7_0 = 1;
MPRINT(EM_DIAGRAM):   _7_0 = 1;
1785475   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1785476   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1785477   +   end;
MPRINT(EM_DIAGRAM):   end;
1785478   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785479   +      _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1785480   +      _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1785481   +      _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1785482   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785483   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785484   +   end;
MPRINT(EM_DIAGRAM):   end;
1785485   +end;
MPRINT(EM_DIAGRAM):   end;
1785486   +
1785487   +*** Generate dummy variables for GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntWines ;
1785488   +drop _8_0 _8_1 _8_2 ;
MPRINT(EM_DIAGRAM):   drop _8_0 _8_1 _8_2 ;
1785489   +if missing( GRP_MntWines ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntWines ) then do;
1785490   +   _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1785491   +   _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1785492   +   _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1785493   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785494   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785495   +end;
MPRINT(EM_DIAGRAM):   end;
1785496   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785497   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785498   +   _dm12 = put( GRP_MntWines , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntWines , BEST12. );
1785499   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785500   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785501   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1785502   +      _8_1 = 1;
MPRINT(EM_DIAGRAM):   _8_1 = 1;
1785503   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1785504   +   end;
MPRINT(EM_DIAGRAM):   end;
1785505   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785506   +      _8_0 = -1;
MPRINT(EM_DIAGRAM):   _8_0 = -1;
1785507   +      _8_1 = -1;
MPRINT(EM_DIAGRAM):   _8_1 = -1;
1785508   +      _8_2 = -1;
MPRINT(EM_DIAGRAM):   _8_2 = -1;
1785509   +   end;
MPRINT(EM_DIAGRAM):   end;
1785510   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785511   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1785512   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1785513   +      _8_2 = 1;
MPRINT(EM_DIAGRAM):   _8_2 = 1;
1785514   +   end;
MPRINT(EM_DIAGRAM):   end;
1785515   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785516   +      _8_0 = 1;
MPRINT(EM_DIAGRAM):   _8_0 = 1;
1785517   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1785518   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1785519   +   end;
MPRINT(EM_DIAGRAM):   end;
1785520   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785521   +      _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1785522   +      _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1785523   +      _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1785524   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785525   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785526   +   end;
MPRINT(EM_DIAGRAM):   end;
1785527   +end;
MPRINT(EM_DIAGRAM):   end;
1785528   +
1785529   +*** Generate dummy variables for GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumCatalogPurchases ;
1785530   +drop _9_0 _9_1 ;
MPRINT(EM_DIAGRAM):   drop _9_0 _9_1 ;
1785531   +if missing( GRP_NumCatalogPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumCatalogPurchases ) then do;
1785532   +   _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1785533   +   _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1785534   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785535   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785536   +end;
MPRINT(EM_DIAGRAM):   end;
1785537   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785538   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785539   +   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
1785540   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785541   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785542   +      _9_0 = 1;
MPRINT(EM_DIAGRAM):   _9_0 = 1;
1785543   +      _9_1 = 0;
MPRINT(EM_DIAGRAM):   _9_1 = 0;
1785544   +   end;
MPRINT(EM_DIAGRAM):   end;
1785545   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785546   +      _9_0 = -1;
MPRINT(EM_DIAGRAM):   _9_0 = -1;
1785547   +      _9_1 = -1;
MPRINT(EM_DIAGRAM):   _9_1 = -1;
1785548   +   end;
MPRINT(EM_DIAGRAM):   end;
1785549   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785550   +      _9_0 = 0;
MPRINT(EM_DIAGRAM):   _9_0 = 0;
1785551   +      _9_1 = 1;
MPRINT(EM_DIAGRAM):   _9_1 = 1;
1785552   +   end;
MPRINT(EM_DIAGRAM):   end;
1785553   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785554   +      _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1785555   +      _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1785556   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785557   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785558   +   end;
MPRINT(EM_DIAGRAM):   end;
1785559   +end;
MPRINT(EM_DIAGRAM):   end;
1785560   +
1785561   +*** Generate dummy variables for GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumDistPurchases ;
1785562   +drop _10_0 _10_1 _10_2 ;
MPRINT(EM_DIAGRAM):   drop _10_0 _10_1 _10_2 ;
1785563   +if missing( GRP_NumDistPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumDistPurchases ) then do;
1785564   +   _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1785565   +   _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1785566   +   _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1785567   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785568   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785569   +end;
MPRINT(EM_DIAGRAM):   end;
1785570   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785571   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785572   +   _dm12 = put( GRP_NumDistPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumDistPurchases , BEST12. );
1785573   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785574   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1785575   +      _10_0 = -1;
MPRINT(EM_DIAGRAM):   _10_0 = -1;
1785576   +      _10_1 = -1;
MPRINT(EM_DIAGRAM):   _10_1 = -1;
1785577   +      _10_2 = -1;
MPRINT(EM_DIAGRAM):   _10_2 = -1;
1785578   +   end;
MPRINT(EM_DIAGRAM):   end;
1785579   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785580   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1785581   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1785582   +      _10_2 = 1;
MPRINT(EM_DIAGRAM):   _10_2 = 1;
1785583   +   end;
MPRINT(EM_DIAGRAM):   end;
1785584   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785585   +      _10_0 = 1;
MPRINT(EM_DIAGRAM):   _10_0 = 1;
1785586   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1785587   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1785588   +   end;
MPRINT(EM_DIAGRAM):   end;
1785589   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785590   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1785591   +      _10_1 = 1;
MPRINT(EM_DIAGRAM):   _10_1 = 1;
1785592   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1785593   +   end;
MPRINT(EM_DIAGRAM):   end;
1785594   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785595   +      _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1785596   +      _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1785597   +      _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1785598   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785599   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785600   +   end;
MPRINT(EM_DIAGRAM):   end;
1785601   +end;
MPRINT(EM_DIAGRAM):   end;
1785602   +
1785603   +*** Generate dummy variables for GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumWebPurchases ;
1785604   +drop _11_0 _11_1 _11_2 ;
MPRINT(EM_DIAGRAM):   drop _11_0 _11_1 _11_2 ;
1785605   +if missing( GRP_NumWebPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumWebPurchases ) then do;
1785606   +   _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1785607   +   _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1785608   +   _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1785609   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785610   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785611   +end;
MPRINT(EM_DIAGRAM):   end;
1785612   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785613   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785614   +   _dm12 = put( GRP_NumWebPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumWebPurchases , BEST12. );
1785615   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785616   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785617   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1785618   +      _11_1 = 1;
MPRINT(EM_DIAGRAM):   _11_1 = 1;
1785619   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1785620   +   end;
MPRINT(EM_DIAGRAM):   end;
1785621   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785622   +      _11_0 = -1;
MPRINT(EM_DIAGRAM):   _11_0 = -1;
1785623   +      _11_1 = -1;
MPRINT(EM_DIAGRAM):   _11_1 = -1;
1785624   +      _11_2 = -1;
MPRINT(EM_DIAGRAM):   _11_2 = -1;
1785625   +   end;
MPRINT(EM_DIAGRAM):   end;
1785626   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785627   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1785628   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1785629   +      _11_2 = 1;
MPRINT(EM_DIAGRAM):   _11_2 = 1;
1785630   +   end;
MPRINT(EM_DIAGRAM):   end;
1785631   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785632   +      _11_0 = 1;
MPRINT(EM_DIAGRAM):   _11_0 = 1;
1785633   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1785634   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1785635   +   end;
MPRINT(EM_DIAGRAM):   end;
1785636   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785637   +      _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1785638   +      _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1785639   +      _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1785640   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785641   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785642   +   end;
MPRINT(EM_DIAGRAM):   end;
1785643   +end;
MPRINT(EM_DIAGRAM):   end;
1785644   +
1785645   +*** Generate dummy variables for GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RFMstat ;
1785646   +drop _12_0 _12_1 _12_2 ;
MPRINT(EM_DIAGRAM):   drop _12_0 _12_1 _12_2 ;
1785647   +if missing( GRP_RFMstat ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RFMstat ) then do;
1785648   +   _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1785649   +   _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1785650   +   _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1785651   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785652   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785653   +end;
MPRINT(EM_DIAGRAM):   end;
1785654   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785655   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785656   +   _dm12 = put( GRP_RFMstat , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RFMstat , BEST12. );
1785657   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785658   +   if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '4' then do;
1785659   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1785660   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1785661   +      _12_2 = 1;
MPRINT(EM_DIAGRAM):   _12_2 = 1;
1785662   +   end;
MPRINT(EM_DIAGRAM):   end;
1785663   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785664   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1785665   +      _12_1 = 1;
MPRINT(EM_DIAGRAM):   _12_1 = 1;
1785666   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1785667   +   end;
MPRINT(EM_DIAGRAM):   end;
1785668   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785669   +      _12_0 = -1;
MPRINT(EM_DIAGRAM):   _12_0 = -1;
1785670   +      _12_1 = -1;
MPRINT(EM_DIAGRAM):   _12_1 = -1;
1785671   +      _12_2 = -1;
MPRINT(EM_DIAGRAM):   _12_2 = -1;
1785672   +   end;
MPRINT(EM_DIAGRAM):   end;
1785673   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785674   +      _12_0 = 1;
MPRINT(EM_DIAGRAM):   _12_0 = 1;
1785675   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1785676   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1785677   +   end;
MPRINT(EM_DIAGRAM):   end;
1785678   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785679   +      _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1785680   +      _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1785681   +      _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1785682   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785683   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785684   +   end;
MPRINT(EM_DIAGRAM):   end;
1785685   +end;
MPRINT(EM_DIAGRAM):   end;
1785686   +
1785687   +*** Generate dummy variables for GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RMntFrq ;
1785688   +drop _13_0 _13_1 _13_2 ;
MPRINT(EM_DIAGRAM):   drop _13_0 _13_1 _13_2 ;
1785689   +if missing( GRP_RMntFrq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RMntFrq ) then do;
1785690   +   _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1785691   +   _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1785692   +   _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1785693   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785694   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785695   +end;
MPRINT(EM_DIAGRAM):   end;
1785696   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785697   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785698   +   _dm12 = put( GRP_RMntFrq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RMntFrq , BEST12. );
1785699   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785700   +   if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '3' then do;
1785701   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1785702   +      _13_1 = 1;
MPRINT(EM_DIAGRAM):   _13_1 = 1;
1785703   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1785704   +   end;
MPRINT(EM_DIAGRAM):   end;
1785705   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1785706   +      _13_0 = -1;
MPRINT(EM_DIAGRAM):   _13_0 = -1;
1785707   +      _13_1 = -1;
MPRINT(EM_DIAGRAM):   _13_1 = -1;
1785708   +      _13_2 = -1;
MPRINT(EM_DIAGRAM):   _13_2 = -1;
1785709   +   end;
MPRINT(EM_DIAGRAM):   end;
1785710   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785711   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1785712   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1785713   +      _13_2 = 1;
MPRINT(EM_DIAGRAM):   _13_2 = 1;
1785714   +   end;
MPRINT(EM_DIAGRAM):   end;
1785715   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785716   +      _13_0 = 1;
MPRINT(EM_DIAGRAM):   _13_0 = 1;
1785717   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1785718   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1785719   +   end;
MPRINT(EM_DIAGRAM):   end;
1785720   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785721   +      _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1785722   +      _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1785723   +      _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1785724   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785725   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785726   +   end;
MPRINT(EM_DIAGRAM):   end;
1785727   +end;
MPRINT(EM_DIAGRAM):   end;
1785728   +
1785729   +*** Generate dummy variables for GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Recency ;
1785730   +drop _14_0 _14_1 _14_2 ;
MPRINT(EM_DIAGRAM):   drop _14_0 _14_1 _14_2 ;
1785731   +if missing( GRP_Recency ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Recency ) then do;
1785732   +   _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1785733   +   _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1785734   +   _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1785735   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785736   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785737   +end;
MPRINT(EM_DIAGRAM):   end;
1785738   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785739   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785740   +   _dm12 = put( GRP_Recency , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Recency , BEST12. );
1785741   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785742   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1785743   +      _14_0 = -1;
MPRINT(EM_DIAGRAM):   _14_0 = -1;
1785744   +      _14_1 = -1;
MPRINT(EM_DIAGRAM):   _14_1 = -1;
1785745   +      _14_2 = -1;
MPRINT(EM_DIAGRAM):   _14_2 = -1;
1785746   +   end;
MPRINT(EM_DIAGRAM):   end;
1785747   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785748   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1785749   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1785750   +      _14_2 = 1;
MPRINT(EM_DIAGRAM):   _14_2 = 1;
1785751   +   end;
MPRINT(EM_DIAGRAM):   end;
1785752   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785753   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1785754   +      _14_1 = 1;
MPRINT(EM_DIAGRAM):   _14_1 = 1;
1785755   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1785756   +   end;
MPRINT(EM_DIAGRAM):   end;
1785757   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785758   +      _14_0 = 1;
MPRINT(EM_DIAGRAM):   _14_0 = 1;
1785759   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1785760   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1785761   +   end;
MPRINT(EM_DIAGRAM):   end;
1785762   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785763   +      _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1785764   +      _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1785765   +      _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1785766   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785767   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785768   +   end;
MPRINT(EM_DIAGRAM):   end;
1785769   +end;
MPRINT(EM_DIAGRAM):   end;
1785770   +
1785771   +*** If missing inputs, use averages;
MPRINT(EM_DIAGRAM):   *** If missing inputs, use averages;
1785772   +if _DM_BAD > 0 then do;
MPRINT(EM_DIAGRAM):   if _DM_BAD > 0 then do;
1785773   +   _P0 = 0.848778433;
MPRINT(EM_DIAGRAM):   _P0 = 0.848778433;
1785774   +   _P1 = 0.151221567;
MPRINT(EM_DIAGRAM):   _P1 = 0.151221567;
1785775   +   goto RULE3_1DR1;
MPRINT(EM_DIAGRAM):   goto RULE3_1DR1;
1785776   +end;
MPRINT(EM_DIAGRAM):   end;
1785777   +
1785778   +*** Compute Linear Predictor;
MPRINT(EM_DIAGRAM):   *** Compute Linear Predictor;
1785779   +drop _TEMP;
MPRINT(EM_DIAGRAM):   drop _TEMP;
1785780   +drop _LP0;
MPRINT(EM_DIAGRAM):   drop _LP0;
1785781   +_LP0 = 0;
MPRINT(EM_DIAGRAM):   _LP0 = 0;
1785782   +
1785783   +***  Effect: GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_AcceptedCmp5 ;
1785784   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785785   +_LP0 = _LP0 + (    0.99733656758775) * _TEMP * _1_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.99733656758775) * _TEMP * _1_0;
1785786   +
1785787   +***  Effect: GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Frq ;
1785788   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785789   +_LP0 = _LP0 + (   -2.23368933318007) * _TEMP * _2_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -2.23368933318007) * _TEMP * _2_0;
1785790   +_LP0 = _LP0 + (   -0.25095248894121) * _TEMP * _2_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.25095248894121) * _TEMP * _2_1;
1785791   +_LP0 = _LP0 + (     0.8387769347269) * _TEMP * _2_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.8387769347269) * _TEMP * _2_2;
1785792   +
1785793   +***  Effect: GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Income ;
1785794   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785795   +_LP0 = _LP0 + (   -0.99078035521361) * _TEMP * _3_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.99078035521361) * _TEMP * _3_0;
1785796   +_LP0 = _LP0 + (   -0.88661982524205) * _TEMP * _3_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.88661982524205) * _TEMP * _3_1;
1785797   +_LP0 = _LP0 + (    0.95470778586134) * _TEMP * _3_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.95470778586134) * _TEMP * _3_2;
1785798   +
1785799   +***  Effect: GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Mnt ;
1785800   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785801   +_LP0 = _LP0 + (    0.56285493845236) * _TEMP * _4_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.56285493845236) * _TEMP * _4_0;
1785802   +_LP0 = _LP0 + (    0.33650487164657) * _TEMP * _4_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.33650487164657) * _TEMP * _4_1;
1785803   +_LP0 = _LP0 + (   -0.26285568117112) * _TEMP * _4_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.26285568117112) * _TEMP * _4_2;
1785804   +
1785805   +***  Effect: GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntFishProducts ;
1785806   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785807   +_LP0 = _LP0 + (     -0.721500716476) * _TEMP * _5_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.721500716476) * _TEMP * _5_0;
1785808   +_LP0 = _LP0 + (   -0.08163727747607) * _TEMP * _5_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.08163727747607) * _TEMP * _5_1;
1785809   +_LP0 = _LP0 + (    0.08970108712955) * _TEMP * _5_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.08970108712955) * _TEMP * _5_2;
1785810   +
1785811   +***  Effect: GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntGoldProds ;
1785812   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785813   +_LP0 = _LP0 + (    0.23750271092964) * _TEMP * _6_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.23750271092964) * _TEMP * _6_0;
1785814   +_LP0 = _LP0 + (    0.04814501514157) * _TEMP * _6_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.04814501514157) * _TEMP * _6_1;
1785815   +_LP0 = _LP0 + (    0.00356893973566) * _TEMP * _6_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.00356893973566) * _TEMP * _6_2;
1785816   +
1785817   +***  Effect: GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntMeatProducts ;
1785818   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785819   +_LP0 = _LP0 + (    1.37278090702821) * _TEMP * _7_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.37278090702821) * _TEMP * _7_0;
1785820   +_LP0 = _LP0 + (    0.22207512218681) * _TEMP * _7_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.22207512218681) * _TEMP * _7_1;
1785821   +_LP0 = _LP0 + (   -0.53385403881984) * _TEMP * _7_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.53385403881984) * _TEMP * _7_2;
1785822   +
1785823   +***  Effect: GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntWines ;
1785824   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785825   +_LP0 = _LP0 + (   -1.11716202001212) * _TEMP * _8_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.11716202001212) * _TEMP * _8_0;
1785826   +_LP0 = _LP0 + (   -0.51167594500869) * _TEMP * _8_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.51167594500869) * _TEMP * _8_1;
1785827   +_LP0 = _LP0 + (    0.64784283470689) * _TEMP * _8_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.64784283470689) * _TEMP * _8_2;
1785828   +
1785829   +***  Effect: GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumCatalogPurchases ;
1785830   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785831   +_LP0 = _LP0 + (    1.01474391679706) * _TEMP * _9_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.01474391679706) * _TEMP * _9_0;
1785832   +_LP0 = _LP0 + (   -0.03038001206526) * _TEMP * _9_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.03038001206526) * _TEMP * _9_1;
1785833   +
1785834   +***  Effect: GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumDistPurchases ;
1785835   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785836   +_LP0 = _LP0 + (    2.66475250943038) * _TEMP * _10_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 2.66475250943038) * _TEMP * _10_0;
1785837   +_LP0 = _LP0 + (    0.04624841851569) * _TEMP * _10_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.04624841851569) * _TEMP * _10_1;
1785838   +_LP0 = _LP0 + (   -0.53479007375242) * _TEMP * _10_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.53479007375242) * _TEMP * _10_2;
1785839   +
1785840   +***  Effect: GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumWebPurchases ;
1785841   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785842   +_LP0 = _LP0 + (   -0.13829564901609) * _TEMP * _11_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.13829564901609) * _TEMP * _11_0;
1785843   +_LP0 = _LP0 + (   -0.12263501103992) * _TEMP * _11_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.12263501103992) * _TEMP * _11_1;
1785844   +_LP0 = _LP0 + (    0.02226799691206) * _TEMP * _11_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.02226799691206) * _TEMP * _11_2;
1785845   +
1785846   +***  Effect: GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RFMstat ;
1785847   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785848   +_LP0 = _LP0 + (    0.75053078016285) * _TEMP * _12_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.75053078016285) * _TEMP * _12_0;
1785849   +_LP0 = _LP0 + (    0.13674904177699) * _TEMP * _12_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.13674904177699) * _TEMP * _12_1;
1785850   +_LP0 = _LP0 + (   -0.28040137971405) * _TEMP * _12_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.28040137971405) * _TEMP * _12_2;
1785851   +
1785852   +***  Effect: GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RMntFrq ;
1785853   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785854   +_LP0 = _LP0 + (   -0.36702439031685) * _TEMP * _13_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.36702439031685) * _TEMP * _13_0;
1785855   +_LP0 = _LP0 + (   -0.24550330955003) * _TEMP * _13_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.24550330955003) * _TEMP * _13_1;
1785856   +_LP0 = _LP0 + (    0.69153126983534) * _TEMP * _13_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.69153126983534) * _TEMP * _13_2;
1785857   +
1785858   +***  Effect: GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Recency ;
1785859   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1785860   +_LP0 = _LP0 + (    -1.7633808694344) * _TEMP * _14_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.7633808694344) * _TEMP * _14_0;
1785861   +_LP0 = _LP0 + (   -0.48174022563147) * _TEMP * _14_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.48174022563147) * _TEMP * _14_1;
1785862   +_LP0 = _LP0 + (    0.55544312461752) * _TEMP * _14_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.55544312461752) * _TEMP * _14_2;
1785863   +
1785864   +***  Effect: Year_Birth ;
MPRINT(EM_DIAGRAM):   *** Effect: Year_Birth ;
1785865   +_TEMP = Year_Birth ;
MPRINT(EM_DIAGRAM):   _TEMP = Year_Birth ;
1785866   +_LP0 = _LP0 + (   -0.01709272489091 * _TEMP);
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.01709272489091 * _TEMP);
1785867   +
1785868   +*** Naive Posterior Probabilities;
MPRINT(EM_DIAGRAM):   *** Naive Posterior Probabilities;
1785869   +drop _MAXP _IY _P0 _P1;
MPRINT(EM_DIAGRAM):   drop _MAXP _IY _P0 _P1;
1785870   +_TEMP =      35.509534550978 + _LP0;
MPRINT(EM_DIAGRAM):   _TEMP = 35.509534550978 + _LP0;
1785871   +if (_TEMP < 0) then do;
MPRINT(EM_DIAGRAM):   if (_TEMP < 0) then do;
1785872   +   _TEMP = exp(_TEMP);
MPRINT(EM_DIAGRAM):   _TEMP = exp(_TEMP);
1785873   +   _P0 = _TEMP / (1 + _TEMP);
MPRINT(EM_DIAGRAM):   _P0 = _TEMP / (1 + _TEMP);
1785874   +end;
MPRINT(EM_DIAGRAM):   end;
1785875   +else _P0 = 1 / (1 + exp(-_TEMP));
MPRINT(EM_DIAGRAM):   else _P0 = 1 / (1 + exp(-_TEMP));
1785876   +_P1 = 1.0 - _P0;
MPRINT(EM_DIAGRAM):   _P1 = 1.0 - _P0;
1785877   +
1785878   +RULE3_1DR1:
1785879   +
1785880   +
1785881   +*** Posterior Probabilities and Predicted Level;
MPRINT(EM_DIAGRAM):   RULE3_1DR1: *** Posterior Probabilities and Predicted Level;
1785882   +label P__bin1 = 'Predicted: _bin=1' ;
MPRINT(EM_DIAGRAM):   label P__bin1 = 'Predicted: _bin=1' ;
1785883   +label P__bin0 = 'Predicted: _bin=0' ;
MPRINT(EM_DIAGRAM):   label P__bin0 = 'Predicted: _bin=0' ;
1785884   +P__bin1 = _P0;
MPRINT(EM_DIAGRAM):   P__bin1 = _P0;
1785885   +_MAXP = _P0;
MPRINT(EM_DIAGRAM):   _MAXP = _P0;
1785886   +_IY = 1;
MPRINT(EM_DIAGRAM):   _IY = 1;
1785887   +P__bin0 = _P1;
MPRINT(EM_DIAGRAM):   P__bin0 = _P1;
1785888   +if (_P1 >  _MAXP + 1E-8) then do;
MPRINT(EM_DIAGRAM):   if (_P1 > _MAXP + 1E-8) then do;
1785889   +   _MAXP = _P1;
MPRINT(EM_DIAGRAM):   _MAXP = _P1;
1785890   +   _IY = 2;
MPRINT(EM_DIAGRAM):   _IY = 2;
1785891   +end;
MPRINT(EM_DIAGRAM):   end;
1785892   +I__bin = RULE3_1DRF[_IY];
MPRINT(EM_DIAGRAM):   I__bin = RULE3_1DRF[_IY];
1785893   +U__bin = RULE3_1DRU[_IY];
MPRINT(EM_DIAGRAM):   U__bin = RULE3_1DRU[_IY];
1785894   +
1785895   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785896   +***** end scoring code for regression;
MPRINT(EM_DIAGRAM):   ***** end scoring code for regression;
1785897   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785898   +*;
MPRINT(EM_DIAGRAM):   *;
1785899   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1785900   +if I__bin eq '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin eq '1' then do;
1785901   +I_DepVar = ("0");
MPRINT(EM_DIAGRAM):   I_DepVar = ("0");
1785902   +%DMNORMCP(I_DepVar, I_DepVar);
MPRINT(DMNORMCP):   I_DepVar=dmnorm(I_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1785903   +P_DepVar0=P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar0=P__bin1;
1785904   +P_DepVar1 = 1-P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar1 = 1-P__bin1;
1785905   +end;
MPRINT(EM_DIAGRAM):   end;
1785906   +*;
MPRINT(EM_DIAGRAM):   *;
1785907   +*;
MPRINT(EM_DIAGRAM):   *;
1785908   +* END Binary Model for DepVar = 0;
MPRINT(EM_DIAGRAM):   * END Binary Model for DepVar = 0;
1785909   +;
MPRINT(EM_DIAGRAM):   ;
1785910   +*;
MPRINT(EM_DIAGRAM):   *;
1785911   +DROP P__bin1 P__bin0;
MPRINT(EM_DIAGRAM):   DROP P__bin1 P__bin0;
1785912   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785913   +*Binary model for DepVar = 1;
MPRINT(EM_DIAGRAM):   *Binary model for DepVar = 1;
1785914   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1785915   +*;
MPRINT(EM_DIAGRAM):   *;
1785916   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1785917   +if I__bin ne '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin ne '1' then do;
1785918   +*;
MPRINT(EM_DIAGRAM):   *;
1785919   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785920   +*** begin scoring code for regression;
MPRINT(EM_DIAGRAM):   *** begin scoring code for regression;
1785921   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1785922   +
1785923   +length _WARN_ $4;
MPRINT(EM_DIAGRAM):   length _WARN_ $4;
1785924   +label _WARN_ = 'Warnings' ;
MPRINT(EM_DIAGRAM):   label _WARN_ = 'Warnings' ;
1785925   +
1785926   +length I__bin $ 12;
MPRINT(EM_DIAGRAM):   length I__bin $ 12;
1785927   +label I__bin = 'Into: _bin' ;
MPRINT(EM_DIAGRAM):   label I__bin = 'Into: _bin' ;
1785928   +*** Target Values;
MPRINT(EM_DIAGRAM):   *** Target Values;
1785929   +array RULE3_2DRF [2] $12 _temporary_ ('1' '0' );
MPRINT(EM_DIAGRAM):   array RULE3_2DRF [2] $12 _temporary_ ('1' '0' );
1785930   +label U__bin = 'Unnormalized Into: _bin' ;
MPRINT(EM_DIAGRAM):   label U__bin = 'Unnormalized Into: _bin' ;
1785931   +length U__bin $ 12;
MPRINT(EM_DIAGRAM):   length U__bin $ 12;
1785932   +*** Unnormalized target values;
MPRINT(EM_DIAGRAM):   *** Unnormalized target values;
1785933   +array RULE3_2DRU[2] $ 12 _temporary_ ('1           '  '0           ' );
MPRINT(EM_DIAGRAM):   array RULE3_2DRU[2] $ 12 _temporary_ ('1           ' '0           ' );
1785934   +
1785935   +drop _DM_BAD;
MPRINT(EM_DIAGRAM):   drop _DM_BAD;
1785936   +_DM_BAD=0;
MPRINT(EM_DIAGRAM):   _DM_BAD=0;
1785937   +
1785938   +*** Check Year_Birth for missing values ;
MPRINT(EM_DIAGRAM):   *** Check Year_Birth for missing values ;
1785939   +if missing( Year_Birth ) then do;
MPRINT(EM_DIAGRAM):   if missing( Year_Birth ) then do;
1785940   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785941   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785942   +end;
MPRINT(EM_DIAGRAM):   end;
1785943   +
1785944   +*** Generate dummy variables for GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_AcceptedCmp5 ;
1785945   +drop _1_0 ;
MPRINT(EM_DIAGRAM):   drop _1_0 ;
1785946   +if missing( GRP_AcceptedCmp5 ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_AcceptedCmp5 ) then do;
1785947   +   _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1785948   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785949   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785950   +end;
MPRINT(EM_DIAGRAM):   end;
1785951   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785952   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785953   +   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_AcceptedCmp5 , BEST12. );
1785954   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785955   +   if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '2' then do;
1785956   +      _1_0 = 1;
MPRINT(EM_DIAGRAM):   _1_0 = 1;
1785957   +   end;
MPRINT(EM_DIAGRAM):   end;
1785958   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785959   +      _1_0 = -1;
MPRINT(EM_DIAGRAM):   _1_0 = -1;
1785960   +   end;
MPRINT(EM_DIAGRAM):   end;
1785961   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1785962   +      _1_0 = .;
MPRINT(EM_DIAGRAM):   _1_0 = .;
1785963   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1785964   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785965   +   end;
MPRINT(EM_DIAGRAM):   end;
1785966   +end;
MPRINT(EM_DIAGRAM):   end;
1785967   +
1785968   +*** Generate dummy variables for GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Frq ;
1785969   +drop _2_0 _2_1 _2_2 ;
MPRINT(EM_DIAGRAM):   drop _2_0 _2_1 _2_2 ;
1785970   +if missing( GRP_Frq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Frq ) then do;
1785971   +   _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1785972   +   _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1785973   +   _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1785974   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1785975   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1785976   +end;
MPRINT(EM_DIAGRAM):   end;
1785977   +else do;
MPRINT(EM_DIAGRAM):   else do;
1785978   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1785979   +   _dm12 = put( GRP_Frq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Frq , BEST12. );
1785980   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1785981   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1785982   +      _2_0 = -1;
MPRINT(EM_DIAGRAM):   _2_0 = -1;
1785983   +      _2_1 = -1;
MPRINT(EM_DIAGRAM):   _2_1 = -1;
1785984   +      _2_2 = -1;
MPRINT(EM_DIAGRAM):   _2_2 = -1;
1785985   +   end;
MPRINT(EM_DIAGRAM):   end;
1785986   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1785987   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1785988   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1785989   +      _2_2 = 1;
MPRINT(EM_DIAGRAM):   _2_2 = 1;
1785990   +   end;
MPRINT(EM_DIAGRAM):   end;
1785991   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1785992   +      _2_0 = 0;
MPRINT(EM_DIAGRAM):   _2_0 = 0;
1785993   +      _2_1 = 1;
MPRINT(EM_DIAGRAM):   _2_1 = 1;
1785994   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1785995   +   end;
MPRINT(EM_DIAGRAM):   end;
1785996   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1785997   +      _2_0 = 1;
MPRINT(EM_DIAGRAM):   _2_0 = 1;
1785998   +      _2_1 = 0;
MPRINT(EM_DIAGRAM):   _2_1 = 0;
1785999   +      _2_2 = 0;
MPRINT(EM_DIAGRAM):   _2_2 = 0;
1786000   +   end;
MPRINT(EM_DIAGRAM):   end;
1786001   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786002   +      _2_0 = .;
MPRINT(EM_DIAGRAM):   _2_0 = .;
1786003   +      _2_1 = .;
MPRINT(EM_DIAGRAM):   _2_1 = .;
1786004   +      _2_2 = .;
MPRINT(EM_DIAGRAM):   _2_2 = .;
1786005   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786006   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786007   +   end;
MPRINT(EM_DIAGRAM):   end;
1786008   +end;
MPRINT(EM_DIAGRAM):   end;
1786009   +
1786010   +*** Generate dummy variables for GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Income ;
1786011   +drop _3_0 _3_1 _3_2 ;
MPRINT(EM_DIAGRAM):   drop _3_0 _3_1 _3_2 ;
1786012   +if missing( GRP_Income ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Income ) then do;
1786013   +   _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1786014   +   _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1786015   +   _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1786016   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786017   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786018   +end;
MPRINT(EM_DIAGRAM):   end;
1786019   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786020   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786021   +   _dm12 = put( GRP_Income , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Income , BEST12. );
1786022   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786023   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786024   +      _3_0 = -1;
MPRINT(EM_DIAGRAM):   _3_0 = -1;
1786025   +      _3_1 = -1;
MPRINT(EM_DIAGRAM):   _3_1 = -1;
1786026   +      _3_2 = -1;
MPRINT(EM_DIAGRAM):   _3_2 = -1;
1786027   +   end;
MPRINT(EM_DIAGRAM):   end;
1786028   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786029   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1786030   +      _3_1 = 1;
MPRINT(EM_DIAGRAM):   _3_1 = 1;
1786031   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1786032   +   end;
MPRINT(EM_DIAGRAM):   end;
1786033   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786034   +      _3_0 = 1;
MPRINT(EM_DIAGRAM):   _3_0 = 1;
1786035   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1786036   +      _3_2 = 0;
MPRINT(EM_DIAGRAM):   _3_2 = 0;
1786037   +   end;
MPRINT(EM_DIAGRAM):   end;
1786038   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786039   +      _3_0 = 0;
MPRINT(EM_DIAGRAM):   _3_0 = 0;
1786040   +      _3_1 = 0;
MPRINT(EM_DIAGRAM):   _3_1 = 0;
1786041   +      _3_2 = 1;
MPRINT(EM_DIAGRAM):   _3_2 = 1;
1786042   +   end;
MPRINT(EM_DIAGRAM):   end;
1786043   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786044   +      _3_0 = .;
MPRINT(EM_DIAGRAM):   _3_0 = .;
1786045   +      _3_1 = .;
MPRINT(EM_DIAGRAM):   _3_1 = .;
1786046   +      _3_2 = .;
MPRINT(EM_DIAGRAM):   _3_2 = .;
1786047   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786048   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786049   +   end;
MPRINT(EM_DIAGRAM):   end;
1786050   +end;
MPRINT(EM_DIAGRAM):   end;
1786051   +
1786052   +*** Generate dummy variables for GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Mnt ;
1786053   +drop _4_0 _4_1 _4_2 ;
MPRINT(EM_DIAGRAM):   drop _4_0 _4_1 _4_2 ;
1786054   +if missing( GRP_Mnt ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Mnt ) then do;
1786055   +   _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1786056   +   _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1786057   +   _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1786058   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786059   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786060   +end;
MPRINT(EM_DIAGRAM):   end;
1786061   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786062   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786063   +   _dm12 = put( GRP_Mnt , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Mnt , BEST12. );
1786064   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786065   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786066   +      _4_0 = -1;
MPRINT(EM_DIAGRAM):   _4_0 = -1;
1786067   +      _4_1 = -1;
MPRINT(EM_DIAGRAM):   _4_1 = -1;
1786068   +      _4_2 = -1;
MPRINT(EM_DIAGRAM):   _4_2 = -1;
1786069   +   end;
MPRINT(EM_DIAGRAM):   end;
1786070   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786071   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1786072   +      _4_1 = 1;
MPRINT(EM_DIAGRAM):   _4_1 = 1;
1786073   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1786074   +   end;
MPRINT(EM_DIAGRAM):   end;
1786075   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786076   +      _4_0 = 0;
MPRINT(EM_DIAGRAM):   _4_0 = 0;
1786077   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1786078   +      _4_2 = 1;
MPRINT(EM_DIAGRAM):   _4_2 = 1;
1786079   +   end;
MPRINT(EM_DIAGRAM):   end;
1786080   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786081   +      _4_0 = 1;
MPRINT(EM_DIAGRAM):   _4_0 = 1;
1786082   +      _4_1 = 0;
MPRINT(EM_DIAGRAM):   _4_1 = 0;
1786083   +      _4_2 = 0;
MPRINT(EM_DIAGRAM):   _4_2 = 0;
1786084   +   end;
MPRINT(EM_DIAGRAM):   end;
1786085   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786086   +      _4_0 = .;
MPRINT(EM_DIAGRAM):   _4_0 = .;
1786087   +      _4_1 = .;
MPRINT(EM_DIAGRAM):   _4_1 = .;
1786088   +      _4_2 = .;
MPRINT(EM_DIAGRAM):   _4_2 = .;
1786089   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786090   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786091   +   end;
MPRINT(EM_DIAGRAM):   end;
1786092   +end;
MPRINT(EM_DIAGRAM):   end;
1786093   +
1786094   +*** Generate dummy variables for GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntFishProducts ;
1786095   +drop _5_0 _5_1 _5_2 ;
MPRINT(EM_DIAGRAM):   drop _5_0 _5_1 _5_2 ;
1786096   +if missing( GRP_MntFishProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntFishProducts ) then do;
1786097   +   _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1786098   +   _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1786099   +   _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1786100   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786101   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786102   +end;
MPRINT(EM_DIAGRAM):   end;
1786103   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786104   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786105   +   _dm12 = put( GRP_MntFishProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntFishProducts , BEST12. );
1786106   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786107   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786108   +      _5_0 = -1;
MPRINT(EM_DIAGRAM):   _5_0 = -1;
1786109   +      _5_1 = -1;
MPRINT(EM_DIAGRAM):   _5_1 = -1;
1786110   +      _5_2 = -1;
MPRINT(EM_DIAGRAM):   _5_2 = -1;
1786111   +   end;
MPRINT(EM_DIAGRAM):   end;
1786112   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786113   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1786114   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1786115   +      _5_2 = 1;
MPRINT(EM_DIAGRAM):   _5_2 = 1;
1786116   +   end;
MPRINT(EM_DIAGRAM):   end;
1786117   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786118   +      _5_0 = 1;
MPRINT(EM_DIAGRAM):   _5_0 = 1;
1786119   +      _5_1 = 0;
MPRINT(EM_DIAGRAM):   _5_1 = 0;
1786120   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1786121   +   end;
MPRINT(EM_DIAGRAM):   end;
1786122   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786123   +      _5_0 = 0;
MPRINT(EM_DIAGRAM):   _5_0 = 0;
1786124   +      _5_1 = 1;
MPRINT(EM_DIAGRAM):   _5_1 = 1;
1786125   +      _5_2 = 0;
MPRINT(EM_DIAGRAM):   _5_2 = 0;
1786126   +   end;
MPRINT(EM_DIAGRAM):   end;
1786127   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786128   +      _5_0 = .;
MPRINT(EM_DIAGRAM):   _5_0 = .;
1786129   +      _5_1 = .;
MPRINT(EM_DIAGRAM):   _5_1 = .;
1786130   +      _5_2 = .;
MPRINT(EM_DIAGRAM):   _5_2 = .;
1786131   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786132   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786133   +   end;
MPRINT(EM_DIAGRAM):   end;
1786134   +end;
MPRINT(EM_DIAGRAM):   end;
1786135   +
1786136   +*** Generate dummy variables for GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntGoldProds ;
1786137   +drop _6_0 _6_1 _6_2 ;
MPRINT(EM_DIAGRAM):   drop _6_0 _6_1 _6_2 ;
1786138   +if missing( GRP_MntGoldProds ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntGoldProds ) then do;
1786139   +   _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1786140   +   _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1786141   +   _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1786142   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786143   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786144   +end;
MPRINT(EM_DIAGRAM):   end;
1786145   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786146   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786147   +   _dm12 = put( GRP_MntGoldProds , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntGoldProds , BEST12. );
1786148   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786149   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786150   +      _6_0 = -1;
MPRINT(EM_DIAGRAM):   _6_0 = -1;
1786151   +      _6_1 = -1;
MPRINT(EM_DIAGRAM):   _6_1 = -1;
1786152   +      _6_2 = -1;
MPRINT(EM_DIAGRAM):   _6_2 = -1;
1786153   +   end;
MPRINT(EM_DIAGRAM):   end;
1786154   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786155   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1786156   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1786157   +      _6_2 = 1;
MPRINT(EM_DIAGRAM):   _6_2 = 1;
1786158   +   end;
MPRINT(EM_DIAGRAM):   end;
1786159   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786160   +      _6_0 = 0;
MPRINT(EM_DIAGRAM):   _6_0 = 0;
1786161   +      _6_1 = 1;
MPRINT(EM_DIAGRAM):   _6_1 = 1;
1786162   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1786163   +   end;
MPRINT(EM_DIAGRAM):   end;
1786164   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786165   +      _6_0 = 1;
MPRINT(EM_DIAGRAM):   _6_0 = 1;
1786166   +      _6_1 = 0;
MPRINT(EM_DIAGRAM):   _6_1 = 0;
1786167   +      _6_2 = 0;
MPRINT(EM_DIAGRAM):   _6_2 = 0;
1786168   +   end;
MPRINT(EM_DIAGRAM):   end;
1786169   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786170   +      _6_0 = .;
MPRINT(EM_DIAGRAM):   _6_0 = .;
1786171   +      _6_1 = .;
MPRINT(EM_DIAGRAM):   _6_1 = .;
1786172   +      _6_2 = .;
MPRINT(EM_DIAGRAM):   _6_2 = .;
1786173   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786174   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786175   +   end;
MPRINT(EM_DIAGRAM):   end;
1786176   +end;
MPRINT(EM_DIAGRAM):   end;
1786177   +
1786178   +*** Generate dummy variables for GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntMeatProducts ;
1786179   +drop _7_0 _7_1 _7_2 ;
MPRINT(EM_DIAGRAM):   drop _7_0 _7_1 _7_2 ;
1786180   +if missing( GRP_MntMeatProducts ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntMeatProducts ) then do;
1786181   +   _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1786182   +   _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1786183   +   _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1786184   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786185   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786186   +end;
MPRINT(EM_DIAGRAM):   end;
1786187   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786188   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786189   +   _dm12 = put( GRP_MntMeatProducts , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntMeatProducts , BEST12. );
1786190   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786191   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786192   +      _7_0 = -1;
MPRINT(EM_DIAGRAM):   _7_0 = -1;
1786193   +      _7_1 = -1;
MPRINT(EM_DIAGRAM):   _7_1 = -1;
1786194   +      _7_2 = -1;
MPRINT(EM_DIAGRAM):   _7_2 = -1;
1786195   +   end;
MPRINT(EM_DIAGRAM):   end;
1786196   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786197   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1786198   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1786199   +      _7_2 = 1;
MPRINT(EM_DIAGRAM):   _7_2 = 1;
1786200   +   end;
MPRINT(EM_DIAGRAM):   end;
1786201   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786202   +      _7_0 = 0;
MPRINT(EM_DIAGRAM):   _7_0 = 0;
1786203   +      _7_1 = 1;
MPRINT(EM_DIAGRAM):   _7_1 = 1;
1786204   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1786205   +   end;
MPRINT(EM_DIAGRAM):   end;
1786206   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786207   +      _7_0 = 1;
MPRINT(EM_DIAGRAM):   _7_0 = 1;
1786208   +      _7_1 = 0;
MPRINT(EM_DIAGRAM):   _7_1 = 0;
1786209   +      _7_2 = 0;
MPRINT(EM_DIAGRAM):   _7_2 = 0;
1786210   +   end;
MPRINT(EM_DIAGRAM):   end;
1786211   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786212   +      _7_0 = .;
MPRINT(EM_DIAGRAM):   _7_0 = .;
1786213   +      _7_1 = .;
MPRINT(EM_DIAGRAM):   _7_1 = .;
1786214   +      _7_2 = .;
MPRINT(EM_DIAGRAM):   _7_2 = .;
1786215   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786216   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786217   +   end;
MPRINT(EM_DIAGRAM):   end;
1786218   +end;
MPRINT(EM_DIAGRAM):   end;
1786219   +
1786220   +*** Generate dummy variables for GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_MntWines ;
1786221   +drop _8_0 _8_1 _8_2 ;
MPRINT(EM_DIAGRAM):   drop _8_0 _8_1 _8_2 ;
1786222   +if missing( GRP_MntWines ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_MntWines ) then do;
1786223   +   _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1786224   +   _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1786225   +   _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1786226   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786227   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786228   +end;
MPRINT(EM_DIAGRAM):   end;
1786229   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786230   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786231   +   _dm12 = put( GRP_MntWines , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_MntWines , BEST12. );
1786232   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786233   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786234   +      _8_0 = -1;
MPRINT(EM_DIAGRAM):   _8_0 = -1;
1786235   +      _8_1 = -1;
MPRINT(EM_DIAGRAM):   _8_1 = -1;
1786236   +      _8_2 = -1;
MPRINT(EM_DIAGRAM):   _8_2 = -1;
1786237   +   end;
MPRINT(EM_DIAGRAM):   end;
1786238   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786239   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1786240   +      _8_1 = 1;
MPRINT(EM_DIAGRAM):   _8_1 = 1;
1786241   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1786242   +   end;
MPRINT(EM_DIAGRAM):   end;
1786243   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786244   +      _8_0 = 0;
MPRINT(EM_DIAGRAM):   _8_0 = 0;
1786245   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1786246   +      _8_2 = 1;
MPRINT(EM_DIAGRAM):   _8_2 = 1;
1786247   +   end;
MPRINT(EM_DIAGRAM):   end;
1786248   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786249   +      _8_0 = 1;
MPRINT(EM_DIAGRAM):   _8_0 = 1;
1786250   +      _8_1 = 0;
MPRINT(EM_DIAGRAM):   _8_1 = 0;
1786251   +      _8_2 = 0;
MPRINT(EM_DIAGRAM):   _8_2 = 0;
1786252   +   end;
MPRINT(EM_DIAGRAM):   end;
1786253   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786254   +      _8_0 = .;
MPRINT(EM_DIAGRAM):   _8_0 = .;
1786255   +      _8_1 = .;
MPRINT(EM_DIAGRAM):   _8_1 = .;
1786256   +      _8_2 = .;
MPRINT(EM_DIAGRAM):   _8_2 = .;
1786257   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786258   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786259   +   end;
MPRINT(EM_DIAGRAM):   end;
1786260   +end;
MPRINT(EM_DIAGRAM):   end;
1786261   +
1786262   +*** Generate dummy variables for GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumCatalogPurchases ;
1786263   +drop _9_0 _9_1 ;
MPRINT(EM_DIAGRAM):   drop _9_0 _9_1 ;
1786264   +if missing( GRP_NumCatalogPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumCatalogPurchases ) then do;
1786265   +   _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1786266   +   _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1786267   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786268   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786269   +end;
MPRINT(EM_DIAGRAM):   end;
1786270   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786271   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786272   +   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumCatalogPurchases , BEST12. );
1786273   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786274   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786275   +      _9_0 = -1;
MPRINT(EM_DIAGRAM):   _9_0 = -1;
1786276   +      _9_1 = -1;
MPRINT(EM_DIAGRAM):   _9_1 = -1;
1786277   +   end;
MPRINT(EM_DIAGRAM):   end;
1786278   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786279   +      _9_0 = 1;
MPRINT(EM_DIAGRAM):   _9_0 = 1;
1786280   +      _9_1 = 0;
MPRINT(EM_DIAGRAM):   _9_1 = 0;
1786281   +   end;
MPRINT(EM_DIAGRAM):   end;
1786282   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786283   +      _9_0 = 0;
MPRINT(EM_DIAGRAM):   _9_0 = 0;
1786284   +      _9_1 = 1;
MPRINT(EM_DIAGRAM):   _9_1 = 1;
1786285   +   end;
MPRINT(EM_DIAGRAM):   end;
1786286   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786287   +      _9_0 = .;
MPRINT(EM_DIAGRAM):   _9_0 = .;
1786288   +      _9_1 = .;
MPRINT(EM_DIAGRAM):   _9_1 = .;
1786289   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786290   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786291   +   end;
MPRINT(EM_DIAGRAM):   end;
1786292   +end;
MPRINT(EM_DIAGRAM):   end;
1786293   +
1786294   +*** Generate dummy variables for GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumDistPurchases ;
1786295   +drop _10_0 _10_1 _10_2 ;
MPRINT(EM_DIAGRAM):   drop _10_0 _10_1 _10_2 ;
1786296   +if missing( GRP_NumDistPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumDistPurchases ) then do;
1786297   +   _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1786298   +   _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1786299   +   _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1786300   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786301   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786302   +end;
MPRINT(EM_DIAGRAM):   end;
1786303   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786304   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786305   +   _dm12 = put( GRP_NumDistPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumDistPurchases , BEST12. );
1786306   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786307   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786308   +      _10_0 = -1;
MPRINT(EM_DIAGRAM):   _10_0 = -1;
1786309   +      _10_1 = -1;
MPRINT(EM_DIAGRAM):   _10_1 = -1;
1786310   +      _10_2 = -1;
MPRINT(EM_DIAGRAM):   _10_2 = -1;
1786311   +   end;
MPRINT(EM_DIAGRAM):   end;
1786312   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786313   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1786314   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1786315   +      _10_2 = 1;
MPRINT(EM_DIAGRAM):   _10_2 = 1;
1786316   +   end;
MPRINT(EM_DIAGRAM):   end;
1786317   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786318   +      _10_0 = 0;
MPRINT(EM_DIAGRAM):   _10_0 = 0;
1786319   +      _10_1 = 1;
MPRINT(EM_DIAGRAM):   _10_1 = 1;
1786320   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1786321   +   end;
MPRINT(EM_DIAGRAM):   end;
1786322   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786323   +      _10_0 = 1;
MPRINT(EM_DIAGRAM):   _10_0 = 1;
1786324   +      _10_1 = 0;
MPRINT(EM_DIAGRAM):   _10_1 = 0;
1786325   +      _10_2 = 0;
MPRINT(EM_DIAGRAM):   _10_2 = 0;
1786326   +   end;
MPRINT(EM_DIAGRAM):   end;
1786327   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786328   +      _10_0 = .;
MPRINT(EM_DIAGRAM):   _10_0 = .;
1786329   +      _10_1 = .;
MPRINT(EM_DIAGRAM):   _10_1 = .;
1786330   +      _10_2 = .;
MPRINT(EM_DIAGRAM):   _10_2 = .;
1786331   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786332   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786333   +   end;
MPRINT(EM_DIAGRAM):   end;
1786334   +end;
MPRINT(EM_DIAGRAM):   end;
1786335   +
1786336   +*** Generate dummy variables for GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_NumWebPurchases ;
1786337   +drop _11_0 _11_1 _11_2 ;
MPRINT(EM_DIAGRAM):   drop _11_0 _11_1 _11_2 ;
1786338   +if missing( GRP_NumWebPurchases ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_NumWebPurchases ) then do;
1786339   +   _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1786340   +   _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1786341   +   _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1786342   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786343   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786344   +end;
MPRINT(EM_DIAGRAM):   end;
1786345   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786346   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786347   +   _dm12 = put( GRP_NumWebPurchases , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_NumWebPurchases , BEST12. );
1786348   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786349   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786350   +      _11_0 = -1;
MPRINT(EM_DIAGRAM):   _11_0 = -1;
1786351   +      _11_1 = -1;
MPRINT(EM_DIAGRAM):   _11_1 = -1;
1786352   +      _11_2 = -1;
MPRINT(EM_DIAGRAM):   _11_2 = -1;
1786353   +   end;
MPRINT(EM_DIAGRAM):   end;
1786354   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786355   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1786356   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1786357   +      _11_2 = 1;
MPRINT(EM_DIAGRAM):   _11_2 = 1;
1786358   +   end;
MPRINT(EM_DIAGRAM):   end;
1786359   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786360   +      _11_0 = 0;
MPRINT(EM_DIAGRAM):   _11_0 = 0;
1786361   +      _11_1 = 1;
MPRINT(EM_DIAGRAM):   _11_1 = 1;
1786362   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1786363   +   end;
MPRINT(EM_DIAGRAM):   end;
1786364   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786365   +      _11_0 = 1;
MPRINT(EM_DIAGRAM):   _11_0 = 1;
1786366   +      _11_1 = 0;
MPRINT(EM_DIAGRAM):   _11_1 = 0;
1786367   +      _11_2 = 0;
MPRINT(EM_DIAGRAM):   _11_2 = 0;
1786368   +   end;
MPRINT(EM_DIAGRAM):   end;
1786369   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786370   +      _11_0 = .;
MPRINT(EM_DIAGRAM):   _11_0 = .;
1786371   +      _11_1 = .;
MPRINT(EM_DIAGRAM):   _11_1 = .;
1786372   +      _11_2 = .;
MPRINT(EM_DIAGRAM):   _11_2 = .;
1786373   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786374   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786375   +   end;
MPRINT(EM_DIAGRAM):   end;
1786376   +end;
MPRINT(EM_DIAGRAM):   end;
1786377   +
1786378   +*** Generate dummy variables for GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RFMstat ;
1786379   +drop _12_0 _12_1 _12_2 ;
MPRINT(EM_DIAGRAM):   drop _12_0 _12_1 _12_2 ;
1786380   +if missing( GRP_RFMstat ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RFMstat ) then do;
1786381   +   _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1786382   +   _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1786383   +   _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1786384   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786385   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786386   +end;
MPRINT(EM_DIAGRAM):   end;
1786387   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786388   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786389   +   _dm12 = put( GRP_RFMstat , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RFMstat , BEST12. );
1786390   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786391   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786392   +      _12_0 = -1;
MPRINT(EM_DIAGRAM):   _12_0 = -1;
1786393   +      _12_1 = -1;
MPRINT(EM_DIAGRAM):   _12_1 = -1;
1786394   +      _12_2 = -1;
MPRINT(EM_DIAGRAM):   _12_2 = -1;
1786395   +   end;
MPRINT(EM_DIAGRAM):   end;
1786396   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786397   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1786398   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1786399   +      _12_2 = 1;
MPRINT(EM_DIAGRAM):   _12_2 = 1;
1786400   +   end;
MPRINT(EM_DIAGRAM):   end;
1786401   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786402   +      _12_0 = 0;
MPRINT(EM_DIAGRAM):   _12_0 = 0;
1786403   +      _12_1 = 1;
MPRINT(EM_DIAGRAM):   _12_1 = 1;
1786404   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1786405   +   end;
MPRINT(EM_DIAGRAM):   end;
1786406   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786407   +      _12_0 = 1;
MPRINT(EM_DIAGRAM):   _12_0 = 1;
1786408   +      _12_1 = 0;
MPRINT(EM_DIAGRAM):   _12_1 = 0;
1786409   +      _12_2 = 0;
MPRINT(EM_DIAGRAM):   _12_2 = 0;
1786410   +   end;
MPRINT(EM_DIAGRAM):   end;
1786411   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786412   +      _12_0 = .;
MPRINT(EM_DIAGRAM):   _12_0 = .;
1786413   +      _12_1 = .;
MPRINT(EM_DIAGRAM):   _12_1 = .;
1786414   +      _12_2 = .;
MPRINT(EM_DIAGRAM):   _12_2 = .;
1786415   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786416   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786417   +   end;
MPRINT(EM_DIAGRAM):   end;
1786418   +end;
MPRINT(EM_DIAGRAM):   end;
1786419   +
1786420   +*** Generate dummy variables for GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_RMntFrq ;
1786421   +drop _13_0 _13_1 _13_2 ;
MPRINT(EM_DIAGRAM):   drop _13_0 _13_1 _13_2 ;
1786422   +if missing( GRP_RMntFrq ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_RMntFrq ) then do;
1786423   +   _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1786424   +   _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1786425   +   _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1786426   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786427   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786428   +end;
MPRINT(EM_DIAGRAM):   end;
1786429   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786430   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786431   +   _dm12 = put( GRP_RMntFrq , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_RMntFrq , BEST12. );
1786432   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786433   +   if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '5' then do;
1786434   +      _13_0 = -1;
MPRINT(EM_DIAGRAM):   _13_0 = -1;
1786435   +      _13_1 = -1;
MPRINT(EM_DIAGRAM):   _13_1 = -1;
1786436   +      _13_2 = -1;
MPRINT(EM_DIAGRAM):   _13_2 = -1;
1786437   +   end;
MPRINT(EM_DIAGRAM):   end;
1786438   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786439   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1786440   +      _13_1 = 1;
MPRINT(EM_DIAGRAM):   _13_1 = 1;
1786441   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1786442   +   end;
MPRINT(EM_DIAGRAM):   end;
1786443   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786444   +      _13_0 = 0;
MPRINT(EM_DIAGRAM):   _13_0 = 0;
1786445   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1786446   +      _13_2 = 1;
MPRINT(EM_DIAGRAM):   _13_2 = 1;
1786447   +   end;
MPRINT(EM_DIAGRAM):   end;
1786448   +   else if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '2' then do;
1786449   +      _13_0 = 1;
MPRINT(EM_DIAGRAM):   _13_0 = 1;
1786450   +      _13_1 = 0;
MPRINT(EM_DIAGRAM):   _13_1 = 0;
1786451   +      _13_2 = 0;
MPRINT(EM_DIAGRAM):   _13_2 = 0;
1786452   +   end;
MPRINT(EM_DIAGRAM):   end;
1786453   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786454   +      _13_0 = .;
MPRINT(EM_DIAGRAM):   _13_0 = .;
1786455   +      _13_1 = .;
MPRINT(EM_DIAGRAM):   _13_1 = .;
1786456   +      _13_2 = .;
MPRINT(EM_DIAGRAM):   _13_2 = .;
1786457   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786458   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786459   +   end;
MPRINT(EM_DIAGRAM):   end;
1786460   +end;
MPRINT(EM_DIAGRAM):   end;
1786461   +
1786462   +*** Generate dummy variables for GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Generate dummy variables for GRP_Recency ;
1786463   +drop _14_0 _14_1 _14_2 ;
MPRINT(EM_DIAGRAM):   drop _14_0 _14_1 _14_2 ;
1786464   +if missing( GRP_Recency ) then do;
MPRINT(EM_DIAGRAM):   if missing( GRP_Recency ) then do;
1786465   +   _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1786466   +   _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1786467   +   _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1786468   +   substr(_warn_,1,1) = 'M';
MPRINT(EM_DIAGRAM):   substr(_warn_,1,1) = 'M';
1786469   +   _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786470   +end;
MPRINT(EM_DIAGRAM):   end;
The SAS System
 
1786471   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786472   +   length _dm12 $ 12; drop _dm12 ;
MPRINT(EM_DIAGRAM):   length _dm12 $ 12;
MPRINT(EM_DIAGRAM):   drop _dm12 ;
1786473   +   _dm12 = put( GRP_Recency , BEST12. );
MPRINT(EM_DIAGRAM):   _dm12 = put( GRP_Recency , BEST12. );
1786474   +   %DMNORMIP( _dm12 )
MPRINT(DMNORMIP):   call dmnorm(_dm12,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
1786475   +   if _dm12 = '2'  then do;
MPRINT(EM_DIAGRAM):   if _dm12 = '2' then do;
1786476   +      _14_0 = 1;
MPRINT(EM_DIAGRAM):   _14_0 = 1;
1786477   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1786478   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1786479   +   end;
MPRINT(EM_DIAGRAM):   end;
1786480   +   else if _dm12 = '3'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '3' then do;
1786481   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1786482   +      _14_1 = 1;
MPRINT(EM_DIAGRAM):   _14_1 = 1;
1786483   +      _14_2 = 0;
MPRINT(EM_DIAGRAM):   _14_2 = 0;
1786484   +   end;
MPRINT(EM_DIAGRAM):   end;
1786485   +   else if _dm12 = '4'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '4' then do;
1786486   +      _14_0 = 0;
MPRINT(EM_DIAGRAM):   _14_0 = 0;
1786487   +      _14_1 = 0;
MPRINT(EM_DIAGRAM):   _14_1 = 0;
1786488   +      _14_2 = 1;
MPRINT(EM_DIAGRAM):   _14_2 = 1;
1786489   +   end;
MPRINT(EM_DIAGRAM):   end;
1786490   +   else if _dm12 = '5'  then do;
MPRINT(EM_DIAGRAM):   else if _dm12 = '5' then do;
1786491   +      _14_0 = -1;
MPRINT(EM_DIAGRAM):   _14_0 = -1;
1786492   +      _14_1 = -1;
MPRINT(EM_DIAGRAM):   _14_1 = -1;
1786493   +      _14_2 = -1;
MPRINT(EM_DIAGRAM):   _14_2 = -1;
1786494   +   end;
MPRINT(EM_DIAGRAM):   end;
1786495   +   else do;
MPRINT(EM_DIAGRAM):   else do;
1786496   +      _14_0 = .;
MPRINT(EM_DIAGRAM):   _14_0 = .;
1786497   +      _14_1 = .;
MPRINT(EM_DIAGRAM):   _14_1 = .;
1786498   +      _14_2 = .;
MPRINT(EM_DIAGRAM):   _14_2 = .;
1786499   +      substr(_warn_,2,1) = 'U';
MPRINT(EM_DIAGRAM):   substr(_warn_,2,1) = 'U';
1786500   +      _DM_BAD = 1;
MPRINT(EM_DIAGRAM):   _DM_BAD = 1;
1786501   +   end;
MPRINT(EM_DIAGRAM):   end;
1786502   +end;
MPRINT(EM_DIAGRAM):   end;
1786503   +
1786504   +*** If missing inputs, use averages;
MPRINT(EM_DIAGRAM):   *** If missing inputs, use averages;
1786505   +if _DM_BAD > 0 then do;
MPRINT(EM_DIAGRAM):   if _DM_BAD > 0 then do;
1786506   +   _P0 = 0.8348837209;
MPRINT(EM_DIAGRAM):   _P0 = 0.8348837209;
1786507   +   _P1 = 0.1651162791;
MPRINT(EM_DIAGRAM):   _P1 = 0.1651162791;
1786508   +   goto RULE3_2DR1;
MPRINT(EM_DIAGRAM):   goto RULE3_2DR1;
1786509   +end;
MPRINT(EM_DIAGRAM):   end;
1786510   +
1786511   +*** Compute Linear Predictor;
MPRINT(EM_DIAGRAM):   *** Compute Linear Predictor;
1786512   +drop _TEMP;
MPRINT(EM_DIAGRAM):   drop _TEMP;
1786513   +drop _LP0;
MPRINT(EM_DIAGRAM):   drop _LP0;
1786514   +_LP0 = 0;
MPRINT(EM_DIAGRAM):   _LP0 = 0;
1786515   +
1786516   +***  Effect: GRP_AcceptedCmp5 ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_AcceptedCmp5 ;
1786517   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786518   +_LP0 = _LP0 + (     0.2755854906389) * _TEMP * _1_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.2755854906389) * _TEMP * _1_0;
1786519   +
1786520   +***  Effect: GRP_Frq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Frq ;
1786521   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786522   +_LP0 = _LP0 + (   -3.75810078867511) * _TEMP * _2_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -3.75810078867511) * _TEMP * _2_0;
1786523   +_LP0 = _LP0 + (    0.54972535728544) * _TEMP * _2_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.54972535728544) * _TEMP * _2_1;
1786524   +_LP0 = _LP0 + (     1.1432462397042) * _TEMP * _2_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.1432462397042) * _TEMP * _2_2;
1786525   +
1786526   +***  Effect: GRP_Income ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Income ;
1786527   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786528   +_LP0 = _LP0 + (   -1.97297373633573) * _TEMP * _3_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.97297373633573) * _TEMP * _3_0;
1786529   +_LP0 = _LP0 + (   -0.67820578191593) * _TEMP * _3_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.67820578191593) * _TEMP * _3_1;
1786530   +_LP0 = _LP0 + (    1.37979656554052) * _TEMP * _3_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.37979656554052) * _TEMP * _3_2;
1786531   +
1786532   +***  Effect: GRP_Mnt ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Mnt ;
1786533   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786534   +_LP0 = _LP0 + (    3.56520060916351) * _TEMP * _4_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 3.56520060916351) * _TEMP * _4_0;
1786535   +_LP0 = _LP0 + (    0.27230485121635) * _TEMP * _4_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.27230485121635) * _TEMP * _4_1;
1786536   +_LP0 = _LP0 + (   -1.78790448642515) * _TEMP * _4_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.78790448642515) * _TEMP * _4_2;
1786537   +
1786538   +***  Effect: GRP_MntFishProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntFishProducts ;
1786539   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786540   +_LP0 = _LP0 + (   -0.72129392998676) * _TEMP * _5_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.72129392998676) * _TEMP * _5_0;
1786541   +_LP0 = _LP0 + (    0.38499939670176) * _TEMP * _5_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.38499939670176) * _TEMP * _5_1;
1786542   +_LP0 = _LP0 + (    0.22388001037485) * _TEMP * _5_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.22388001037485) * _TEMP * _5_2;
1786543   +
1786544   +***  Effect: GRP_MntGoldProds ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntGoldProds ;
1786545   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786546   +_LP0 = _LP0 + (    0.76717357691553) * _TEMP * _6_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.76717357691553) * _TEMP * _6_0;
1786547   +_LP0 = _LP0 + (   -0.24937326232659) * _TEMP * _6_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.24937326232659) * _TEMP * _6_1;
1786548   +_LP0 = _LP0 + (    0.11092888065087) * _TEMP * _6_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.11092888065087) * _TEMP * _6_2;
1786549   +
1786550   +***  Effect: GRP_MntMeatProducts ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntMeatProducts ;
1786551   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786552   +_LP0 = _LP0 + (    2.39898778191823) * _TEMP * _7_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 2.39898778191823) * _TEMP * _7_0;
1786553   +_LP0 = _LP0 + (    0.55195796238636) * _TEMP * _7_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.55195796238636) * _TEMP * _7_1;
1786554   +_LP0 = _LP0 + (   -1.40436175575026) * _TEMP * _7_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -1.40436175575026) * _TEMP * _7_2;
1786555   +
1786556   +***  Effect: GRP_MntWines ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_MntWines ;
1786557   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786558   +_LP0 = _LP0 + (    0.84803792934378) * _TEMP * _8_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.84803792934378) * _TEMP * _8_0;
1786559   +_LP0 = _LP0 + (    0.20838403498632) * _TEMP * _8_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.20838403498632) * _TEMP * _8_1;
1786560   +_LP0 = _LP0 + (   -0.45106764907277) * _TEMP * _8_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.45106764907277) * _TEMP * _8_2;
1786561   +
1786562   +***  Effect: GRP_NumCatalogPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumCatalogPurchases ;
1786563   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786564   +_LP0 = _LP0 + (    1.39844808004489) * _TEMP * _9_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 1.39844808004489) * _TEMP * _9_0;
1786565   +_LP0 = _LP0 + (   -0.32023677204533) * _TEMP * _9_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.32023677204533) * _TEMP * _9_1;
1786566   +
1786567   +***  Effect: GRP_NumDistPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumDistPurchases ;
1786568   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786569   +_LP0 = _LP0 + (    9.48183440350088) * _TEMP * _10_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 9.48183440350088) * _TEMP * _10_0;
1786570   +_LP0 = _LP0 + (   -3.69312594582071) * _TEMP * _10_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -3.69312594582071) * _TEMP * _10_1;
1786571   +_LP0 = _LP0 + (   -2.42567033749322) * _TEMP * _10_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -2.42567033749322) * _TEMP * _10_2;
1786572   +
1786573   +***  Effect: GRP_NumWebPurchases ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_NumWebPurchases ;
1786574   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786575   +_LP0 = _LP0 + (    0.73155492362896) * _TEMP * _11_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.73155492362896) * _TEMP * _11_0;
1786576   +_LP0 = _LP0 + (    -0.0632363477256) * _TEMP * _11_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.0632363477256) * _TEMP * _11_1;
1786577   +_LP0 = _LP0 + (   -0.23160884340405) * _TEMP * _11_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.23160884340405) * _TEMP * _11_2;
1786578   +
1786579   +***  Effect: GRP_RFMstat ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RFMstat ;
1786580   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786581   +_LP0 = _LP0 + (    0.80547627121444) * _TEMP * _12_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.80547627121444) * _TEMP * _12_0;
1786582   +_LP0 = _LP0 + (    0.18872433644203) * _TEMP * _12_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 0.18872433644203) * _TEMP * _12_1;
1786583   +_LP0 = _LP0 + (   -0.00439389281149) * _TEMP * _12_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.00439389281149) * _TEMP * _12_2;
1786584   +
1786585   +***  Effect: GRP_RMntFrq ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_RMntFrq ;
1786586   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786587   +_LP0 = _LP0 + (   -4.38345957326098) * _TEMP * _13_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -4.38345957326098) * _TEMP * _13_0;
1786588   +_LP0 = _LP0 + (   -0.82877013686493) * _TEMP * _13_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.82877013686493) * _TEMP * _13_1;
1786589   +_LP0 = _LP0 + (    2.87379405520898) * _TEMP * _13_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( 2.87379405520898) * _TEMP * _13_2;
1786590   +
1786591   +***  Effect: GRP_Recency ;
MPRINT(EM_DIAGRAM):   *** Effect: GRP_Recency ;
1786592   +_TEMP = 1;
MPRINT(EM_DIAGRAM):   _TEMP = 1;
1786593   +_LP0 = _LP0 + (   -0.84415144261954) * _TEMP * _14_0;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.84415144261954) * _TEMP * _14_0;
1786594   +_LP0 = _LP0 + (   -0.06961662518501) * _TEMP * _14_1;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.06961662518501) * _TEMP * _14_1;
1786595   +_LP0 = _LP0 + (    -0.4618611915042) * _TEMP * _14_2;
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.4618611915042) * _TEMP * _14_2;
1786596   +
1786597   +***  Effect: Year_Birth ;
MPRINT(EM_DIAGRAM):   *** Effect: Year_Birth ;
1786598   +_TEMP = Year_Birth ;
MPRINT(EM_DIAGRAM):   _TEMP = Year_Birth ;
1786599   +_LP0 = _LP0 + (    -0.0039991752783 * _TEMP);
MPRINT(EM_DIAGRAM):   _LP0 = _LP0 + ( -0.0039991752783 * _TEMP);
1786600   +
1786601   +*** Naive Posterior Probabilities;
MPRINT(EM_DIAGRAM):   *** Naive Posterior Probabilities;
1786602   +drop _MAXP _IY _P0 _P1;
MPRINT(EM_DIAGRAM):   drop _MAXP _IY _P0 _P1;
1786603   +_TEMP =     14.2898298532565 + _LP0;
MPRINT(EM_DIAGRAM):   _TEMP = 14.2898298532565 + _LP0;
1786604   +if (_TEMP < 0) then do;
MPRINT(EM_DIAGRAM):   if (_TEMP < 0) then do;
1786605   +   _TEMP = exp(_TEMP);
MPRINT(EM_DIAGRAM):   _TEMP = exp(_TEMP);
1786606   +   _P0 = _TEMP / (1 + _TEMP);
MPRINT(EM_DIAGRAM):   _P0 = _TEMP / (1 + _TEMP);
1786607   +end;
MPRINT(EM_DIAGRAM):   end;
1786608   +else _P0 = 1 / (1 + exp(-_TEMP));
MPRINT(EM_DIAGRAM):   else _P0 = 1 / (1 + exp(-_TEMP));
1786609   +_P1 = 1.0 - _P0;
MPRINT(EM_DIAGRAM):   _P1 = 1.0 - _P0;
1786610   +
1786611   +RULE3_2DR1:
1786612   +
1786613   +
1786614   +*** Posterior Probabilities and Predicted Level;
MPRINT(EM_DIAGRAM):   RULE3_2DR1: *** Posterior Probabilities and Predicted Level;
1786615   +label P__bin1 = 'Predicted: _bin=1' ;
MPRINT(EM_DIAGRAM):   label P__bin1 = 'Predicted: _bin=1' ;
1786616   +label P__bin0 = 'Predicted: _bin=0' ;
MPRINT(EM_DIAGRAM):   label P__bin0 = 'Predicted: _bin=0' ;
1786617   +P__bin1 = _P0;
MPRINT(EM_DIAGRAM):   P__bin1 = _P0;
1786618   +_MAXP = _P0;
MPRINT(EM_DIAGRAM):   _MAXP = _P0;
1786619   +_IY = 1;
MPRINT(EM_DIAGRAM):   _IY = 1;
1786620   +P__bin0 = _P1;
MPRINT(EM_DIAGRAM):   P__bin0 = _P1;
1786621   +if (_P1 >  _MAXP + 1E-8) then do;
MPRINT(EM_DIAGRAM):   if (_P1 > _MAXP + 1E-8) then do;
1786622   +   _MAXP = _P1;
MPRINT(EM_DIAGRAM):   _MAXP = _P1;
1786623   +   _IY = 2;
MPRINT(EM_DIAGRAM):   _IY = 2;
1786624   +end;
MPRINT(EM_DIAGRAM):   end;
1786625   +I__bin = RULE3_2DRF[_IY];
MPRINT(EM_DIAGRAM):   I__bin = RULE3_2DRF[_IY];
1786626   +U__bin = RULE3_2DRU[_IY];
MPRINT(EM_DIAGRAM):   U__bin = RULE3_2DRU[_IY];
1786627   +
1786628   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1786629   +***** end scoring code for regression;
MPRINT(EM_DIAGRAM):   ***** end scoring code for regression;
1786630   +*************************************;
MPRINT(EM_DIAGRAM):   *************************************;
1786631   +*;
MPRINT(EM_DIAGRAM):   *;
1786632   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1786633   +if I__bin eq '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin eq '1' then do;
1786634   +I_DepVar = ("1");
MPRINT(EM_DIAGRAM):   I_DepVar = ("1");
1786635   +%DMNORMCP(I_DepVar, I_DepVar);
MPRINT(DMNORMCP):   I_DepVar=dmnorm(I_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1786636   +P_DepVar1=P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar1=P__bin1;
1786637   +P_DepVar0 = 1-P__bin1;
MPRINT(EM_DIAGRAM):   P_DepVar0 = 1-P__bin1;
1786638   +end;
MPRINT(EM_DIAGRAM):   end;
1786639   +*;
MPRINT(EM_DIAGRAM):   *;
1786640   +*;
MPRINT(EM_DIAGRAM):   *;
1786641   +end;
MPRINT(EM_DIAGRAM):   end;
1786642   +*;
MPRINT(EM_DIAGRAM):   *;
1786643   +DROP P__bin1 P__bin0;
MPRINT(EM_DIAGRAM):   DROP P__bin1 P__bin0;
1786644   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1786645   +* Cleanup Model for DepVar;
MPRINT(EM_DIAGRAM):   * Cleanup Model for DepVar;
1786646   +* Null Model based on training frequencies;
MPRINT(EM_DIAGRAM):   * Null Model based on training frequencies;
1786647   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1786648   +%DMNORMIP(I__bin);
MPRINT(DMNORMIP):   call dmnorm(I__bin,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
1786649   +if I__bin ne '1' then do;
MPRINT(EM_DIAGRAM):   if I__bin ne '1' then do;
1786650   +I_DepVar = ("1");
MPRINT(EM_DIAGRAM):   I_DepVar = ("1");
1786651   +%DMNORMCP(I_DepVar, I_DepVar);
MPRINT(DMNORMCP):   I_DepVar=dmnorm(I_DepVar,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1786652   +P_DepVar1 = 0.15122156697556;
MPRINT(EM_DIAGRAM):   P_DepVar1 = 0.15122156697556;
1786653   +P_DepVar0 = 0.84877843302443;
MPRINT(EM_DIAGRAM):   P_DepVar0 = 0.84877843302443;
1786654   +*;
MPRINT(EM_DIAGRAM):   *;
1786655   +end;
MPRINT(EM_DIAGRAM):   end;
1786656   +*;
MPRINT(EM_DIAGRAM):   *;
1786657   +*;
MPRINT(EM_DIAGRAM):   *;
1786658   +drop U__bin _bin;
MPRINT(EM_DIAGRAM):   drop U__bin _bin;
1786659   +*;
MPRINT(EM_DIAGRAM):   *;
1786660   +_FORMAT = PUT(DepVar, BEST.);
MPRINT(EM_DIAGRAM):   _FORMAT = PUT(DepVar, BEST.);
1786661   +%DMNORMCP(_FORMAT, F_DepVar);
MPRINT(DMNORMCP):   F_DepVar=dmnorm(_FORMAT,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
1786662   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1786663   +*Computing Residual Vars: DepVar;
MPRINT(EM_DIAGRAM):   *Computing Residual Vars: DepVar;
1786664   +*------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
1786665   +Label R_DepVar1='Residual: DepVar=1';
MPRINT(EM_DIAGRAM):   Label R_DepVar1= 'Residual: DepVar=1';
1786666   +Label R_DepVar0='Residual: DepVar=0';
MPRINT(EM_DIAGRAM):   Label R_DepVar0= 'Residual: DepVar=0';
1786667   +if
1786668   + F_DepVar ne '1'
1786669   +and F_DepVar ne '0'
1786670   + then do;
MPRINT(EM_DIAGRAM):   if F_DepVar ne '1' and F_DepVar ne '0' then do;
1786671   +R_DepVar1=.;
MPRINT(EM_DIAGRAM):   R_DepVar1=.;
1786672   +R_DepVar0=.;
MPRINT(EM_DIAGRAM):   R_DepVar0=.;
1786673   +end;
MPRINT(EM_DIAGRAM):   end;
1786674   +else do;
MPRINT(EM_DIAGRAM):   else do;
1786675   +R_DepVar1= - P_DepVar1;
MPRINT(EM_DIAGRAM):   R_DepVar1= - P_DepVar1;
1786676   +R_DepVar0= - P_DepVar0;
MPRINT(EM_DIAGRAM):   R_DepVar0= - P_DepVar0;
1786677   +select(F_DepVar);
MPRINT(EM_DIAGRAM):   select(F_DepVar);
1786678   +when('1')R_DepVar1= R_DepVar1+1;
MPRINT(EM_DIAGRAM):   when('1')R_DepVar1= R_DepVar1+1;
1786679   +when('0')R_DepVar0= R_DepVar0+1;
MPRINT(EM_DIAGRAM):   when('0')R_DepVar0= R_DepVar0+1;
1786680   +otherwise;
MPRINT(EM_DIAGRAM):   otherwise;
1786681   +end;
MPRINT(EM_DIAGRAM):   end;
1786682   +end;
MPRINT(EM_DIAGRAM):   end;
NOTE: %INCLUDE (level 1) ending.
MPRINT(EM_DIAGRAM):   run;
1786683    run;
 
NOTE: DATA STEP view saved on file EMWS8.RULE3_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS8.BINNING_VALIDATE.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.07 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
1786684    quit;
1786685    filename emflow;
MPRINT(EM_DIAGRAM):   filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
MPRINT(EM_DIAGRAM):
MPRINT(CALFITSTATSNOMINAL):   data _tmpTrainFitTable(keep=_TARGET_ _ASE_ _DIV_ _MAX_ _NOBS_
_RASE_ _SSE_ _DISF_ _MISC_ _WRONG_ rename=(_TARGET_=TARGET));
MPRINT(CALFITSTATSNOMINAL):   set EMWS8.Rule3_TRAIN end=eof;
MPRINT(CALFITSTATSNOMINAL):   length _TARGET_ $32;
MPRINT(CALFITSTATSNOMINAL):   length _ASE_ _DIV_ _MAX_ _NOBS_ _RASE_ _SSE_ _DISF_ _MISC_
_WRONG_ 8;
MPRINT(CALFITSTATSNOMINAL):   label _TARGET_ = "Train: Target Variable" _NOBS_= "Train: Sum of
Frequencies" _SSE_= "Train: Sum of Squared Errors" _MAX_= "Train: Maximum Absolute Error"
_DIV_ = "Train: Divisor for ASE" _WRONG_= "Train: Number of Wrong Classifications" _DISF_=
"Train: Frequency of Classified Cases" _MISC_= "Train: Misclassification Rate" _ASE_ = "Train:
Average Squared Error" _RASE_ = "Train: Root Average Squared Error";
MPRINT(CALFITSTATSNOMINAL):   retain _TARGET_ _WRONG_ _DIV_ _MAX_ _SSE_ _DISF_ _MISC_ _ASE_
_RASE_ ;
MPRINT(CALFITSTATSNOMINAL):   if R_DepVar1 ne . then do;
MPRINT(CALFITSTATSNOMINAL):   _SSE_ +(R_DepVar1)*(R_DepVar1);
MPRINT(CALFITSTATSNOMINAL):   _DIV_ +1;
MPRINT(CALFITSTATSNOMINAL):   _MAX_ =max(_MAX_ ,abs(R_DepVar1));
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   if R_DepVar0 ne . then do;
MPRINT(CALFITSTATSNOMINAL):   _SSE_ +(R_DepVar0)*(R_DepVar0);
MPRINT(CALFITSTATSNOMINAL):   _DIV_ +1;
MPRINT(CALFITSTATSNOMINAL):   _MAX_ =max(_MAX_ ,abs(R_DepVar0));
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   if F_DepVar ne "" then do;
MPRINT(CALFITSTATSNOMINAL):   _DISF_+ 1;
MPRINT(CALFITSTATSNOMINAL):   _WRONG_+(F_DepVar ne I_DepVar);
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   if eof then do;
MPRINT(CALFITSTATSNOMINAL):   _TARGET_ = "DepVar";
MPRINT(CALFITSTATSNOMINAL):   _MAX = 0;
MPRINT(CALFITSTATSNOMINAL):   if _DISF_ ne 0 then do;
MPRINT(CALFITSTATSNOMINAL):   _MISC_=_WRONG_/_DISF_;
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   _NOBS_ = _DIV_/2;
MPRINT(CALFITSTATSNOMINAL):   _ASE_=_SSE_/_DIV_;
MPRINT(CALFITSTATSNOMINAL):   _RASE_=sqrt(_ASE_);
MPRINT(CALFITSTATSNOMINAL):   output;
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMOUTFIT;
MPRINT(EM_DIAGRAM):   set _tmpTrainFitTable;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):
MPRINT(CALFITSTATSNOMINAL):   data _tmpValidFitTable(keep=_TARGET_ _ASE_ _DIV_ _MAX_ _NOBS_
_RASE_ _SSE_ _DISF_ _MISC_ _WRONG_ rename=(_TARGET_=TARGET));
MPRINT(CALFITSTATSNOMINAL):   set EMWS8.Rule3_VALIDATE end=eof;
MPRINT(CALFITSTATSNOMINAL):   length _TARGET_ $32;
MPRINT(CALFITSTATSNOMINAL):   length _ASE_ _DIV_ _MAX_ _NOBS_ _RASE_ _SSE_ _DISF_ _MISC_
_WRONG_ 8;
MPRINT(CALFITSTATSNOMINAL):   label _TARGET_ = "Valid: Target Variable" _NOBS_= "Valid: Sum of
Frequencies" _SSE_= "Valid: Sum of Squared Errors" _MAX_= "Valid: Maximum Absolute Error"
_DIV_ = "Valid: Divisor for ASE" _WRONG_= "Valid: Number of Wrong Classifications" _DISF_=
"Valid: Frequency of Classified Cases" _MISC_= "Valid: Misclassification Rate" _ASE_ = "Valid:
Average Squared Error" _RASE_ = "Valid: Root Average Squared Error";
MPRINT(CALFITSTATSNOMINAL):   retain _TARGET_ _WRONG_ _DIV_ _MAX_ _SSE_ _DISF_ _MISC_ _ASE_
_RASE_ ;
MPRINT(CALFITSTATSNOMINAL):   if R_DepVar1 ne . then do;
MPRINT(CALFITSTATSNOMINAL):   _SSE_ +(R_DepVar1)*(R_DepVar1);
MPRINT(CALFITSTATSNOMINAL):   _DIV_ +1;
MPRINT(CALFITSTATSNOMINAL):   _MAX_ =max(_MAX_ ,abs(R_DepVar1));
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   if R_DepVar0 ne . then do;
MPRINT(CALFITSTATSNOMINAL):   _SSE_ +(R_DepVar0)*(R_DepVar0);
MPRINT(CALFITSTATSNOMINAL):   _DIV_ +1;
MPRINT(CALFITSTATSNOMINAL):   _MAX_ =max(_MAX_ ,abs(R_DepVar0));
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   if F_DepVar ne "" then do;
MPRINT(CALFITSTATSNOMINAL):   _DISF_+ 1;
MPRINT(CALFITSTATSNOMINAL):   _WRONG_+(F_DepVar ne I_DepVar);
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   if eof then do;
MPRINT(CALFITSTATSNOMINAL):   _TARGET_ = "DepVar";
MPRINT(CALFITSTATSNOMINAL):   _MAX = 0;
MPRINT(CALFITSTATSNOMINAL):   if _DISF_ ne 0 then do;
MPRINT(CALFITSTATSNOMINAL):   _MISC_=_WRONG_/_DISF_;
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   _NOBS_ = _DIV_/2;
MPRINT(CALFITSTATSNOMINAL):   _ASE_=_SSE_/_DIV_;
MPRINT(CALFITSTATSNOMINAL):   _RASE_=sqrt(_ASE_);
MPRINT(CALFITSTATSNOMINAL):   output;
MPRINT(CALFITSTATSNOMINAL):   end;
MPRINT(CALFITSTATSNOMINAL):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   data _tmpdata_(DROP= TARGET);
MPRINT(EM_DIAGRAM):   set _tmpValidFitTable;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _tmpdata_;
MPRINT(EM_DIAGRAM):   set _tmpdata_;
MPRINT(EM_DIAGRAM):   rename _ASE_=_VASE_;
MPRINT(EM_DIAGRAM):   rename _DIV_=_VDIV_;
MPRINT(EM_DIAGRAM):   rename _MAX_=_VMAX_;
MPRINT(EM_DIAGRAM):   rename _NOBS_=_VNOBS_;
MPRINT(EM_DIAGRAM):   rename _RASE_=_VRASE_;
MPRINT(EM_DIAGRAM):   rename _SSE_=_VSSE_;
MPRINT(EM_DIAGRAM):   rename _DISF_=_VDISF_;
MPRINT(EM_DIAGRAM):   rename _MISC_=_VMISC_;
MPRINT(EM_DIAGRAM):   rename _WRONG_=_VWRONG_;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMOUTFIT;
MPRINT(EM_DIAGRAM):   merge EMWS8.Rule3_EMOUTFIT _tmpdata_;
MPRINT(EM_DIAGRAM):   run;
1786745    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
1786746    * Rule3: Computing metadata for TRAIN data;
MPRINT(EM_DIAGRAM):   * Rule3: Computing metadata for TRAIN data;
1786747    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
NOTE: View EMWS8.RULE3_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
 
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * &nodeid: Computing Metadata for TRAIN data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   filename _delta
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\CDELTA_TRAIN.sas";
MPRINT(EMADVISECOLUMNS):   proc display c=sashelp.emmeta.advisecolumns.scl;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    options validvarname=any;
MPRINT(EMADVISECOLUMNS):   proc contents data=EMWS8.Rule3_TRAIN out=_tempAdvisor noprint;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):   options validvarname=V7;
MPRINT(EMADVISECOLUMNS):    data _null_;
MPRINT(EMADVISECOLUMNS):   dsid = open('EMWS8.Rule3_TRAIN');
MPRINT(EMADVISECOLUMNS):   call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EMADVISECOLUMNS):   if dsid then do;
MPRINT(EMADVISECOLUMNS):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EMADVISECOLUMNS):   dsid = close(dsid);
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    proc contents data=EMWS8.Rule3_TRAIN out=WORK.M1JQFW5R noprint;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M1JQFW5R;
MPRINT(EMADVISECOLUMNS):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20
INDEX $ 1 INDEXTYPE $ 9;
MPRINT(EMADVISECOLUMNS):   label NAME =;
MPRINT(EMADVISECOLUMNS):   set WORK.M1JQFW5R(keep=name type length label format formatl
formatd informat informl informd idxusage rename=(type=itype));
MPRINT(EMADVISECOLUMNS):   if itype = 1 then type = 'N';
MPRINT(EMADVISECOLUMNS):   else type = 'C';
MPRINT(EMADVISECOLUMNS):   if formatl > 0 then do;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' then format = strip(format)!!strip(put(formatl,
best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EMADVISECOLUMNS):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd,
best12.));
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if format ne '' then format = strip(format)!!'.';
MPRINT(EMADVISECOLUMNS):   if informl > 0 then do;
MPRINT(EMADVISECOLUMNS):   if informat ne ' ' then informat =
strip(informat)!!strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EMADVISECOLUMNS):   else informat = strip(put(informl,
best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EMADVISECOLUMNS):   if idxusage = 'NONE' then index ="N";
MPRINT(EMADVISECOLUMNS):   else index = "Y";
MPRINT(EMADVISECOLUMNS):   indextype = idxusage;
MPRINT(EMADVISECOLUMNS):   drop idxusage itype formatl formatd informl informd;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M1JQFW5R;
MPRINT(EMADVISECOLUMNS):   length UNAME $64;
MPRINT(EMADVISECOLUMNS):   set WORK.M1JQFW5R;
MPRINT(EMADVISECOLUMNS):   UNAME = upcase(NAME);
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    proc sort data=WORK.M29_TRNH NOTHREADS;
MPRINT(EMADVISECOLUMNS):   by UNAME;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   drop UNAME;
MPRINT(EMADVISECOLUMNS):   set WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M2HULSSP(keep=NAME ATTR);
MPRINT(EMADVISECOLUMNS):   length ATTR $ 20;
MPRINT(EMADVISECOLUMNS):   set WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   if level ne "INTERVAL" then do;
MPRINT(EMADVISECOLUMNS):   if order = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'ORDER';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'FORMATTYPE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'ROLE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if level = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'LEVEL';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if type = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'TYPE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if index = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'INDEX';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if report = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'REPORT';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):   proc sort NOTHREADS;
MPRINT(EMADVISECOLUMNS):   by attr;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32
FORMATTYPE $ 10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EMADVISECOLUMNS):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EMADVISECOLUMNS):   set WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   if formattype = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' then do;
MPRINT(EMADVISECOLUMNS):   if type = 'N' then do;
MPRINT(EMADVISECOLUMNS):   pos = indexc(format,'.1234567890');
MPRINT(EMADVISECOLUMNS):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EMADVISECOLUMNS):   else tempfmt = ' ';
MPRINT(EMADVISECOLUMNS):   flen = length(tempfmt);
MPRINT(EMADVISECOLUMNS):   select;
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN"
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO"
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON"
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD"
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" ))
formattype = 'DATE';
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype =
"DATETIME";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" ))
formattype = "TIME";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT"
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB"
"SSN" "Z" "ZD")) formattype = "CODING";
MPRINT(EMADVISECOLUMNS):   otherwise do;
MPRINT(EMADVISECOLUMNS):   formattype = "USER";
MPRINT(EMADVISECOLUMNS):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EMADVISECOLUMNS):   else if flen >= 4 then do;
MPRINT(EMADVISECOLUMNS):   str = substr(tempfmt,1,4);
MPRINT(EMADVISECOLUMNS):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EMADVISECOLUMNS):   else if str = "S370" then formattype = "CODING";
MPRINT(EMADVISECOLUMNS):   else if str = "BEST" then formattype = "NUM";
MPRINT(EMADVISECOLUMNS):   drop str;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType =
"DATE";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   drop flen tempfmt pos;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   formatType = "CATEGORY";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if formatType = "NUM" then do;
MPRINT(EMADVISECOLUMNS):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EMADVISECOLUMNS):   else formatType = "QUANTITY";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if level = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then
level = "NOMINAL";
MPRINT(EMADVISECOLUMNS):   else level = "INTERVAL";
MPRINT(EMADVISECOLUMNS):   levelAssigned = 1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else level = upcase(level);
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   length name_prefix $8 _uname $64;
MPRINT(EMADVISECOLUMNS):   drop name_prefix _uname _freqflag;
MPRINT(EMADVISECOLUMNS):   retain _freqflag;
MPRINT(EMADVISECOLUMNS):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EMADVISECOLUMNS):   _uname = upcase(NAME);
MPRINT(EMADVISECOLUMNS):   select(_uname);
MPRINT(EMADVISECOLUMNS):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_SEGMENT') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('_NODE_') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EMADVISECOLUMNS):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EMADVISECOLUMNS):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('URI') ROLE = 'URL';
MPRINT(EMADVISECOLUMNS):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EMADVISECOLUMNS):   otherwise do;
MPRINT(EMADVISECOLUMNS):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'REJECTED';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'FREQ';
MPRINT(EMADVISECOLUMNS):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EMADVISECOLUMNS):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   name_prefix = scan(_uname, 1, '_');
MPRINT(EMADVISECOLUMNS):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EMADVISECOLUMNS):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'CLASSIFICATION';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA',
'RAS', 'RAT') then ROLE = 'RESIDUAL';
MPRINT(EMADVISECOLUMNS):   else if name_prefix ='D' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'DECISION';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix ='B' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W',
'ROI', 'IC') then ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   array _ROLE_ (19) $32 _TEMPORARY_
('ASSESS','CLASSIFICATION','CENSOR', 'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL',
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT',
'TIMEID');
MPRINT(EMADVISECOLUMNS):   drop _found_ i;
MPRINT(EMADVISECOLUMNS):   _found_=0;
MPRINT(EMADVISECOLUMNS):   do i=1 to 19 until(_found_=1);
MPRINT(EMADVISECOLUMNS):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EMADVISECOLUMNS):   ROLE=_ROLE_{i};
MPRINT(EMADVISECOLUMNS):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EMADVISECOLUMNS):   _found_=1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if length(_uname)>2 then do;
MPRINT(EMADVISECOLUMNS):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'ID';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EMADVISECOLUMNS):   else role = 'INPUT';
MPRINT(EMADVISECOLUMNS):   roleAssigned = 1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else role = upcase(role);
MPRINT(EMADVISECOLUMNS):   if REPORT = '' then REPORT = 'N';
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   set WORK.M29_TRNH;
MPRINT(EMADVISECOLUMNS):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL=
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY=
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT=
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL=
"Label" LENGTH= "Length";
MPRINT(EMADVISECOLUMNS):   drop levelAssigned roleAssigned;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.COLUMNMETA;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * &nodeid: Merge incoming metadata;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   proc contents data=EMWS8.BINNING_TRAIN noprint out=_temp2(keep=NAME);
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_temp2;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS8.BINNING_CMeta_TRAIN out=_temp;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_CMeta_TRAIN;
MPRINT(EM_DIAGRAM):   merge WORK.COLUMNMETA(in=_a) _temp2(in=_b) _temp(drop=FORMAT INFORMAT
LENGTH INDEX INDEXTYPE in=_c) end=_eof_;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   if (^_a and _b) or (^_c and _a and _b) then delete;
MPRINT(EM_DIAGRAM):   if ^_b then CREATOR = "Rule3";
MPRINT(EM_DIAGRAM):   select(upcase(name));
MPRINT(EM_DIAGRAM):   when("P_DEPVAR1") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("R_DEPVAR1") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("P_DEPVAR0") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("R_DEPVAR0") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("F_DEPVAR") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("I_DEPVAR") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("U_DEPVAR") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("_WARN_") creator = "Rule3";
MPRINT(EM_DIAGRAM):   when("DEPVAR") model = "Rule3";
MPRINT(EM_DIAGRAM):   when('');
MPRINT(EM_DIAGRAM):   otherwise;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Rule3: Apply Delta Code;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   if name = '_NODE_' then role = 'SEGMENT';
MPRINT(EM_DIAGRAM):   if name = '_LEAF_' then role = 'REJECTED';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _delta;
1787061    data WORK.MODELTEMP_INFO;
MPRINT(EM_DIAGRAM):    data WORK.MODELTEMP_INFO;
1787062    set EMWS8.Rule3_EMINFO;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMINFO;
1787063    where DATA='Rule3' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
MPRINT(EM_DIAGRAM):   where DATA='Rule3' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE',
'MODEL');
1787064    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 0 observations read from the data set EMWS8.RULE3_EMINFO.
      WHERE (DATA='Rule3') and KEY not in ('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
NOTE: The data set WORK.MODELTEMP_INFO has 0 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787065    data EMWS8.Rule3_EMINFO;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_EMINFO;
1787066    length TARGET KEY $32 DATA $43;
MPRINT(EM_DIAGRAM):   length TARGET KEY $32 DATA $43;
1787067    input TARGET KEY DATA $;
MPRINT(EM_DIAGRAM):   input TARGET KEY DATA $;
1787068    cards;
MPRINT(EM_DIAGRAM):   cards;
 
NOTE: The data set EMWS8.RULE3_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   run;
1787072    run;
1787073    data EMWS8.Rule3_EMINFO;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMINFO;
1787074    set EMWS8.Rule3_EMINFO WORK.MODELTEMP_INFO;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMINFO WORK.MODELTEMP_INFO;
1787075    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS8.RULE3_EMINFO.
NOTE: There were 0 observations read from the data set WORK.MODELTEMP_INFO.
NOTE: The data set EMWS8.RULE3_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787076    proc sort data = EMWS8.Rule3_EMINFO NOTHREADS;
MPRINT(EM_DIAGRAM):    proc sort data = EMWS8.Rule3_EMINFO NOTHREADS;
1787077    by TARGET KEY;
MPRINT(EM_DIAGRAM):   by TARGET KEY;
1787078    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS8.RULE3_EMINFO.
NOTE: The data set EMWS8.RULE3_EMINFO has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1787079    proc sort data = EMWS8.FIMPORT_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
MPRINT(EM_DIAGRAM):    proc sort data = EMWS8.FIMPORT_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
1787080    by TARGET KEY;
MPRINT(EM_DIAGRAM):   by TARGET KEY;
1787081    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set EMWS8.FIMPORT_EMINFO.
NOTE: The data set WORK.SORTEDEMINFO has 1 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787082    proc sort data = EMWS8.Rule3_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
MPRINT(EM_DIAGRAM):   proc sort data = EMWS8.Rule3_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
1787083    by TARGET KEY;
MPRINT(EM_DIAGRAM):   by TARGET KEY;
1787084    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 3 observations read from the data set EMWS8.RULE3_EMINFO.
NOTE: The data set WORK.TEMP_INFO has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787085    data EMWS8.Rule3_EMINFO;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMINFO;
1787086    merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
MPRINT(EM_DIAGRAM):   merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
1787087    by TARGET KEY;
MPRINT(EM_DIAGRAM):   by TARGET KEY;
1787088    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set WORK.SORTEDEMINFO.
NOTE: There were 3 observations read from the data set WORK.TEMP_INFO.
NOTE: The data set EMWS8.RULE3_EMINFO has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1787089    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
1787090    delete TEMP_INFO SORTEDEMINFO;
MPRINT(EM_DIAGRAM):   delete TEMP_INFO SORTEDEMINFO;
1787091    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Deleting WORK.TEMP_INFO (memtype=DATA).
NOTE: Deleting WORK.SORTEDEMINFO (memtype=DATA).
1787092    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
NOTE: View EMWS8.RULE3_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
NOTE: View EMWS8.RULE3_VALIDATE.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09.51 Uhr" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Report Log
Date:                28. April 2016
Time:                09.51 Uhr
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O28GY6E6
"C:\\predictive-models-project\Workspaces\EMWS8\Rule3\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O28GY6E6 new;
MPRINT(EM_DIAGRAM):   run;
1787116    data EMWS8.Rule3_EMOUTFIT;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_EMOUTFIT;
1787117    set EMWS8.Rule3_EMOUTFIT;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMOUTFIT;
1787118    length TargetLabel $200;
MPRINT(EM_DIAGRAM):   length TargetLabel $200;
1787119    label targetLabel = "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel,
1787119  ! NOQUOTE))";
MPRINT(EM_DIAGRAM):   label targetLabel = "Target Label";
1787120    if upcase(TARGET) eq "DEPVAR" then TargetLabel = 'DepVar';
MPRINT(EM_DIAGRAM):   if upcase(TARGET) eq "DEPVAR" then TargetLabel = 'DepVar';
1787121    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set EMWS8.RULE3_EMOUTFIT.
NOTE: The data set EMWS8.RULE3_EMOUTFIT has 1 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1787122    proc sort data=EMWS8.Rule3_EMREPORTFIT nothreads;
MPRINT(EM_DIAGRAM):    proc sort data=EMWS8.Rule3_EMREPORTFIT nothreads;
1787123    by TARGET;
MPRINT(EM_DIAGRAM):   by TARGET;
1787124    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 9 observations read from the data set EMWS8.RULE3_EMREPORTFIT.
NOTE: The data set EMWS8.RULE3_EMREPORTFIT has 9 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787125    %let _EMwarndup = 0;
1787126    %let _EMtargetdup =;
1787127    %let _EMASEtargetdup =;
1787128    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
1787129    set EMWS8.Rule3_EMOUTFIT;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMOUTFIT;
1787130    if .<_ASE_<0.000001 then do;
MPRINT(EM_DIAGRAM):   if .<_ASE_<0.000001 then do;
1787131    call symput('_EMwarndup', '1');
MPRINT(EM_DIAGRAM):   call symput('_EMwarndup', '1');
1787132    call symput('_EMtargetdup', target);
MPRINT(EM_DIAGRAM):   call symput('_EMtargetdup', target);
1787133    call symput('_EMASEtargetdup', put(_ASE_, best.));
MPRINT(EM_DIAGRAM):   call symput('_EMASEtargetdup', put(_ASE_, best.));
1787134    end;
MPRINT(EM_DIAGRAM):   end;
1787135    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set EMWS8.RULE3_EMOUTFIT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787136    proc sort data=EMWS8.BINNING_CMeta_TRAIN out=WORK.SUBSETINMETA;
MPRINT(EM_DIAGRAM):    proc sort data=EMWS8.BINNING_CMeta_TRAIN out=WORK.SUBSETINMETA;
1787137    by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
1787138    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 50 observations read from the data set EMWS8.BINNING_CMETA_TRAIN.
NOTE: The data set WORK.SUBSETINMETA has 50 observations and 20 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1787139    proc sort data=EMWS8.Rule3_VariableSet out=WORK.SUBSETVARSET(keep=NAME REPORT);
MPRINT(EM_DIAGRAM):   proc sort data=EMWS8.Rule3_VariableSet out=WORK.SUBSETVARSET(keep=NAME
REPORT);
1787140    by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
1787141    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 48 observations read from the data set EMWS8.RULE3_VARIABLESET.
NOTE: The data set WORK.SUBSETVARSET has 48 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1787142    data WORK.ASSESS_META;
MPRINT(EM_DIAGRAM):   data WORK.ASSESS_META;
1787143    merge WORK.SUBSETINMETA WORK.SUBSETVARSET;
MPRINT(EM_DIAGRAM):   merge WORK.SUBSETINMETA WORK.SUBSETVARSET;
1787144    by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
1787145    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 50 observations read from the data set WORK.SUBSETINMETA.
NOTE: There were 48 observations read from the data set WORK.SUBSETVARSET.
NOTE: The data set WORK.ASSESS_META has 50 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1787146    data EM_temp_assessMeta;
MPRINT(EM_DIAGRAM):    data EM_temp_assessMeta;
1787147    set EMWS8.Rule3_CMeta_TRAIN;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_CMeta_TRAIN;
1787148    where role in('DECISION', 'PREDICT', 'RESIDUAL', 'CLASSIFICATION', 'ASSESS', 'COST')
1787148  ! ;
MPRINT(EM_DIAGRAM):   where role in('DECISION', 'PREDICT', 'RESIDUAL', 'CLASSIFICATION',
'ASSESS', 'COST');
1787149    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 7 observations read from the data set EMWS8.RULE3_CMETA_TRAIN.
      WHERE role in ('ASSESS', 'CLASSIFICATION', 'COST', 'DECISION', 'PREDICT', 'RESIDUAL');
NOTE: The data set WORK.EM_TEMP_ASSESSMETA has 7 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1787150    data EM_temp_assessdata;
MPRINT(EM_DIAGRAM):    data EM_temp_assessdata;
1787151    set EMWS8.Rule3_TRAIN(keep=
1787152    F_DepVar
1787153    I_DepVar
1787154    P_DepVar0
1787155    P_DepVar1
1787156    R_DepVar0
1787157    R_DepVar1
1787158    _WARN_
1787159    DepVar
1787160    );
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_TRAIN(keep= F_DepVar I_DepVar P_DepVar0 P_DepVar1
R_DepVar0 R_DepVar1 _WARN_ DepVar );
1787161    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable _bin is uninitialized.
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: View EMWS8.RULE3_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
NOTE: There were 2374 observations read from the data set EMWS8.BINNING_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.RULE3_TRAIN.
NOTE: The data set WORK.EM_TEMP_ASSESSDATA has 2374 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
 
MPRINT(EM_DIAGRAM):    proc freq data=EM_temp_assessdata noprint;
MPRINT(EM_DIAGRAM):   table I_DepVar*F_DepVar / out = WORK.Rule3_1REKYPN nocol norow outpct;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.Rule3_1REKYPN;
MPRINT(EM_DIAGRAM):   length _TYPE_ $10 DATAROLE TARGET $32 TARGETLABEL $200 FROM INTO $32
CORRECTTEXT $40 ;
MPRINT(EM_DIAGRAM):   label _TYPE_ = "Outcome Type";
MPRINT(EM_DIAGRAM):   label DATAROLE = "Data Role";
MPRINT(EM_DIAGRAM):   label TARGET = "Target Variable";
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   label FROM = "Target";
MPRINT(EM_DIAGRAM):   label INTO = "Outcome";
MPRINT(EM_DIAGRAM):   label PCT_ROW = "Target Percentage";
MPRINT(EM_DIAGRAM):   label PCT_COL = "Outcome Percentage";
MPRINT(EM_DIAGRAM):   label COUNT = "Frequency Count";
MPRINT(EM_DIAGRAM):   label PERCENT = "Total Percentage";
MPRINT(EM_DIAGRAM):   label CORRECTTEXT = "Correct Text";
MPRINT(EM_DIAGRAM):   label CORRECT = "Correct";
MPRINT(EM_DIAGRAM):   set WORK.Rule3_1REKYPN(rename=(F_DepVar=FROM I_DepVar=INTO));
MPRINT(EM_DIAGRAM):   retain _TYPE_ 'PREDICTION' DATAROLE "TRAIN" TARGET "DepVar";
MPRINT(EM_DIAGRAM):   if upcase(TARGET) eq "DEPVAR" then TARGETLABEL = 'DepVar';
MPRINT(EM_DIAGRAM):   if FROM eq INTO then do;
MPRINT(EM_DIAGRAM):   CORRECT = 0;
MPRINT(EM_DIAGRAM):   CORRECTTEXT="Correct";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   CORRECT = 1;
MPRINT(EM_DIAGRAM):   CORRECTTEXT="Incorrect";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_EMCLASSIFICATION;
MPRINT(EM_DIAGRAM):   set WORK.Rule3_1REKYPN;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.MISCREPORT;
MPRINT(EM_DIAGRAM):   set WORK.Rule3_1REKYPN;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.MISCREPORT(drop=INTO FROM _TYPE_);
MPRINT(EM_DIAGRAM):   set WORK.MISCREPORT;
MPRINT(EM_DIAGRAM):   length MISC $12;
MPRINT(EM_DIAGRAM):   if FROM='1' and INTO='1' then MISC='TRUEEVENT';
MPRINT(EM_DIAGRAM):   else if FROM='1' and INTO ne '1' then MISC='FALSENEVENT';
MPRINT(EM_DIAGRAM):   else if FROM ne '1' and INTO='1' then MISC='FALSEEVENT';
MPRINT(EM_DIAGRAM):   else if FROM ne'1' and INTO ne '1' then MISC='TRUENEVENT';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.MISCREPORT nothreads;
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc summary data=WORK.MISCREPORT NWAY;
MPRINT(EM_DIAGRAM):   output out=WORK.MISCCOUNT(drop=_FREQ_ _TYPE_) SUM=COUNT;
MPRINT(EM_DIAGRAM):   CLASS MISC;
MPRINT(EM_DIAGRAM):   VAR COUNT;
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc transpose data=WORK.MISCCOUNT out=WORK.MISCREPORT(drop=_NAME_
_LABEL_);
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET;
MPRINT(EM_DIAGRAM):   ID MISC;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_EMEVENTREPORT;
MPRINT(EM_DIAGRAM):   length TARGETLABEL $200;
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   set WORK.MISCREPORT;
MPRINT(EM_DIAGRAM):   if upcase(TARGET) eq "DEPVAR" then TARGETLABEL = 'DepVar';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data ASSESS_REPORTMETA;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_VariableSet;
MPRINT(EM_DIAGRAM):   where REPORT='Y';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename temp catalog 'sashelp.emassmt.em_assess.source';
MPRINT(EM_DIAGRAM):   filename temp;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_DepVar_DM;
MPRINT(EM_DIAGRAM):   where _TYPE_="TARGET";
MPRINT(EM_DIAGRAM):   call symput('ASSMT_EVENT', strip(event));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):
MPRINT(EM_ASSESS):   data _ea_tmpdata;
MPRINT(EM_ASSESS):   set EM_temp_assessdata;
MPRINT(EM_ASSESS):   _tmpfreqvar_=1;
MPRINT(EM_ASSESS):   run;
MPRINT(EM_CHECKEMSETINIT):   DATA _NULL_;
MPRINT(EM_CHECKEMSETINIT):   EM_SETINIT = 'N';
MPRINT(EM_CHECKEMSETINIT):   IF SYSPROD('PRODNUM50') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   ELSE IF SYSPROD('PRODNUM448') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   ELSE IF SYSPROD('PRODNUM102') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   ELSE IF SYSPROD('PRODNUM103') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   CALL SYMPUT('EM_SETINIT', EM_SETINIT);
MPRINT(EM_CHECKEMSETINIT):   RUN;
MPRINT(EM_ASSESS):  ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ............ Reading in reporting data set;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   DATA _NULL_;
MPRINT(EM_ASSESS):   SET ASSESS_REPORTMETA END = EOF;
MPRINT(EM_ASSESS):   IF TYPE = "C" OR UPCASE (LEVEL) IN ("NOMINAL", "BINARY" , "ORDINAL") THEN
DO;
MPRINT(EM_ASSESS):   IF UPCASE (NAME) NE UPCASE ("F_DepVar") THEN DO;
MPRINT(EM_ASSESS):   NUMCTOREPORT + 1;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("REPORTC" || LEFT (PUT (NUMCTOREPORT, 5.)), NAME);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("RPRT_TRGT", "C");
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE IF TYPE = "N" THEN DO;
MPRINT(EM_ASSESS):   IF UPCASE(NAME) NE UPCASE ("F_DepVar") THEN DO;
MPRINT(EM_ASSESS):   NUMNTOREPORT + 1;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("REPORTN" || LEFT (PUT (NUMNTOREPORT, 5.)), NAME);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("RPRT_TRGT", "N");
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF EOF THEN DO;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMNTOREPORT", NUMNTOREPORT);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMCTOREPORT", NUMCTOREPORT);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMTOREPORT", SUM (NUMNTOREPORT, NUMCTOREPORT));
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   PROC DMDB DATA = _ea_tmpdata VAROUT = VAROUT DMDBCAT = _D CLASSOUT =
_ASSMT_CLASSOUT;
MPRINT(EM_ASSESS):   CLASS F_DepVar ;
 
MPRINT(EM_ASSESS):   VAR P_DepVar1 _tmpfreqvar_ ;
MPRINT(EM_ASSESS):   FREQ _tmpfreqvar_;
MPRINT(EM_ASSESS):   RUN ;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   PROC SORT DATA = _ASSMT_CLASSOUT;
MPRINT(EM_ASSESS):   BY NAME;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   DATA _auxeventname (keep = __event__) ;
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   * ...FLAG0_1 = ..... TARGET IS 0, 1 & EVENT = 1;
 
MPRINT(EM_ASSESS):   ;
MPRINT(EM_ASSESS):   length __event__ $ 32;
MPRINT(EM_ASSESS):   RETAIN FLAG0_1 1 NUM1 . NUM0 . __event__ "_missing_" ;
 
MPRINT(EM_ASSESS):   SET _ASSMT_CLASSOUT END = EOF;
MPRINT(EM_ASSESS):   BY NAME;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ....... LEVEL = BINARY OR NOMINAL OR ORDINAL;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   IF UPCASE(NAME) = UPCASE ("F_DepVar") THEN DO;
MPRINT(EM_ASSESS):   CUMFREQ + FREQUENCY;
MPRINT(EM_ASSESS):   IF LEVEL NE "." THEN DO;
MPRINT(EM_ASSESS):   N1 + 1;
MPRINT(EM_ASSESS):   IF (NRAW NE 0 AND NRAW NE 1) OR TYPE NE "N" OR "" > " " THEN FLAG0_1 = 0;
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   * ......................... IF EVENT NE BLANK;
MPRINT(EM_ASSESS):   * ....................LEVEL IS CHAR VAR ;
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   IF UPCASE("1") = UPCASE(LEVEL) THEN DO;
MPRINT(EM_ASSESS):   NUM1 = FREQUENCY;
MPRINT(EM_ASSESS):   IF TYPE = "C" THEN do;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("EVENTVALUERAW", CRAW );
MPRINT(EM_ASSESS):   __event__ = craw;
MPRINT(EM_ASSESS):   end;
MPRINT(EM_ASSESS):   ELSE do;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("EVENTVALUERAW", NRAW );
MPRINT(EM_ASSESS):   __event__ = nraw;
MPRINT(EM_ASSESS):   end;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF LAST.NAME THEN DO;
 
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   * .............. IN NOMINAL CASE, NEED TO GROUP ALL '0' ;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   NUM0 = SUM (CUMFREQ, - NUM1);
MPRINT(EM_ASSESS):   IF NUM0 < 0 THEN NUM0 = 0;
MPRINT(EM_ASSESS):   IF NUM1 = . THEN NUM1 = 0;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUM0", NUM0 );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUM1", NUM1);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("PNUM1", NUM1 / CUMFREQ);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("PNUM0", (CUMFREQ - NUM1) / CUMFREQ);
MPRINT(EM_ASSESS):   IF TYPE = "C" THEN DO;
MPRINT(EM_ASSESS):   FLAG0_1 = 0;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("TARGETTYPE", "C" );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE IF TYPE = "N" THEN DO;
MPRINT(EM_ASSESS):   IF "" = " " THEN DO;
MPRINT(EM_ASSESS):   IF "1" NE "1" THEN FLAG0_1 = 0;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("TARGETTYPE", "N" );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ................... IF TYPE = N;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("FLAG0_1", FLAG0_1 );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ..................IF LAST.NAME ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ...............IF LEVEL NE '.' ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * .............. IF NAME = TARGET;
MPRINT(EM_ASSESS):   ELSE IF "" > " " AND UPCASE(NAME) = UPCASE("") THEN DO;
MPRINT(EM_ASSESS):   NUMDECISIONS + 1;
MPRINT(EM_ASSESS):   LEVEL = TRANSLATE (LEVEL, "_", "'", "_", '"');
MPRINT(EM_ASSESS):   CALL SYMPUTX ("D_LABEL" || LEFT (PUT (NUMDECISIONS, 3.)), LEVEL );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ..................... ELSE IF UPCASE;
MPRINT(EM_ASSESS):   IF EOF THEN DO;
MPRINT(EM_ASSESS):   output _auxeventname;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMOBS", CUMFREQ);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMDECISIONS", NUMDECISIONS);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   DATA _NULL_;
MPRINT(EM_ASSESS):   SET VAROUT END = EOF;
MPRINT(EM_ASSESS):   IF UPCASE (NAME) = UPCASE ("P_DepVar1") THEN DO;
MPRINT(EM_ASSESS):   IF N = 0 THEN DO;
MPRINT(EM_ASSESS):   PUT //// "          Warning: All posterior probabilities are missing
values ";
MPRINT(EM_ASSESS):   PUT ///;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("ALLMISS", 1);
MPRINT(EM_ASSESS):   STOP;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("ALLMISS", 0);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MINPROB", MIN);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROB", MAX);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("DIFF", MAX - MIN);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NMISSPROB", NMISS);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE IF UPCASE (NAME) = UPCASE ("_tmpfreqvar_") THEN DO;
MPRINT(EM_ASSESS):   AUXMIN = MIN - INT (MIN);
MPRINT(EM_ASSESS):   AUXMAX = MAX - INT (MAX);
MPRINT(EM_ASSESS):   IF AUXMIN > 0 OR AUXMAX > 0 THEN CALL SYMPUTX ("USEWEIGHT", "Y");
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("USEWEIGHT", "N");
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   DATA _ANY0;
MPRINT(EM_ASSESS):   SET _ea_tmpdata (KEEP = F_DepVar P_DepVar1 _tmpfreqvar_ );
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ................... No Formats;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   IF LEFT ( F_DepVar ) = "1" THEN NTARGET = 1;
MPRINT(EM_ASSESS):   ELSE NTARGET = 0;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .............. Before proc summary of binary case;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   PROC SUMMARY DATA = _ANY0 (KEEP = P_DepVar1 NTARGET _tmpfreqvar_ WHERE =
(NTARGET > . )) NWAY MISSING;
MPRINT(EM_ASSESS):   ;
MPRINT(EM_ASSESS):   CLASS P_DepVar1 ;
MPRINT(EM_ASSESS):   VAR NTARGET ;
MPRINT(EM_ASSESS):   FREQ _tmpfreqvar_ ;
MPRINT(EM_ASSESS):   OUTPUT OUT = ANYSUM (DROP = _TYPE_) MEAN = _MEANTARGET _MEANFREQVAR ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .................... Main Data Set Processing, Binary case;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   DATA WORK._TEMPRANK (KEEP = BASECAPC BASECAP __EVENT__ BASEEVENTS
BASEGAIN BASELIFT BASERESP BASERESPC BESTCAP BESTCAPC BESTGAIN BESTLIFT BESTLIFTC
BESTNUMEVENTS BESTRESP BESTRESPC BIN CBASELIFT C_LIFT C_P_CAPT_RESP C_P_RESP GAIN LIFT MAXPROB
MINPROB MNPROB NUMNONRESP NUMOBS NUMRESP PERCENTILE P_CAPT_RESP P_RESP ) WORK._TEMPSCOREDIST
(KEEP = BIN LOWERPROB UPPERPROB EVENTVALUE SCR_NUMEVENTS MODELSCORE SCR_NUMNONEVENTS RANGE
NUMOBSINGROUP PERCOBSINGROUP C_PERCOBSINGROUP SCR_P_EVENTS SCR_CP_EVENTS SCR_P_NONEVENTS
SCR_CP_NONEVENTS SCR_MNPROB SCR_MINPROB SCR_MAXPROB ) ;
 
MPRINT(EM_ASSESS):   SET ANYSUM END = EOF;
 
MPRINT(EM_ASSESS):   IF _N_ = 1 THEN SET _AUXEVENTNAME;
 
MPRINT(EM_ASSESS):   RETAIN MINPROB1 - MINPROB20 1 MAXPROB1 - MAXPROB20 0 MNPROB1 - MNPROB20 0
NUMOBS1 - NUMOBS20 0 NUMRESP1 - NUMRESP20 0 TRUEPOS1 - TRUEPOS100 0 TRUENEG1 - TRUENEG100 0
FALSEPOS1 - FALSEPOS100 0 FALSENEG1 - FALSENEG100 0 EVENTS1 - EVENTS100 NONEVENTS1 -
NONEVENTS100 0 FIRSTIN1 - FIRSTIN100 . LASTIN1 - LASTIN100 . RESPRATE 0.151221567 _NEVENTS 359
_NNONEVENTS 2015 TARGET "NTARGET" ;
MPRINT(EM_ASSESS):   ARRAY MINPROBS (20) MINPROB1 - MINPROB20;
MPRINT(EM_ASSESS):   ARRAY MAXPROBS (20) MAXPROB1 - MAXPROB20;
MPRINT(EM_ASSESS):   ARRAY MNPROBS (20) MNPROB1 - MNPROB20;
MPRINT(EM_ASSESS):   ARRAY NUMOBSS (20) NUMOBS1 - NUMOBS20;
MPRINT(EM_ASSESS):   ARRAY NUMRESPS (20) NUMRESP1 - NUMRESP20;
MPRINT(EM_ASSESS):   ARRAY TRUEPOSX (100) TRUEPOS1 - TRUEPOS100;
MPRINT(EM_ASSESS):   ARRAY FALSEPOSX (100) FALSEPOS1 - FALSEPOS100;
MPRINT(EM_ASSESS):   ARRAY FALSENEGX (100) FALSENEG1 - FALSENEG100;
MPRINT(EM_ASSESS):   ARRAY TRUENEGX (100) TRUENEG1 - TRUENEG100;
MPRINT(EM_ASSESS):   ARRAY _EVENTS (100) EVENTS1 - EVENTS100;
MPRINT(EM_ASSESS):   ARRAY NONEVENTS (100) NONEVENTS1 - NONEVENTS100;
MPRINT(EM_ASSESS):   ARRAY FIRSTIN (100) FIRSTIN1 - FIRSTIN100;
MPRINT(EM_ASSESS):   ARRAY LASTIN (100) LASTIN1 - LASTIN100;
MPRINT(EM_ASSESS):   RETAIN SCR_MNPROB1 - SCR_MNPROB100 0 SCR_MINPROB1 - SCR_MINPROB100 1
SCR_MAXPROB1 - SCR_MAXPROB100 0;
MPRINT(EM_ASSESS):   ARRAY SCR_MNPROBS (100) SCR_MNPROB1 - SCR_MNPROB100;
MPRINT(EM_ASSESS):   ARRAY SCR_MINPROBS (100) SCR_MINPROB1 - SCR_MINPROB100;
MPRINT(EM_ASSESS):   ARRAY SCR_MAXPROBS (100) SCR_MAXPROB1 - SCR_MAXPROB100;
MPRINT(EM_ASSESS):   DROP SCR_MINPROB1 - SCR_MINPROB100 SCR_MAXPROB1 - SCR_MAXPROB100
SCR_MNPROB1 - SCR_MNPROB100 ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ...... Area For 8 Financials ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   IF _MEANTARGET = . THEN _MEANTARGET = RESPRATE;
MPRINT(EM_ASSESS):   DROP N1 _K SUMWEIGHTS ;
MPRINT(EM_ASSESS):   SUMWEIGHTS = 1;
 
MPRINT(EM_ASSESS):   DO _K = 1 TO CEIL (_FREQ_);
MPRINT(EM_ASSESS):   IF _K = CEIL (_FREQ_) THEN DO;
MPRINT(EM_ASSESS):   IF _FREQ_ < CEIL (_FREQ_) THEN _WEIGHT = _FREQ_ - FLOOR (_FREQ_);
MPRINT(EM_ASSESS):   ELSE _WEIGHT = 1;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE _WEIGHT = 1;
MPRINT(EM_ASSESS):   N1 + _WEIGHT;
MPRINT(EM_ASSESS):   NTARGET = _MEANTARGET ;
MPRINT(EM_ASSESS):   DECILE = MIN (20, CEIL (N1 * 20 / 2374));
MPRINT(EM_ASSESS):   MINPROBS ( DECILE) = MIN (MINPROBS ( DECILE), P_DepVar1 );
MPRINT(EM_ASSESS):   MAXPROBS ( DECILE) = MAX (MAXPROBS ( DECILE), P_DepVar1 );
MPRINT(EM_ASSESS):   MNPROBS ( DECILE) = SUM (MNPROBS ( DECILE), P_DepVar1 * _WEIGHT);
MPRINT(EM_ASSESS):   NUMOBSS ( DECILE) = NUMOBSS ( DECILE) + _WEIGHT;
MPRINT(EM_ASSESS):   NUMRESPS ( DECILE) = NUMRESPS ( DECILE) + _MEANTARGET * _WEIGHT;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ outside of do loop, Area for final ROC;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   RANKDELTA = (ROUND ( _FREQ_ ) + 1) / 2;
MPRINT(EM_ASSESS):   RANK = UNTIEDRANK + RANKDELTA;
MPRINT(EM_ASSESS):   DROP RANK ;
MPRINT(EM_ASSESS):   SUMRANK1 + RANK * ROUND (_MEANTARGET * _FREQ_, .0000001);
MPRINT(EM_ASSESS):   UNTIEDRANK + ROUND (_FREQ_, .00000001);
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ............ Area For ROC Curve;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   DO _K = 1 TO 100;
MPRINT(EM_ASSESS):   IF P_DepVar1 * 100 >= _K THEN DO;
MPRINT(EM_ASSESS):   TRUEPOSX ( _K ) + _FREQ_ * _MEANTARGET ;
MPRINT(EM_ASSESS):   FALSEPOSX ( _K ) + _FREQ_ * (1 - _MEANTARGET) ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   TRUENEGX ( _K ) + _FREQ_ * ( 1 - _MEANTARGET) ;
MPRINT(EM_ASSESS):   FALSENEGX ( _K ) + _FREQ_ * _MEANTARGET ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   SLOT = MIN (MAX (CEIL (P_DepVar1 * 100), 1), 100) ;
MPRINT(EM_ASSESS):   DROP SLOT;
MPRINT(EM_ASSESS):   FIRSTIN ( SLOT ) = MIN ( FIRSTIN ( SLOT ), P_DepVar1);
MPRINT(EM_ASSESS):   LASTIN ( SLOT ) = MAX ( LASTIN ( SLOT ), P_DepVar1);
MPRINT(EM_ASSESS):   _EVENTS ( SLOT) = _EVENTS ( SLOT) + _FREQ_ * _MEANTARGET;
MPRINT(EM_ASSESS):   NONEVENTS ( SLOT) = NONEVENTS ( SLOT) + _FREQ_ * (1 - _MEANTARGET);
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ START OF OUTDIST IN BINARY CASE MAIN DATA STEP ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   SCR_MNPROBS ( SLOT ) = SUM (SCR_MNPROBS (SLOT), P_DepVar1 * _FREQ_ );
MPRINT(EM_ASSESS):   SCR_MINPROBS ( SLOT ) = MIN (SCR_MINPROBS (SLOT), P_DepVar1 );
MPRINT(EM_ASSESS):   SCR_MAXPROBS ( SLOT ) = MAX (SCR_MAXPROBS (SLOT), P_DepVar1 );
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ End of Outdist in Binary case main DATA STEP ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   IF EOF THEN DO;
MPRINT(EM_ASSESS):   PUT //;
MPRINT(EM_ASSESS):   DO K = 1 TO 20;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   LENGTH EVENTVALUE $ 32;
MPRINT(EM_ASSESS):   RETAIN EVENTVALUE "1" ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ......... Start of EOF area of BINARY processing of main data set ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SUMRANK1", SUMRANK1);
MPRINT(EM_ASSESS):   LENGTH DATAROLE $ 10;
MPRINT(EM_ASSESS):   RETAIN DATAROLE "TRAIN" ;
MPRINT(EM_ASSESS):   RETAIN OVLMIN 0.0000181561 OVLMAX 0.9976678685 ;
MPRINT(EM_ASSESS):   DROP OVLMIN OVLMAX ;
MPRINT(EM_ASSESS):   C_NUMOBS = 0;
MPRINT(EM_ASSESS):   C_NUM_RESP = 0;
MPRINT(EM_ASSESS):   C_NUM_NONRESP = 0;
MPRINT(EM_ASSESS):   C_P_RESP = 0;
MPRINT(EM_ASSESS):   P_CAPT_RESP = 0;
MPRINT(EM_ASSESS):   C_P_CAPT_RESP = 0;
MPRINT(EM_ASSESS):   PREVIOUSPROFIT = 0;
MPRINT(EM_ASSESS):   MAXPROFIT = 0;
MPRINT(EM_ASSESS):   _KS_BIN_ = 0;
MPRINT(EM_ASSESS):   DROP _KS_BIN_;
MPRINT(EM_ASSESS):   AVGNUMRESP = _NEVENTS / 20;
MPRINT(EM_ASSESS):   BASERESP = 100 * RESPRATE;
MPRINT(EM_ASSESS):   BASERESPC = BASERESP;
MPRINT(EM_ASSESS):   BASECAP = 100 / 20;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........................Start OF Gainschart = Outranks Area;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   _KS_BIN_PROB = 0;
MPRINT(EM_ASSESS):   DO GROUP = 20 TO 1 BY -1;
 
MPRINT(EM_ASSESS):   BASECAPC + BASECAP;
MPRINT(EM_ASSESS):   PERCENTILE = GROUP * (100 / 20);
MPRINT(EM_ASSESS):   MINPROB = MINPROBS ( GROUP);
MPRINT(EM_ASSESS):   MAXPROB = MAXPROBS ( GROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MINPROB" || LEFT ( PUT (GROUP, 3.)), MINPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROB" || LEFT ( PUT (GROUP, 3.)), MAXPROB);
MPRINT(EM_ASSESS):   NUMOBS = NUMOBSS ( GROUP);
MPRINT(EM_ASSESS):   IF NUMOBS > 0 THEN MNPROB = MNPROBS ( GROUP) / NUMOBS;
MPRINT(EM_ASSESS):   ELSE MNPROB = .;
MPRINT(EM_ASSESS):   C_NUMOBS = SUM (NUMOBS, C_NUMOBS);
MPRINT(EM_ASSESS):   NUMRESP = NUMRESPS ( GROUP);
MPRINT(EM_ASSESS):   NUMNONRESP = NUMOBS - NUMRESP;
MPRINT(EM_ASSESS):   C_AVGNUM_RESP + AVGNUMRESP;
MPRINT(EM_ASSESS):   IF C_NUMOBS <= _NEVENTS THEN DO;
MPRINT(EM_ASSESS):   BESTNUMEVENTS = NUMOBS;
MPRINT(EM_ASSESS):   BESTCAPC = C_NUMOBS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   BASEEVENTS = _NEVENTS / 20;
MPRINT(EM_ASSESS):   BASENONEVENTS = 0;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   FLAG + 1;
MPRINT(EM_ASSESS):   DROP FLAG;
MPRINT(EM_ASSESS):   BESTNUMEVENTS = _NEVENTS - C_NUMOBS + NUMOBS;
MPRINT(EM_ASSESS):   IF FLAG > 1 THEN BESTNUMEVENTS = 0;
MPRINT(EM_ASSESS):   BESTCAPC = 100;
MPRINT(EM_ASSESS):   IF C_NUMOBS - _NEVENTS <= NUMOBS THEN DO;
MPRINT(EM_ASSESS):   BASEEVENTS = C_NUMOBS - _NEVENTS;
MPRINT(EM_ASSESS):   BASENONEVENTS = NUMOBS - C_NUMOBS + _NEVENTS;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   BASEEVENTS = 0;
MPRINT(EM_ASSESS):   BASENONEVENTS = NUMOBS;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   BESTCAP = BESTNUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   BESTLIFT = BESTNUMEVENTS / AVGNUMRESP;
MPRINT(EM_ASSESS):   C_BESTNUMEVENTS + BESTNUMEVENTS;
MPRINT(EM_ASSESS):   DROP C_BESTNUMEVENTS;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN BESTLIFTC = C_BESTNUMEVENTS / (_NEVENTS / 2374 *
C_NUMOBS);
MPRINT(EM_ASSESS):   ELSE BESTLIFTC = .;
MPRINT(EM_ASSESS):   IF NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   BESTRESP = BESTNUMEVENTS * 100 / NUMOBS;
MPRINT(EM_ASSESS):   P_RESP = NUMRESP * 100 / NUMOBS;
MPRINT(EM_ASSESS):   P_NONRESP = NUMNONRESP * 100 / NUMOBS;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   BESTRESP = .;
MPRINT(EM_ASSESS):   P_RESP = .;
MPRINT(EM_ASSESS):   P_NONRESP = .;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   BESTRESPC = C_BESTNUMEVENTS * 100 / C_NUMOBS;
MPRINT(EM_ASSESS):   BESTGAIN = MAX (0, ((C_BESTNUMEVENTS / C_NUMOBS ) / ( AVGNUMRESP /
NUMOBS) - 1) * 100);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   BESTRESPC = .;
MPRINT(EM_ASSESS):   BESTGAIN = .;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF NUMNONRESP > 0 THEN ODDS = NUMRESP / NUMNONRESP;
MPRINT(EM_ASSESS):   ELSE ODDS = .;
MPRINT(EM_ASSESS):   C_NUM_RESP = SUM (C_NUM_RESP , NUMRESP );
MPRINT(EM_ASSESS):   C_NUM_NONRESP = SUM (C_NUM_NONRESP, NUMNONRESP );
MPRINT(EM_ASSESS):   IF C_NUM_NONRESP > 0 THEN C_ODDS = C_NUM_RESP / C_NUM_NONRESP;
MPRINT(EM_ASSESS):   ELSE C_ODDS = .;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   C_P_RESP = C_NUM_RESP * 100 / C_NUMOBS;
MPRINT(EM_ASSESS):   GAIN = ABS(100 * (((C_NUM_RESP / C_NUMOBS ) / (_NEVENTS / 2374)) - 1));
MPRINT(EM_ASSESS):   BASEGAIN = 100 * (( (C_AVGNUM_RESP / C_NUMOBS) / ( AVGNUMRESP / NUMOBS))
- 1);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   GAIN = .;
MPRINT(EM_ASSESS):   BASEGAIN = .;
MPRINT(EM_ASSESS):   C_P_RESP = .;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF BASEGAIN <= 0 THEN BASEGAIN = 0;
MPRINT(EM_ASSESS):   P_CAPT_RESP = NUMRESP * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   P_CAPT_NONRESP = NUMNONRESP * 100 / ( 2374 - _NEVENTS);
MPRINT(EM_ASSESS):   C_P_CAPT_RESP = C_NUM_RESP * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   C_P_CAPT_NONRESP = C_NUM_NONRESP * 100 / ( 2374 - _NEVENTS);
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * Area For Binned KS in Outranks area;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   _DIFFERENCE = C_P_CAPT_RESP - C_P_CAPT_NONRESP ;
MPRINT(EM_ASSESS):   IF _KS_BIN_ < _DIFFERENCE THEN DO;
MPRINT(EM_ASSESS):   _KS_BIN_ = _DIFFERENCE;
MPRINT(EM_ASSESS):   _KS_BIN_PROB = MINPROB + (MAXPROB - MINPROB) / 2 ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   LIFT = P_RESP * .01 / RESPRATE ;
MPRINT(EM_ASSESS):   C_LIFT = C_P_RESP * .01 / RESPRATE;
MPRINT(EM_ASSESS):   IF NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   BASELIFT = AVGNUMRESP / ( RESPRATE * NUMOBS );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE BASELIFT = .;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN CBASELIFT = C_AVGNUM_RESP / (RESPRATE * C_NUMOBS);
MPRINT(EM_ASSESS):   ELSE CBASELIFT = .;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ WITHIN DO LOOP FOR OUTRANKS;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   BIN = 20 + 1 - GROUP;
MPRINT(EM_ASSESS):   PERCENTILE = BIN * (100 / 20);
MPRINT(EM_ASSESS):   B_C_P_RESP = PERCENTILE;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPRANK ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........................ END OF GAINSCHART = OUTRANKS AREA;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROFITGROUP" , MAXPROFITGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROFIT" , MAXPROFIT );
MPRINT(EM_ASSESS):   KS_ABSDIFF = 0 ;
MPRINT(EM_ASSESS):   MINPRECTPR = 9999;
MPRINT(EM_ASSESS):   Y0 = 1 - RESPRATE;
MPRINT(EM_ASSESS):   Y1 = RESPRATE;
MPRINT(EM_ASSESS):   MAXMUTUAL = 0;
MPRINT(EM_ASSESS):   DROP MAXMUTUAL KSPROB Y0 Y1 KS_ABSDIFF MINPRECTPR;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .....................About to start Processing Outroc ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........................... Finished Processing Outroc ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .............. Outdist ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   BIN = 20 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS96 - EVENTS100 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS96 - NONEVENTS100);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB96 -
SCR_MNPROB100) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB96 - SCR_MINPROB100) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB96 - SCR_MAXPROB100) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 20;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 19 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS91 - EVENTS95 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS91 - NONEVENTS95);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB91 -
SCR_MNPROB95) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB91 - SCR_MINPROB95) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB91 - SCR_MAXPROB95) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 19;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 18 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS86 - EVENTS90 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS86 - NONEVENTS90);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB86 -
SCR_MNPROB90) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB86 - SCR_MINPROB90) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB86 - SCR_MAXPROB90) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 18;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 17 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS81 - EVENTS85 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS81 - NONEVENTS85);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB81 -
SCR_MNPROB85) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB81 - SCR_MINPROB85) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB81 - SCR_MAXPROB85) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 17;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 16 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS76 - EVENTS80 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS76 - NONEVENTS80);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB76 -
SCR_MNPROB80) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB76 - SCR_MINPROB80) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB76 - SCR_MAXPROB80) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 16;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 15 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS71 - EVENTS75 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS71 - NONEVENTS75);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB71 -
SCR_MNPROB75) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB71 - SCR_MINPROB75) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB71 - SCR_MAXPROB75) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 15;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 14 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS66 - EVENTS70 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS66 - NONEVENTS70);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB66 -
SCR_MNPROB70) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB66 - SCR_MINPROB70) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB66 - SCR_MAXPROB70) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 14;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 13 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS61 - EVENTS65 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS61 - NONEVENTS65);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB61 -
SCR_MNPROB65) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB61 - SCR_MINPROB65) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB61 - SCR_MAXPROB65) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 13;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 12 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS56 - EVENTS60 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS56 - NONEVENTS60);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB56 -
SCR_MNPROB60) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB56 - SCR_MINPROB60) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB56 - SCR_MAXPROB60) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 12;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 11 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS51 - EVENTS55 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS51 - NONEVENTS55);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB51 -
SCR_MNPROB55) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB51 - SCR_MINPROB55) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB51 - SCR_MAXPROB55) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 11;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 10 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS46 - EVENTS50 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS46 - NONEVENTS50);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB46 -
SCR_MNPROB50) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB46 - SCR_MINPROB50) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB46 - SCR_MAXPROB50) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 10;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 9 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS41 - EVENTS45 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS41 - NONEVENTS45);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB41 -
SCR_MNPROB45) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB41 - SCR_MINPROB45) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB41 - SCR_MAXPROB45) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 9;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 8 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS36 - EVENTS40 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS36 - NONEVENTS40);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB36 -
SCR_MNPROB40) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB36 - SCR_MINPROB40) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB36 - SCR_MAXPROB40) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 8;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 7 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS31 - EVENTS35 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS31 - NONEVENTS35);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB31 -
SCR_MNPROB35) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB31 - SCR_MINPROB35) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB31 - SCR_MAXPROB35) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 7;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 6 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS26 - EVENTS30 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS26 - NONEVENTS30);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB26 -
SCR_MNPROB30) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB26 - SCR_MINPROB30) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB26 - SCR_MAXPROB30) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 6;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 5 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS21 - EVENTS25 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS21 - NONEVENTS25);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB21 -
SCR_MNPROB25) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB21 - SCR_MINPROB25) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB21 - SCR_MAXPROB25) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 5;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 4 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS16 - EVENTS20 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS16 - NONEVENTS20);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB16 -
SCR_MNPROB20) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB16 - SCR_MINPROB20) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB16 - SCR_MAXPROB20) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 4;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 3 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS11 - EVENTS15 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS11 - NONEVENTS15);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB11 -
SCR_MNPROB15) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB11 - SCR_MINPROB15) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB11 - SCR_MAXPROB15) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 3;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 2 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS6 - EVENTS10 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS6 - NONEVENTS10);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB6 -
SCR_MNPROB10) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB6 - SCR_MINPROB10) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB6 - SCR_MAXPROB10) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 2;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 1 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS1 - EVENTS5 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS1 - NONEVENTS5);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB1 - SCR_MNPROB5)
/ NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB1 - SCR_MINPROB5) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB1 - SCR_MAXPROB5) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 2374;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 1;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("KSPROB" , PUT (KSPROB, 5.3 ) );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("_KS_BIN_PROB" , _KS_BIN_PROB );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("_KS_BIN_" , _KS_BIN_ / 100 );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("KSDIFF" , KS_ABSDIFF );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("PRECTPR" , PRECTPR );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXMUTUALPROB" , MAXMUTUALPROB);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   LABEL __EVENT__ = "Event" DECILE = "Depth" BIN = "Bin" NUMOBS = "Number
of Observations" ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * RUN for large data set;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   PROC DATASETS NOLIST;
MPRINT(EM_ASSESS):   DELETE _AUXEVENTNAME;
MPRINT(EM_ASSESS):   QUIT;
 
MPRINT(EM_ASSESS):   OPTION NOCENTER LS = 95;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * Report Vars Area.;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ...........Start OF Outdist Modification;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   PROC DATASETS NOLIST LIB = WORK;
MPRINT(EM_ASSESS):   MODIFY _TEMPSCOREDIST;
MPRINT(EM_ASSESS):   RENAME MODELSCORE = SCORE UPPERPROB = UPPOSTERIOR SCR_CP_EVENTS =
CUMULATIVEPERCENTAGEOFEVENTS SCR_CP_NONEVENTS = CUMULATIVEPERCENTAGEOFNONEVENTS EVENTVALUE =
EVENT LOWERPROB = LOWPOSTERIOR NUMOBSINGROUP = N PERCOBSINGROUP = PERCENTAGE SCR_MINPROB =
_MINP_ SCR_MAXPROB = _MAXP_ SCR_MNPROB = _MEANP_ RANGE = P_LABEL C_PERCOBSINGROUP =
CUMULATIVEPERCENTAGE SCR_NUMEVENTS = NUMBEROFEVENTS SCR_NUMNONEVENTS = NUMBEROFNONEVENTS
SCR_P_EVENTS = PERCENTAGEOFEVENTS SCR_P_NONEVENTS = PERCENTAGEOFNONEVENTS ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .................... OUTDIST MODIFICATION LABEL AREA;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   LABEL BIN = "Bin" N = "Number of Observations" P_LABEL = "Posterior
Probability Range" EVENT = "Event" LOWPOSTERIOR = "Lower Bound Posterior Probability"
PERCENTAGEOFEVENTS = "Percentage of Events" CUMULATIVEPERCENTAGEOFNONEVENTS = "Cumulative
Percentage of Nonevents" CUMULATIVEPERCENTAGE = "Cumulative Percentage" PERCENTAGEOFEVENTS =
"Percentage of Events" PERCENTAGEOFNONEVENTS = "Percentage of Nonevents"
CUMULATIVEPERCENTAGEOFEVENTS = "Cumulative Percentage of Events" UPPOSTERIOR = "Upper Bound
Posterior Probability" NUMBEROFEVENTS = "Number of Events" PERCENTAGE = "Percentage"
NUMBEROFNONEVENTS = "Number of Nonevents" _MEANP_ = "Mean Posterior Probability" _MINP_ = "Min
Posterior Probability" _MAXP_ = "Max Posterior Probability" SCORE = "Model Score" ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   DATA WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   SET WORK._TEMPSCOREDIST (WHERE = (_MEANP_ > .));
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........... END OF OUTDIST MODIFICATION;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ...........Start of OUTRANKS Modification;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   PROC DATASETS NOLIST LIB = WORK;
MPRINT(EM_ASSESS):   MODIFY _TEMPRANK;
MPRINT(EM_ASSESS):   RENAME __EVENT__ = EVENT P_RESP = RESP C_P_CAPT_RESP = CAPC P_CAPT_RESP =
CAP NUMNONRESP = NUMNEVENT NUMRESP = NUMEVENT BASEEVENTS = BASENUMBEROFEVENTS BESTNUMEVENTS =
BESTNUMBEROFEVENTS MAXPROB = _MAXP_ MINPROB = _MINP_ CBASELIFT = BASELIFTC C_LIFT = LIFTC
MNPROB = _MEANP_ PERCENTILE = DECILE NUMOBS = N NUMEVENT = NUMBEROFEVENTS C_P_RESP = RESPC ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ................. OUTRANKS;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   LABEL _MAXP_ = "Max Posterior Probability" _MINP_ = "Min Posterior
Probability" _MEANP_ = "Mean Posterior Probability" BASECAP = "Baseline % Captured Response"
BASECAPC = "Baseline Cumulative % Captured Response" BASENUMBEROFEVENTS = "Baseline Number of
Events" BASEGAIN = "Baseline Gain" BASELIFT = "Baseline Lift" BASELIFTC = "Baseline Cumulative
Lift" BASERESP = "Baseline % Response" BASERESPC = "Baseline Cumulative % Response" BASELIFTC
= "Baseline Cumulative Lift" BESTCAP = "Best % Captured Response" BESTCAPC = "Best Cumulative
% Captured Response" BESTGAIN = "Best Gain" BESTRESP = "Best % Response" BESTRESPC = "Best
Cumulative % Response" BESTLIFT = "Best Lift" BESTLIFTC = "Best Cumulative Lift"
BESTNUMBEROFEVENTS = "Best Number of Events" CAP = "% Captured Response" CAPC = "Cumulative %
Captured Response" DECILE = "Depth" GAIN = "Gain" LIFT = "Lift" LIFTC = "Cumulative Lift"
NUMNEVENT = "Number of Nonevents" N = "Number of Observations" EVENT = "Event" RESPC =
"Cumulative % Response" NUMBEROFEVENTS = "Number of Events" RESP = "% Response" ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   DATA WORK._TEMPRANK;
MPRINT(EM_ASSESS):   SET WORK._TEMPRANK (WHERE = (_MEANP_ > .));
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   proc datasets lib=work nolist;
MPRINT(EM_ASSESS):   delete _ea_tmpdata;
MPRINT(EM_ASSESS):   run;
MPRINT(EM_ASSESS):   quit;
MPRINT(EM_ASSESS):  ;
MPRINT(EM_ASSESS):   OPTION ERRORS = 20;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    data WORK._TEMPRANK;
MPRINT(EM_DIAGRAM):   length target $32 TARGETLABEL $200 dataRole $20;
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   set WORK._TEMPRANK;
MPRINT(EM_DIAGRAM):   retain target "DepVar";
MPRINT(EM_DIAGRAM):   retain TARGETLABEL 'DepVar';
MPRINT(EM_DIAGRAM):   retain dataRole "TRAIN";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMRANK;
MPRINT(EM_DIAGRAM):   set WORK._TEMPRANK;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK._TEMPSCOREDIST;
MPRINT(EM_DIAGRAM):   length target $32 TARGETLABEL $200 dataRole $20;
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   set WORK._TEMPSCOREDIST;
MPRINT(EM_DIAGRAM):   retain target "DepVar";
MPRINT(EM_DIAGRAM):   retain TARGETLABEL 'DepVar';
MPRINT(EM_DIAGRAM):   retain dataRole "TRAIN";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMSCOREDIST;
MPRINT(EM_DIAGRAM):   set WORK._TEMPSCOREDIST;
MPRINT(EM_DIAGRAM):   run;
1791427    data EM_temp_assessMeta;
MPRINT(EM_DIAGRAM):    data EM_temp_assessMeta;
1791428    set EMWS8.Rule3_CMeta_TRAIN;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_CMeta_TRAIN;
1791429    where role in('DECISION', 'PREDICT', 'RESIDUAL', 'CLASSIFICATION', 'ASSESS', 'COST')
1791429  ! ;
MPRINT(EM_DIAGRAM):   where role in('DECISION', 'PREDICT', 'RESIDUAL', 'CLASSIFICATION',
'ASSESS', 'COST');
1791430    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 7 observations read from the data set EMWS8.RULE3_CMETA_TRAIN.
      WHERE role in ('ASSESS', 'CLASSIFICATION', 'COST', 'DECISION', 'PREDICT', 'RESIDUAL');
NOTE: The data set WORK.EM_TEMP_ASSESSMETA has 7 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1791431    data EM_temp_assessdata;
MPRINT(EM_DIAGRAM):    data EM_temp_assessdata;
1791432    set EMWS8.Rule3_VALIDATE(keep=
1791433    F_DepVar
1791434    I_DepVar
1791435    P_DepVar0
1791436    P_DepVar1
1791437    R_DepVar0
1791438    R_DepVar1
1791439    _WARN_
1791440    DepVar
1791441    );
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_VALIDATE(keep= F_DepVar I_DepVar P_DepVar0 P_DepVar1
R_DepVar0 R_DepVar1 _WARN_ DepVar );
1791442    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable _bin is uninitialized.
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: View EMWS8.RULE3_VALIDATE.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
NOTE: There were 1018 observations read from the data set EMWS8.BINNING_VALIDATE.
NOTE: There were 1018 observations read from the data set EMWS8.RULE3_VALIDATE.
NOTE: The data set WORK.EM_TEMP_ASSESSDATA has 1018 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
MPRINT(EM_DIAGRAM):    proc freq data=EM_temp_assessdata noprint;
MPRINT(EM_DIAGRAM):   table I_DepVar*F_DepVar / out = WORK.Rule3_2EMRUW9 nocol norow outpct;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.Rule3_2EMRUW9;
MPRINT(EM_DIAGRAM):   length _TYPE_ $10 DATAROLE TARGET $32 TARGETLABEL $200 FROM INTO $32
CORRECTTEXT $40 ;
MPRINT(EM_DIAGRAM):   label _TYPE_ = "Outcome Type";
MPRINT(EM_DIAGRAM):   label DATAROLE = "Data Role";
MPRINT(EM_DIAGRAM):   label TARGET = "Target Variable";
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   label FROM = "Target";
MPRINT(EM_DIAGRAM):   label INTO = "Outcome";
MPRINT(EM_DIAGRAM):   label PCT_ROW = "Target Percentage";
MPRINT(EM_DIAGRAM):   label PCT_COL = "Outcome Percentage";
MPRINT(EM_DIAGRAM):   label COUNT = "Frequency Count";
MPRINT(EM_DIAGRAM):   label PERCENT = "Total Percentage";
MPRINT(EM_DIAGRAM):   label CORRECTTEXT = "Correct Text";
MPRINT(EM_DIAGRAM):   label CORRECT = "Correct";
MPRINT(EM_DIAGRAM):   set WORK.Rule3_2EMRUW9(rename=(F_DepVar=FROM I_DepVar=INTO));
MPRINT(EM_DIAGRAM):   retain _TYPE_ 'PREDICTION' DATAROLE "VALIDATE" TARGET "DepVar";
MPRINT(EM_DIAGRAM):   if upcase(TARGET) eq "DEPVAR" then TARGETLABEL = 'DepVar';
MPRINT(EM_DIAGRAM):   if FROM eq INTO then do;
MPRINT(EM_DIAGRAM):   CORRECT = 0;
MPRINT(EM_DIAGRAM):   CORRECTTEXT="Correct";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   CORRECT = 1;
MPRINT(EM_DIAGRAM):   CORRECTTEXT="Incorrect";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_EMCLASSIFICATION;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMCLASSIFICATION WORK.Rule3_2EMRUW9;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.MISCREPORT;
MPRINT(EM_DIAGRAM):   set WORK.Rule3_2EMRUW9;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.MISCREPORT(drop=INTO FROM _TYPE_);
MPRINT(EM_DIAGRAM):   set WORK.MISCREPORT;
MPRINT(EM_DIAGRAM):   length MISC $12;
MPRINT(EM_DIAGRAM):   if FROM='1' and INTO='1' then MISC='TRUEEVENT';
MPRINT(EM_DIAGRAM):   else if FROM='1' and INTO ne '1' then MISC='FALSENEVENT';
MPRINT(EM_DIAGRAM):   else if FROM ne '1' and INTO='1' then MISC='FALSEEVENT';
MPRINT(EM_DIAGRAM):   else if FROM ne'1' and INTO ne '1' then MISC='TRUENEVENT';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.MISCREPORT nothreads;
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc summary data=WORK.MISCREPORT NWAY;
MPRINT(EM_DIAGRAM):   output out=WORK.MISCCOUNT(drop=_FREQ_ _TYPE_) SUM=COUNT;
MPRINT(EM_DIAGRAM):   CLASS MISC;
MPRINT(EM_DIAGRAM):   VAR COUNT;
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc transpose data=WORK.MISCCOUNT out=WORK.MISCREPORT(drop=_NAME_
_LABEL_);
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET;
MPRINT(EM_DIAGRAM):   ID MISC;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule3_EMEVENTREPORT;
MPRINT(EM_DIAGRAM):   length TARGETLABEL $200;
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMEVENTREPORT WORK.MISCREPORT;
MPRINT(EM_DIAGRAM):   if upcase(TARGET) eq "DEPVAR" then TARGETLABEL = 'DepVar';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data ASSESS_REPORTMETA;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_VariableSet;
MPRINT(EM_DIAGRAM):   where REPORT='Y';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename temp catalog 'sashelp.emassmt.em_assess.source';
MPRINT(EM_DIAGRAM):   filename temp;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_DepVar_DM;
MPRINT(EM_DIAGRAM):   where _TYPE_="TARGET";
MPRINT(EM_DIAGRAM):   call symput('ASSMT_EVENT', strip(event));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):
MPRINT(EM_ASSESS):   data _ea_tmpdata;
MPRINT(EM_ASSESS):   set EM_temp_assessdata;
MPRINT(EM_ASSESS):   _tmpfreqvar_=1;
MPRINT(EM_ASSESS):   run;
MPRINT(EM_CHECKEMSETINIT):   DATA _NULL_;
MPRINT(EM_CHECKEMSETINIT):   EM_SETINIT = 'N';
MPRINT(EM_CHECKEMSETINIT):   IF SYSPROD('PRODNUM50') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   ELSE IF SYSPROD('PRODNUM448') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   ELSE IF SYSPROD('PRODNUM102') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   ELSE IF SYSPROD('PRODNUM103') THEN EM_SETINIT = 'Y';
MPRINT(EM_CHECKEMSETINIT):   CALL SYMPUT('EM_SETINIT', EM_SETINIT);
MPRINT(EM_CHECKEMSETINIT):   RUN;
MPRINT(EM_ASSESS):  ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ............ Reading in reporting data set;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   DATA _NULL_;
MPRINT(EM_ASSESS):   SET ASSESS_REPORTMETA END = EOF;
MPRINT(EM_ASSESS):   IF TYPE = "C" OR UPCASE (LEVEL) IN ("NOMINAL", "BINARY" , "ORDINAL") THEN
DO;
MPRINT(EM_ASSESS):   IF UPCASE (NAME) NE UPCASE ("F_DepVar") THEN DO;
MPRINT(EM_ASSESS):   NUMCTOREPORT + 1;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("REPORTC" || LEFT (PUT (NUMCTOREPORT, 5.)), NAME);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("RPRT_TRGT", "C");
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE IF TYPE = "N" THEN DO;
MPRINT(EM_ASSESS):   IF UPCASE(NAME) NE UPCASE ("F_DepVar") THEN DO;
MPRINT(EM_ASSESS):   NUMNTOREPORT + 1;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("REPORTN" || LEFT (PUT (NUMNTOREPORT, 5.)), NAME);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("RPRT_TRGT", "N");
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF EOF THEN DO;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMNTOREPORT", NUMNTOREPORT);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMCTOREPORT", NUMCTOREPORT);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMTOREPORT", SUM (NUMNTOREPORT, NUMCTOREPORT));
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   PROC DMDB DATA = _ea_tmpdata VAROUT = VAROUT DMDBCAT = _D CLASSOUT =
_ASSMT_CLASSOUT;
MPRINT(EM_ASSESS):   CLASS F_DepVar ;
 
MPRINT(EM_ASSESS):   VAR P_DepVar1 _tmpfreqvar_ ;
MPRINT(EM_ASSESS):   FREQ _tmpfreqvar_;
MPRINT(EM_ASSESS):   RUN ;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   PROC SORT DATA = _ASSMT_CLASSOUT;
MPRINT(EM_ASSESS):   BY NAME;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   DATA _auxeventname (keep = __event__) ;
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   * ...FLAG0_1 = ..... TARGET IS 0, 1 & EVENT = 1;
 
MPRINT(EM_ASSESS):   ;
MPRINT(EM_ASSESS):   length __event__ $ 32;
MPRINT(EM_ASSESS):   RETAIN FLAG0_1 1 NUM1 . NUM0 . __event__ "_missing_" ;
 
MPRINT(EM_ASSESS):   SET _ASSMT_CLASSOUT END = EOF;
MPRINT(EM_ASSESS):   BY NAME;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ....... LEVEL = BINARY OR NOMINAL OR ORDINAL;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   IF UPCASE(NAME) = UPCASE ("F_DepVar") THEN DO;
MPRINT(EM_ASSESS):   CUMFREQ + FREQUENCY;
MPRINT(EM_ASSESS):   IF LEVEL NE "." THEN DO;
MPRINT(EM_ASSESS):   N1 + 1;
MPRINT(EM_ASSESS):   IF (NRAW NE 0 AND NRAW NE 1) OR TYPE NE "N" OR "" > " " THEN FLAG0_1 = 0;
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   * ......................... IF EVENT NE BLANK;
MPRINT(EM_ASSESS):   * ....................LEVEL IS CHAR VAR ;
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   IF UPCASE("1") = UPCASE(LEVEL) THEN DO;
MPRINT(EM_ASSESS):   NUM1 = FREQUENCY;
MPRINT(EM_ASSESS):   IF TYPE = "C" THEN do;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("EVENTVALUERAW", CRAW );
MPRINT(EM_ASSESS):   __event__ = craw;
MPRINT(EM_ASSESS):   end;
MPRINT(EM_ASSESS):   ELSE do;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("EVENTVALUERAW", NRAW );
MPRINT(EM_ASSESS):   __event__ = nraw;
MPRINT(EM_ASSESS):   end;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF LAST.NAME THEN DO;
 
MPRINT(EM_ASSESS):   * ;
MPRINT(EM_ASSESS):   * .............. IN NOMINAL CASE, NEED TO GROUP ALL '0' ;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   NUM0 = SUM (CUMFREQ, - NUM1);
MPRINT(EM_ASSESS):   IF NUM0 < 0 THEN NUM0 = 0;
MPRINT(EM_ASSESS):   IF NUM1 = . THEN NUM1 = 0;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUM0", NUM0 );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUM1", NUM1);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("PNUM1", NUM1 / CUMFREQ);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("PNUM0", (CUMFREQ - NUM1) / CUMFREQ);
MPRINT(EM_ASSESS):   IF TYPE = "C" THEN DO;
MPRINT(EM_ASSESS):   FLAG0_1 = 0;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("TARGETTYPE", "C" );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE IF TYPE = "N" THEN DO;
MPRINT(EM_ASSESS):   IF "" = " " THEN DO;
MPRINT(EM_ASSESS):   IF "1" NE "1" THEN FLAG0_1 = 0;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("TARGETTYPE", "N" );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ................... IF TYPE = N;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("FLAG0_1", FLAG0_1 );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ..................IF LAST.NAME ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ...............IF LEVEL NE '.' ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * .............. IF NAME = TARGET;
MPRINT(EM_ASSESS):   ELSE IF "" > " " AND UPCASE(NAME) = UPCASE("") THEN DO;
MPRINT(EM_ASSESS):   NUMDECISIONS + 1;
MPRINT(EM_ASSESS):   LEVEL = TRANSLATE (LEVEL, "_", "'", "_", '"');
MPRINT(EM_ASSESS):   CALL SYMPUTX ("D_LABEL" || LEFT (PUT (NUMDECISIONS, 3.)), LEVEL );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   * ..................... ELSE IF UPCASE;
MPRINT(EM_ASSESS):   IF EOF THEN DO;
MPRINT(EM_ASSESS):   output _auxeventname;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMOBS", CUMFREQ);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NUMDECISIONS", NUMDECISIONS);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   DATA _NULL_;
MPRINT(EM_ASSESS):   SET VAROUT END = EOF;
MPRINT(EM_ASSESS):   IF UPCASE (NAME) = UPCASE ("P_DepVar1") THEN DO;
MPRINT(EM_ASSESS):   IF N = 0 THEN DO;
MPRINT(EM_ASSESS):   PUT //// "          Warning: All posterior probabilities are missing
values ";
MPRINT(EM_ASSESS):   PUT ///;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("ALLMISS", 1);
MPRINT(EM_ASSESS):   STOP;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("ALLMISS", 0);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MINPROB", MIN);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROB", MAX);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("DIFF", MAX - MIN);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("NMISSPROB", NMISS);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE IF UPCASE (NAME) = UPCASE ("_tmpfreqvar_") THEN DO;
MPRINT(EM_ASSESS):   AUXMIN = MIN - INT (MIN);
MPRINT(EM_ASSESS):   AUXMAX = MAX - INT (MAX);
MPRINT(EM_ASSESS):   IF AUXMIN > 0 OR AUXMAX > 0 THEN CALL SYMPUTX ("USEWEIGHT", "Y");
MPRINT(EM_ASSESS):   ELSE CALL SYMPUTX ("USEWEIGHT", "N");
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   DATA _ANY0;
MPRINT(EM_ASSESS):   SET _ea_tmpdata (KEEP = F_DepVar P_DepVar1 _tmpfreqvar_ );
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ................... No Formats;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   IF LEFT ( F_DepVar ) = "1" THEN NTARGET = 1;
MPRINT(EM_ASSESS):   ELSE NTARGET = 0;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .............. Before proc summary of binary case;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   PROC SUMMARY DATA = _ANY0 (KEEP = P_DepVar1 NTARGET _tmpfreqvar_ WHERE =
(NTARGET > . )) NWAY MISSING;
MPRINT(EM_ASSESS):   ;
MPRINT(EM_ASSESS):   CLASS P_DepVar1 ;
MPRINT(EM_ASSESS):   VAR NTARGET ;
MPRINT(EM_ASSESS):   FREQ _tmpfreqvar_ ;
MPRINT(EM_ASSESS):   OUTPUT OUT = ANYSUM (DROP = _TYPE_) MEAN = _MEANTARGET _MEANFREQVAR ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .................... Main Data Set Processing, Binary case;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   DATA WORK._TEMPRANK (KEEP = BASECAPC BASECAP __EVENT__ BASEEVENTS
BASEGAIN BASELIFT BASERESP BASERESPC BESTCAP BESTCAPC BESTGAIN BESTLIFT BESTLIFTC
BESTNUMEVENTS BESTRESP BESTRESPC BIN CBASELIFT C_LIFT C_P_CAPT_RESP C_P_RESP GAIN LIFT MAXPROB
MINPROB MNPROB NUMNONRESP NUMOBS NUMRESP PERCENTILE P_CAPT_RESP P_RESP ) WORK._TEMPSCOREDIST
(KEEP = BIN LOWERPROB UPPERPROB EVENTVALUE SCR_NUMEVENTS MODELSCORE SCR_NUMNONEVENTS RANGE
NUMOBSINGROUP PERCOBSINGROUP C_PERCOBSINGROUP SCR_P_EVENTS SCR_CP_EVENTS SCR_P_NONEVENTS
SCR_CP_NONEVENTS SCR_MNPROB SCR_MINPROB SCR_MAXPROB ) ;
 
MPRINT(EM_ASSESS):   SET ANYSUM END = EOF;
 
MPRINT(EM_ASSESS):   IF _N_ = 1 THEN SET _AUXEVENTNAME;
 
MPRINT(EM_ASSESS):   RETAIN MINPROB1 - MINPROB20 1 MAXPROB1 - MAXPROB20 0 MNPROB1 - MNPROB20 0
NUMOBS1 - NUMOBS20 0 NUMRESP1 - NUMRESP20 0 TRUEPOS1 - TRUEPOS100 0 TRUENEG1 - TRUENEG100 0
FALSEPOS1 - FALSEPOS100 0 FALSENEG1 - FALSENEG100 0 EVENTS1 - EVENTS100 NONEVENTS1 -
NONEVENTS100 0 FIRSTIN1 - FIRSTIN100 . LASTIN1 - LASTIN100 . RESPRATE 0.152259332 _NEVENTS 155
_NNONEVENTS 863 TARGET "NTARGET" ;
MPRINT(EM_ASSESS):   ARRAY MINPROBS (20) MINPROB1 - MINPROB20;
MPRINT(EM_ASSESS):   ARRAY MAXPROBS (20) MAXPROB1 - MAXPROB20;
MPRINT(EM_ASSESS):   ARRAY MNPROBS (20) MNPROB1 - MNPROB20;
MPRINT(EM_ASSESS):   ARRAY NUMOBSS (20) NUMOBS1 - NUMOBS20;
MPRINT(EM_ASSESS):   ARRAY NUMRESPS (20) NUMRESP1 - NUMRESP20;
MPRINT(EM_ASSESS):   ARRAY TRUEPOSX (100) TRUEPOS1 - TRUEPOS100;
MPRINT(EM_ASSESS):   ARRAY FALSEPOSX (100) FALSEPOS1 - FALSEPOS100;
MPRINT(EM_ASSESS):   ARRAY FALSENEGX (100) FALSENEG1 - FALSENEG100;
MPRINT(EM_ASSESS):   ARRAY TRUENEGX (100) TRUENEG1 - TRUENEG100;
MPRINT(EM_ASSESS):   ARRAY _EVENTS (100) EVENTS1 - EVENTS100;
MPRINT(EM_ASSESS):   ARRAY NONEVENTS (100) NONEVENTS1 - NONEVENTS100;
MPRINT(EM_ASSESS):   ARRAY FIRSTIN (100) FIRSTIN1 - FIRSTIN100;
MPRINT(EM_ASSESS):   ARRAY LASTIN (100) LASTIN1 - LASTIN100;
MPRINT(EM_ASSESS):   RETAIN SCR_MNPROB1 - SCR_MNPROB100 0 SCR_MINPROB1 - SCR_MINPROB100 1
SCR_MAXPROB1 - SCR_MAXPROB100 0;
MPRINT(EM_ASSESS):   ARRAY SCR_MNPROBS (100) SCR_MNPROB1 - SCR_MNPROB100;
MPRINT(EM_ASSESS):   ARRAY SCR_MINPROBS (100) SCR_MINPROB1 - SCR_MINPROB100;
MPRINT(EM_ASSESS):   ARRAY SCR_MAXPROBS (100) SCR_MAXPROB1 - SCR_MAXPROB100;
MPRINT(EM_ASSESS):   DROP SCR_MINPROB1 - SCR_MINPROB100 SCR_MAXPROB1 - SCR_MAXPROB100
SCR_MNPROB1 - SCR_MNPROB100 ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ...... Area For 8 Financials ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   IF _MEANTARGET = . THEN _MEANTARGET = RESPRATE;
MPRINT(EM_ASSESS):   DROP N1 _K SUMWEIGHTS ;
MPRINT(EM_ASSESS):   SUMWEIGHTS = 1;
 
MPRINT(EM_ASSESS):   DO _K = 1 TO CEIL (_FREQ_);
MPRINT(EM_ASSESS):   IF _K = CEIL (_FREQ_) THEN DO;
MPRINT(EM_ASSESS):   IF _FREQ_ < CEIL (_FREQ_) THEN _WEIGHT = _FREQ_ - FLOOR (_FREQ_);
MPRINT(EM_ASSESS):   ELSE _WEIGHT = 1;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE _WEIGHT = 1;
MPRINT(EM_ASSESS):   N1 + _WEIGHT;
MPRINT(EM_ASSESS):   NTARGET = _MEANTARGET ;
MPRINT(EM_ASSESS):   DECILE = MIN (20, CEIL (N1 * 20 / 1018));
MPRINT(EM_ASSESS):   MINPROBS ( DECILE) = MIN (MINPROBS ( DECILE), P_DepVar1 );
MPRINT(EM_ASSESS):   MAXPROBS ( DECILE) = MAX (MAXPROBS ( DECILE), P_DepVar1 );
MPRINT(EM_ASSESS):   MNPROBS ( DECILE) = SUM (MNPROBS ( DECILE), P_DepVar1 * _WEIGHT);
MPRINT(EM_ASSESS):   NUMOBSS ( DECILE) = NUMOBSS ( DECILE) + _WEIGHT;
MPRINT(EM_ASSESS):   NUMRESPS ( DECILE) = NUMRESPS ( DECILE) + _MEANTARGET * _WEIGHT;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ outside of do loop, Area for final ROC;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   RANKDELTA = (ROUND ( _FREQ_ ) + 1) / 2;
MPRINT(EM_ASSESS):   RANK = UNTIEDRANK + RANKDELTA;
MPRINT(EM_ASSESS):   DROP RANK ;
MPRINT(EM_ASSESS):   SUMRANK1 + RANK * ROUND (_MEANTARGET * _FREQ_, .0000001);
MPRINT(EM_ASSESS):   UNTIEDRANK + ROUND (_FREQ_, .00000001);
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ............ Area For ROC Curve;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   DO _K = 1 TO 100;
MPRINT(EM_ASSESS):   IF P_DepVar1 * 100 >= _K THEN DO;
MPRINT(EM_ASSESS):   TRUEPOSX ( _K ) + _FREQ_ * _MEANTARGET ;
MPRINT(EM_ASSESS):   FALSEPOSX ( _K ) + _FREQ_ * (1 - _MEANTARGET) ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   TRUENEGX ( _K ) + _FREQ_ * ( 1 - _MEANTARGET) ;
MPRINT(EM_ASSESS):   FALSENEGX ( _K ) + _FREQ_ * _MEANTARGET ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   SLOT = MIN (MAX (CEIL (P_DepVar1 * 100), 1), 100) ;
MPRINT(EM_ASSESS):   DROP SLOT;
MPRINT(EM_ASSESS):   FIRSTIN ( SLOT ) = MIN ( FIRSTIN ( SLOT ), P_DepVar1);
MPRINT(EM_ASSESS):   LASTIN ( SLOT ) = MAX ( LASTIN ( SLOT ), P_DepVar1);
MPRINT(EM_ASSESS):   _EVENTS ( SLOT) = _EVENTS ( SLOT) + _FREQ_ * _MEANTARGET;
MPRINT(EM_ASSESS):   NONEVENTS ( SLOT) = NONEVENTS ( SLOT) + _FREQ_ * (1 - _MEANTARGET);
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ START OF OUTDIST IN BINARY CASE MAIN DATA STEP ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   SCR_MNPROBS ( SLOT ) = SUM (SCR_MNPROBS (SLOT), P_DepVar1 * _FREQ_ );
MPRINT(EM_ASSESS):   SCR_MINPROBS ( SLOT ) = MIN (SCR_MINPROBS (SLOT), P_DepVar1 );
MPRINT(EM_ASSESS):   SCR_MAXPROBS ( SLOT ) = MAX (SCR_MAXPROBS (SLOT), P_DepVar1 );
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ End of Outdist in Binary case main DATA STEP ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   IF EOF THEN DO;
MPRINT(EM_ASSESS):   PUT //;
MPRINT(EM_ASSESS):   DO K = 1 TO 20;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   LENGTH EVENTVALUE $ 32;
MPRINT(EM_ASSESS):   RETAIN EVENTVALUE "1" ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ......... Start of EOF area of BINARY processing of main data set ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SUMRANK1", SUMRANK1);
MPRINT(EM_ASSESS):   LENGTH DATAROLE $ 10;
MPRINT(EM_ASSESS):   RETAIN DATAROLE "VALIDATE" ;
MPRINT(EM_ASSESS):   RETAIN OVLMIN 0.000039472 OVLMAX 0.9990849382 ;
MPRINT(EM_ASSESS):   DROP OVLMIN OVLMAX ;
MPRINT(EM_ASSESS):   C_NUMOBS = 0;
MPRINT(EM_ASSESS):   C_NUM_RESP = 0;
MPRINT(EM_ASSESS):   C_NUM_NONRESP = 0;
MPRINT(EM_ASSESS):   C_P_RESP = 0;
MPRINT(EM_ASSESS):   P_CAPT_RESP = 0;
MPRINT(EM_ASSESS):   C_P_CAPT_RESP = 0;
MPRINT(EM_ASSESS):   PREVIOUSPROFIT = 0;
MPRINT(EM_ASSESS):   MAXPROFIT = 0;
MPRINT(EM_ASSESS):   _KS_BIN_ = 0;
MPRINT(EM_ASSESS):   DROP _KS_BIN_;
MPRINT(EM_ASSESS):   AVGNUMRESP = _NEVENTS / 20;
MPRINT(EM_ASSESS):   BASERESP = 100 * RESPRATE;
MPRINT(EM_ASSESS):   BASERESPC = BASERESP;
MPRINT(EM_ASSESS):   BASECAP = 100 / 20;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........................Start OF Gainschart = Outranks Area;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   _KS_BIN_PROB = 0;
MPRINT(EM_ASSESS):   DO GROUP = 20 TO 1 BY -1;
 
MPRINT(EM_ASSESS):   BASECAPC + BASECAP;
MPRINT(EM_ASSESS):   PERCENTILE = GROUP * (100 / 20);
MPRINT(EM_ASSESS):   MINPROB = MINPROBS ( GROUP);
MPRINT(EM_ASSESS):   MAXPROB = MAXPROBS ( GROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MINPROB" || LEFT ( PUT (GROUP, 3.)), MINPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROB" || LEFT ( PUT (GROUP, 3.)), MAXPROB);
MPRINT(EM_ASSESS):   NUMOBS = NUMOBSS ( GROUP);
MPRINT(EM_ASSESS):   IF NUMOBS > 0 THEN MNPROB = MNPROBS ( GROUP) / NUMOBS;
MPRINT(EM_ASSESS):   ELSE MNPROB = .;
MPRINT(EM_ASSESS):   C_NUMOBS = SUM (NUMOBS, C_NUMOBS);
MPRINT(EM_ASSESS):   NUMRESP = NUMRESPS ( GROUP);
MPRINT(EM_ASSESS):   NUMNONRESP = NUMOBS - NUMRESP;
MPRINT(EM_ASSESS):   C_AVGNUM_RESP + AVGNUMRESP;
MPRINT(EM_ASSESS):   IF C_NUMOBS <= _NEVENTS THEN DO;
MPRINT(EM_ASSESS):   BESTNUMEVENTS = NUMOBS;
MPRINT(EM_ASSESS):   BESTCAPC = C_NUMOBS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   BASEEVENTS = _NEVENTS / 20;
MPRINT(EM_ASSESS):   BASENONEVENTS = 0;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   FLAG + 1;
MPRINT(EM_ASSESS):   DROP FLAG;
MPRINT(EM_ASSESS):   BESTNUMEVENTS = _NEVENTS - C_NUMOBS + NUMOBS;
MPRINT(EM_ASSESS):   IF FLAG > 1 THEN BESTNUMEVENTS = 0;
MPRINT(EM_ASSESS):   BESTCAPC = 100;
MPRINT(EM_ASSESS):   IF C_NUMOBS - _NEVENTS <= NUMOBS THEN DO;
MPRINT(EM_ASSESS):   BASEEVENTS = C_NUMOBS - _NEVENTS;
MPRINT(EM_ASSESS):   BASENONEVENTS = NUMOBS - C_NUMOBS + _NEVENTS;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   BASEEVENTS = 0;
MPRINT(EM_ASSESS):   BASENONEVENTS = NUMOBS;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   BESTCAP = BESTNUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   BESTLIFT = BESTNUMEVENTS / AVGNUMRESP;
MPRINT(EM_ASSESS):   C_BESTNUMEVENTS + BESTNUMEVENTS;
MPRINT(EM_ASSESS):   DROP C_BESTNUMEVENTS;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN BESTLIFTC = C_BESTNUMEVENTS / (_NEVENTS / 1018 *
C_NUMOBS);
MPRINT(EM_ASSESS):   ELSE BESTLIFTC = .;
MPRINT(EM_ASSESS):   IF NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   BESTRESP = BESTNUMEVENTS * 100 / NUMOBS;
MPRINT(EM_ASSESS):   P_RESP = NUMRESP * 100 / NUMOBS;
MPRINT(EM_ASSESS):   P_NONRESP = NUMNONRESP * 100 / NUMOBS;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   BESTRESP = .;
MPRINT(EM_ASSESS):   P_RESP = .;
MPRINT(EM_ASSESS):   P_NONRESP = .;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   BESTRESPC = C_BESTNUMEVENTS * 100 / C_NUMOBS;
MPRINT(EM_ASSESS):   BESTGAIN = MAX (0, ((C_BESTNUMEVENTS / C_NUMOBS ) / ( AVGNUMRESP /
NUMOBS) - 1) * 100);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   BESTRESPC = .;
MPRINT(EM_ASSESS):   BESTGAIN = .;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF NUMNONRESP > 0 THEN ODDS = NUMRESP / NUMNONRESP;
MPRINT(EM_ASSESS):   ELSE ODDS = .;
MPRINT(EM_ASSESS):   C_NUM_RESP = SUM (C_NUM_RESP , NUMRESP );
MPRINT(EM_ASSESS):   C_NUM_NONRESP = SUM (C_NUM_NONRESP, NUMNONRESP );
MPRINT(EM_ASSESS):   IF C_NUM_NONRESP > 0 THEN C_ODDS = C_NUM_RESP / C_NUM_NONRESP;
MPRINT(EM_ASSESS):   ELSE C_ODDS = .;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   C_P_RESP = C_NUM_RESP * 100 / C_NUMOBS;
MPRINT(EM_ASSESS):   GAIN = ABS(100 * (((C_NUM_RESP / C_NUMOBS ) / (_NEVENTS / 1018)) - 1));
MPRINT(EM_ASSESS):   BASEGAIN = 100 * (( (C_AVGNUM_RESP / C_NUMOBS) / ( AVGNUMRESP / NUMOBS))
- 1);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE DO;
MPRINT(EM_ASSESS):   GAIN = .;
MPRINT(EM_ASSESS):   BASEGAIN = .;
MPRINT(EM_ASSESS):   C_P_RESP = .;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   IF BASEGAIN <= 0 THEN BASEGAIN = 0;
MPRINT(EM_ASSESS):   P_CAPT_RESP = NUMRESP * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   P_CAPT_NONRESP = NUMNONRESP * 100 / ( 1018 - _NEVENTS);
MPRINT(EM_ASSESS):   C_P_CAPT_RESP = C_NUM_RESP * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   C_P_CAPT_NONRESP = C_NUM_NONRESP * 100 / ( 1018 - _NEVENTS);
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * Area For Binned KS in Outranks area;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   _DIFFERENCE = C_P_CAPT_RESP - C_P_CAPT_NONRESP ;
MPRINT(EM_ASSESS):   IF _KS_BIN_ < _DIFFERENCE THEN DO;
MPRINT(EM_ASSESS):   _KS_BIN_ = _DIFFERENCE;
MPRINT(EM_ASSESS):   _KS_BIN_PROB = MINPROB + (MAXPROB - MINPROB) / 2 ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   LIFT = P_RESP * .01 / RESPRATE ;
MPRINT(EM_ASSESS):   C_LIFT = C_P_RESP * .01 / RESPRATE;
MPRINT(EM_ASSESS):   IF NUMOBS > 0 THEN DO;
MPRINT(EM_ASSESS):   BASELIFT = AVGNUMRESP / ( RESPRATE * NUMOBS );
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   ELSE BASELIFT = .;
MPRINT(EM_ASSESS):   IF C_NUMOBS > 0 THEN CBASELIFT = C_AVGNUM_RESP / (RESPRATE * C_NUMOBS);
MPRINT(EM_ASSESS):   ELSE CBASELIFT = .;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........ WITHIN DO LOOP FOR OUTRANKS;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   BIN = 20 + 1 - GROUP;
MPRINT(EM_ASSESS):   PERCENTILE = BIN * (100 / 20);
MPRINT(EM_ASSESS):   B_C_P_RESP = PERCENTILE;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPRANK ;
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........................ END OF GAINSCHART = OUTRANKS AREA;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROFITGROUP" , MAXPROFITGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXPROFIT" , MAXPROFIT );
MPRINT(EM_ASSESS):   KS_ABSDIFF = 0 ;
MPRINT(EM_ASSESS):   MINPRECTPR = 9999;
MPRINT(EM_ASSESS):   Y0 = 1 - RESPRATE;
MPRINT(EM_ASSESS):   Y1 = RESPRATE;
MPRINT(EM_ASSESS):   MAXMUTUAL = 0;
MPRINT(EM_ASSESS):   DROP MAXMUTUAL KSPROB Y0 Y1 KS_ABSDIFF MINPRECTPR;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .....................About to start Processing Outroc ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........................... Finished Processing Outroc ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .............. Outdist ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   BIN = 20 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS96 - EVENTS100 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS96 - NONEVENTS100);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB96 -
SCR_MNPROB100) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB96 - SCR_MINPROB100) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB96 - SCR_MAXPROB100) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 20;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 19 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS91 - EVENTS95 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS91 - NONEVENTS95);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB91 -
SCR_MNPROB95) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB91 - SCR_MINPROB95) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB91 - SCR_MAXPROB95) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 19;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 18 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS86 - EVENTS90 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS86 - NONEVENTS90);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB86 -
SCR_MNPROB90) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB86 - SCR_MINPROB90) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB86 - SCR_MAXPROB90) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 18;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 17 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS81 - EVENTS85 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS81 - NONEVENTS85);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB81 -
SCR_MNPROB85) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB81 - SCR_MINPROB85) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB81 - SCR_MAXPROB85) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 17;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 16 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS76 - EVENTS80 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS76 - NONEVENTS80);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB76 -
SCR_MNPROB80) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB76 - SCR_MINPROB80) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB76 - SCR_MAXPROB80) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 16;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 15 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS71 - EVENTS75 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS71 - NONEVENTS75);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB71 -
SCR_MNPROB75) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB71 - SCR_MINPROB75) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB71 - SCR_MAXPROB75) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 15;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 14 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS66 - EVENTS70 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS66 - NONEVENTS70);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB66 -
SCR_MNPROB70) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB66 - SCR_MINPROB70) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB66 - SCR_MAXPROB70) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 14;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 13 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS61 - EVENTS65 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS61 - NONEVENTS65);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB61 -
SCR_MNPROB65) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB61 - SCR_MINPROB65) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB61 - SCR_MAXPROB65) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 13;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 12 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS56 - EVENTS60 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS56 - NONEVENTS60);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB56 -
SCR_MNPROB60) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB56 - SCR_MINPROB60) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB56 - SCR_MAXPROB60) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 12;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 11 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS51 - EVENTS55 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS51 - NONEVENTS55);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB51 -
SCR_MNPROB55) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB51 - SCR_MINPROB55) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB51 - SCR_MAXPROB55) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 11;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 10 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS46 - EVENTS50 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS46 - NONEVENTS50);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB46 -
SCR_MNPROB50) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB46 - SCR_MINPROB50) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB46 - SCR_MAXPROB50) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 10;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 9 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS41 - EVENTS45 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS41 - NONEVENTS45);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB41 -
SCR_MNPROB45) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB41 - SCR_MINPROB45) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB41 - SCR_MAXPROB45) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 9;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 8 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS36 - EVENTS40 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS36 - NONEVENTS40);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB36 -
SCR_MNPROB40) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB36 - SCR_MINPROB40) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB36 - SCR_MAXPROB40) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 8;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 7 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS31 - EVENTS35 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS31 - NONEVENTS35);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB31 -
SCR_MNPROB35) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB31 - SCR_MINPROB35) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB31 - SCR_MAXPROB35) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 7;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 6 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS26 - EVENTS30 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS26 - NONEVENTS30);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB26 -
SCR_MNPROB30) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB26 - SCR_MINPROB30) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB26 - SCR_MAXPROB30) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 6;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 5 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS21 - EVENTS25 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS21 - NONEVENTS25);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB21 -
SCR_MNPROB25) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB21 - SCR_MINPROB25) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB21 - SCR_MAXPROB25) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 5;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 4 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS16 - EVENTS20 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS16 - NONEVENTS20);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB16 -
SCR_MNPROB20) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB16 - SCR_MINPROB20) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB16 - SCR_MAXPROB20) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 4;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 3 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS11 - EVENTS15 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS11 - NONEVENTS15);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB11 -
SCR_MNPROB15) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB11 - SCR_MINPROB15) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB11 - SCR_MAXPROB15) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 3;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 2 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS6 - EVENTS10 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS6 - NONEVENTS10);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB6 -
SCR_MNPROB10) / NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB6 - SCR_MINPROB10) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB6 - SCR_MAXPROB10) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 2;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   BIN = 1 ;
MPRINT(EM_ASSESS):   LOWERPROB = (BIN - 1) / 20;
MPRINT(EM_ASSESS):   UPPERPROB = LOWERPROB + (1 / 20);
MPRINT(EM_ASSESS):   MODELSCORE = LOWERPROB + (1 / 20) / 2;
MPRINT(EM_ASSESS):   RANGE = COMPRESS (PUT (LOWERPROB, 4.2) || "-" || PUT (UPPERPROB, 4.2));
MPRINT(EM_ASSESS):   SCR_NUMEVENTS = SUM ( OF EVENTS1 - EVENTS5 );
MPRINT(EM_ASSESS):   SCR_P_EVENTS = SCR_NUMEVENTS * 100 / _NEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_EVENTS = SUM (SCR_P_EVENTS, SCR_CP_EVENTS);
MPRINT(EM_ASSESS):   SCR_NUMNONEVENTS = SUM ( OF NONEVENTS1 - NONEVENTS5);
MPRINT(EM_ASSESS):   NUMOBSINGROUP = SUM (SCR_NUMEVENTS, SCR_NUMNONEVENTS);
MPRINT(EM_ASSESS):   IF NUMOBSINGROUP > 0 THEN SCR_MNPROB = SUM (OF SCR_MNPROB1 - SCR_MNPROB5)
/ NUMOBSINGROUP;
MPRINT(EM_ASSESS):   ELSE SCR_MNPROB = .;
MPRINT(EM_ASSESS):   SCR_MINPROB = MIN (OF SCR_MINPROB1 - SCR_MINPROB5) ;
MPRINT(EM_ASSESS):   SCR_MAXPROB = MAX (OF SCR_MAXPROB1 - SCR_MAXPROB5) ;
MPRINT(EM_ASSESS):   IF SCR_MINPROB = 1 THEN SCR_MINPROB = .;
MPRINT(EM_ASSESS):   IF SCR_MAXPROB = 0 THEN SCR_MAXPROB = .;
MPRINT(EM_ASSESS):   SCR_P_NONEVENTS = SCR_NUMNONEVENTS * 100 / _NNONEVENTS;
MPRINT(EM_ASSESS):   SCR_CP_NONEVENTS = SUM (SCR_P_NONEVENTS, SCR_CP_NONEVENTS);
MPRINT(EM_ASSESS):   PERCOBSINGROUP = NUMOBSINGROUP * 100 / 1018;
MPRINT(EM_ASSESS):   C_PERCOBSINGROUP = SUM (C_PERCOBSINGROUP, PERCOBSINGROUP);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MINPROB" || LEFT (PUT (BIN, 3.)), LOWERPROB);
MPRINT(EM_ASSESS):   CALL SYMPUTX ("SCR_MAXPROB" || LEFT (PUT (BIN, 3.)), UPPERPROB);
MPRINT(EM_ASSESS):   BIN = 20 + 1 - 1;
MPRINT(EM_ASSESS):   OUTPUT WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   CALL SYMPUTX ("KSPROB" , PUT (KSPROB, 5.3 ) );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("_KS_BIN_PROB" , _KS_BIN_PROB );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("_KS_BIN_" , _KS_BIN_ / 100 );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("KSDIFF" , KS_ABSDIFF );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("PRECTPR" , PRECTPR );
MPRINT(EM_ASSESS):   CALL SYMPUTX ("MAXMUTUALPROB" , MAXMUTUALPROB);
MPRINT(EM_ASSESS):   END;
MPRINT(EM_ASSESS):   LABEL __EVENT__ = "Event" DECILE = "Depth" BIN = "Bin" NUMOBS = "Number
of Observations" ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * RUN for large data set;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   PROC DATASETS NOLIST;
MPRINT(EM_ASSESS):   DELETE _AUXEVENTNAME;
MPRINT(EM_ASSESS):   QUIT;
 
MPRINT(EM_ASSESS):   OPTION NOCENTER LS = 95;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * Report Vars Area.;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ...........Start OF Outdist Modification;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   PROC DATASETS NOLIST LIB = WORK;
MPRINT(EM_ASSESS):   MODIFY _TEMPSCOREDIST;
MPRINT(EM_ASSESS):   RENAME MODELSCORE = SCORE UPPERPROB = UPPOSTERIOR SCR_CP_EVENTS =
CUMULATIVEPERCENTAGEOFEVENTS SCR_CP_NONEVENTS = CUMULATIVEPERCENTAGEOFNONEVENTS EVENTVALUE =
EVENT LOWERPROB = LOWPOSTERIOR NUMOBSINGROUP = N PERCOBSINGROUP = PERCENTAGE SCR_MINPROB =
_MINP_ SCR_MAXPROB = _MAXP_ SCR_MNPROB = _MEANP_ RANGE = P_LABEL C_PERCOBSINGROUP =
CUMULATIVEPERCENTAGE SCR_NUMEVENTS = NUMBEROFEVENTS SCR_NUMNONEVENTS = NUMBEROFNONEVENTS
SCR_P_EVENTS = PERCENTAGEOFEVENTS SCR_P_NONEVENTS = PERCENTAGEOFNONEVENTS ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * .................... OUTDIST MODIFICATION LABEL AREA;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   LABEL BIN = "Bin" N = "Number of Observations" P_LABEL = "Posterior
Probability Range" EVENT = "Event" LOWPOSTERIOR = "Lower Bound Posterior Probability"
PERCENTAGEOFEVENTS = "Percentage of Events" CUMULATIVEPERCENTAGEOFNONEVENTS = "Cumulative
Percentage of Nonevents" CUMULATIVEPERCENTAGE = "Cumulative Percentage" PERCENTAGEOFEVENTS =
"Percentage of Events" PERCENTAGEOFNONEVENTS = "Percentage of Nonevents"
CUMULATIVEPERCENTAGEOFEVENTS = "Cumulative Percentage of Events" UPPOSTERIOR = "Upper Bound
Posterior Probability" NUMBEROFEVENTS = "Number of Events" PERCENTAGE = "Percentage"
NUMBEROFNONEVENTS = "Number of Nonevents" _MEANP_ = "Mean Posterior Probability" _MINP_ = "Min
Posterior Probability" _MAXP_ = "Max Posterior Probability" SCORE = "Model Score" ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   DATA WORK._TEMPSCOREDIST;
MPRINT(EM_ASSESS):   SET WORK._TEMPSCOREDIST (WHERE = (_MEANP_ > .));
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ........... END OF OUTDIST MODIFICATION;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ...........Start of OUTRANKS Modification;
MPRINT(EM_ASSESS):   *;
 
MPRINT(EM_ASSESS):   PROC DATASETS NOLIST LIB = WORK;
MPRINT(EM_ASSESS):   MODIFY _TEMPRANK;
MPRINT(EM_ASSESS):   RENAME __EVENT__ = EVENT P_RESP = RESP C_P_CAPT_RESP = CAPC P_CAPT_RESP =
CAP NUMNONRESP = NUMNEVENT NUMRESP = NUMEVENT BASEEVENTS = BASENUMBEROFEVENTS BESTNUMEVENTS =
BESTNUMBEROFEVENTS MAXPROB = _MAXP_ MINPROB = _MINP_ CBASELIFT = BASELIFTC C_LIFT = LIFTC
MNPROB = _MEANP_ PERCENTILE = DECILE NUMOBS = N NUMEVENT = NUMBEROFEVENTS C_P_RESP = RESPC ;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   * ................. OUTRANKS;
MPRINT(EM_ASSESS):   *;
MPRINT(EM_ASSESS):   LABEL _MAXP_ = "Max Posterior Probability" _MINP_ = "Min Posterior
Probability" _MEANP_ = "Mean Posterior Probability" BASECAP = "Baseline % Captured Response"
BASECAPC = "Baseline Cumulative % Captured Response" BASENUMBEROFEVENTS = "Baseline Number of
Events" BASEGAIN = "Baseline Gain" BASELIFT = "Baseline Lift" BASELIFTC = "Baseline Cumulative
Lift" BASERESP = "Baseline % Response" BASERESPC = "Baseline Cumulative % Response" BASELIFTC
= "Baseline Cumulative Lift" BESTCAP = "Best % Captured Response" BESTCAPC = "Best Cumulative
% Captured Response" BESTGAIN = "Best Gain" BESTRESP = "Best % Response" BESTRESPC = "Best
Cumulative % Response" BESTLIFT = "Best Lift" BESTLIFTC = "Best Cumulative Lift"
BESTNUMBEROFEVENTS = "Best Number of Events" CAP = "% Captured Response" CAPC = "Cumulative %
Captured Response" DECILE = "Depth" GAIN = "Gain" LIFT = "Lift" LIFTC = "Cumulative Lift"
NUMNEVENT = "Number of Nonevents" N = "Number of Observations" EVENT = "Event" RESPC =
"Cumulative % Response" NUMBEROFEVENTS = "Number of Events" RESP = "% Response" ;
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   QUIT;
MPRINT(EM_ASSESS):   DATA WORK._TEMPRANK;
MPRINT(EM_ASSESS):   SET WORK._TEMPRANK (WHERE = (_MEANP_ > .));
MPRINT(EM_ASSESS):   RUN;
MPRINT(EM_ASSESS):   proc datasets lib=work nolist;
MPRINT(EM_ASSESS):   delete _ea_tmpdata;
MPRINT(EM_ASSESS):   run;
MPRINT(EM_ASSESS):   quit;
MPRINT(EM_ASSESS):  ;
MPRINT(EM_ASSESS):   OPTION ERRORS = 20;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    data WORK._TEMPRANK;
MPRINT(EM_DIAGRAM):   length target $32 TARGETLABEL $200 dataRole $20;
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   set WORK._TEMPRANK;
MPRINT(EM_DIAGRAM):   retain target "DepVar";
MPRINT(EM_DIAGRAM):   retain TARGETLABEL 'DepVar';
MPRINT(EM_DIAGRAM):   retain dataRole "VALIDATE";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMRANK;
MPRINT(EM_DIAGRAM):   length target $32;
MPRINT(EM_DIAGRAM):   length TARGETLABEL $200;
MPRINT(EM_DIAGRAM):   length dataRole $20;
MPRINT(EM_DIAGRAM):   length EVENT $32;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMRANK WORK._TEMPRANK;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK._TEMPSCOREDIST;
MPRINT(EM_DIAGRAM):   length target $32 TARGETLABEL $200 dataRole $20;
MPRINT(EM_DIAGRAM):   label TARGETLABEL = "Target Label";
MPRINT(EM_DIAGRAM):   set WORK._TEMPSCOREDIST;
MPRINT(EM_DIAGRAM):   retain target "DepVar";
MPRINT(EM_DIAGRAM):   retain TARGETLABEL 'DepVar';
MPRINT(EM_DIAGRAM):   retain dataRole "VALIDATE";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMSCOREDIST;
MPRINT(EM_DIAGRAM):   length target $32;
MPRINT(EM_DIAGRAM):   length TARGETLABEL $200;
MPRINT(EM_DIAGRAM):   length dataRole $20;
MPRINT(EM_DIAGRAM):   length EVENT $32;
MPRINT(EM_DIAGRAM):   length P_LABEL $9;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMSCOREDIST WORK._TEMPSCOREDIST;
MPRINT(EM_DIAGRAM):   run;
1795717    %let _cn = %sysfunc(getoption(CENTER));
1795718    options nocenter;
MPRINT(EM_DIAGRAM):    options nocenter;
1795719    proc print data=EMWS8.Rule3_EMREPORTFIT noobs label;
MPRINT(EM_DIAGRAM):   proc print data=EMWS8.Rule3_EMREPORTFIT noobs label;
1795720    var STAT LABEL TRAIN
1795721    VALIDATE
1795722    ;
MPRINT(EM_DIAGRAM):   var STAT LABEL TRAIN VALIDATE ;
1795723    by TARGET TARGETLABEL;
MPRINT(EM_DIAGRAM):   by TARGET TARGETLABEL;
1795724    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1795725    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_fitstat_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Fit Statistics";
MPRINT(EM_DIAGRAM):   run;
1795726    run;
 
NOTE: There were 9 observations read from the data set EMWS8.RULE3_EMREPORTFIT.
NOTE: The PROCEDURE PRINT printed page 1768.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1795727    title10;
MPRINT(EM_DIAGRAM):   title10;
1795728    options &_cn;
MPRINT(EM_DIAGRAM):   options NOCENTER;
1795729    proc sort data=EMWS8.Rule3_EMCLASSIFICATION nothreads;
MPRINT(EM_DIAGRAM):    proc sort data=EMWS8.Rule3_EMCLASSIFICATION nothreads;
1795730    by DATAROLE TARGET TARGETLABEL;
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET TARGETLABEL;
1795731    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 8 observations read from the data set EMWS8.RULE3_EMCLASSIFICATION.
NOTE: The data set EMWS8.RULE3_EMCLASSIFICATION has 8 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1795732    %let _cn = %sysfunc(getoption(CENTER));
1795733    options nocenter;
MPRINT(EM_DIAGRAM):   options nocenter;
1795734    proc print data=EMWS8.Rule3_EMCLASSIFICATION noobs label;
MPRINT(EM_DIAGRAM):   proc print data=EMWS8.Rule3_EMCLASSIFICATION noobs label;
1795735    var from into pct_row pct_col count percent
1795736    ;
MPRINT(EM_DIAGRAM):   var from into pct_row pct_col count percent ;
1795737    by DATAROLE TARGET TARGETLABEL;
MPRINT(EM_DIAGRAM):   by DATAROLE TARGET TARGETLABEL;
1795738    label FROM = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel ,     NOQUOTE))";
MPRINT(EM_DIAGRAM):   label FROM = "Target";
1795739    label INTO = "%sysfunc(sasmsg(sashelp.dmine, rpt_outcome_vlabel ,    NOQUOTE))";
MPRINT(EM_DIAGRAM):   label INTO = "Outcome";
1795740    label PCT_ROW = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetpct_vlabel ,  NOQUOTE))";
MPRINT(EM_DIAGRAM):   label PCT_ROW = "Target Percentage";
1795741    label PCT_COL = "%sysfunc(sasmsg(sashelp.dmine, rpt_outcomepct_vlabel , NOQUOTE))";
MPRINT(EM_DIAGRAM):   label PCT_COL = "Outcome Percentage";
1795742    label COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel ,      NOQUOTE))";
MPRINT(EM_DIAGRAM):   label COUNT = "Frequency Count";
1795743    label PERCENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_totalpct_vlabel ,   NOQUOTE))";
MPRINT(EM_DIAGRAM):   label PERCENT = "Total Percentage";
1795744    where _TYPE_='PREDICTION';
MPRINT(EM_DIAGRAM):   where _TYPE_='PREDICTION';
1795745    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1795746    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title    , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Classification Table";
MPRINT(EM_DIAGRAM):   run;
1795747    run;
 
NOTE: There were 8 observations read from the data set EMWS8.RULE3_EMCLASSIFICATION.
      WHERE _TYPE_='PREDICTION';
NOTE: The PROCEDURE PRINT printed page 1769.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1795748    title9;
MPRINT(EM_DIAGRAM):   title9;
1795749    title10;
MPRINT(EM_DIAGRAM):   title10;
1795750    options &_cn;
MPRINT(EM_DIAGRAM):   options NOCENTER;
1795751    %let _cn = %sysfunc(getoption(CENTER));
1795752    options nocenter;
MPRINT(EM_DIAGRAM):    options nocenter;
1795753    data EMWS8.Rule3_EMEVENTREPORT;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule3_EMEVENTREPORT;
1795754    length DATAROLE TARGET $32 TARGETLABEL $200 FALSENEVENT TRUENEVENT FALSEEVENT
1795754  ! TRUEEVENT 8;
MPRINT(EM_DIAGRAM):   length DATAROLE TARGET $32 TARGETLABEL $200 FALSENEVENT TRUENEVENT
FALSEEVENT TRUEEVENT 8;
1795755    label DATAROLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel ,    NOQUOTE))"
1795755  !  TARGET = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel ,      NOQUOTE))"
1795755  ! TARGETLABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))"
1795755  ! FALSEEVENT
1795756    = "%sysfunc(sasmsg(sashelp.dmine, rpt_falseevent_vlabel ,  NOQUOTE))" FALSENEVENT =
1795756  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_falsenevent_vlabel , NOQUOTE))" TRUEEVENT =
1795756  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_trueevent_vlabel ,   NOQUOTE))" TRUENEVENT =
1795757       "%sysfunc(sasmsg(sashelp.dmine, rpt_truenevent_vlabel ,  NOQUOTE))";
MPRINT(EM_DIAGRAM):   label DATAROLE = "Data Role" TARGET = "Target" TARGETLABEL = "Target
Label" FALSEEVENT = "False Positive" FALSENEVENT = "False Negative" TRUEEVENT = "True
Positive" TRUENEVENT = "True Negative";
1795758    FALSEEVENT=0;
MPRINT(EM_DIAGRAM):   FALSEEVENT=0;
1795759    FALSENEVENT=0;
MPRINT(EM_DIAGRAM):   FALSENEVENT=0;
1795760    TRUEEVENT=0;
MPRINT(EM_DIAGRAM):   TRUEEVENT=0;
1795761    TRUENEVENT=0;
MPRINT(EM_DIAGRAM):   TRUENEVENT=0;
1795762    set EMWS8.Rule3_EMEVENTREPORT;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule3_EMEVENTREPORT;
1795763    run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set EMWS8.RULE3_EMEVENTREPORT.
NOTE: The data set EMWS8.RULE3_EMEVENTREPORT has 2 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
1795764    proc print data=EMWS8.Rule3_EMEVENTREPORT noobs label;
MPRINT(EM_DIAGRAM):   proc print data=EMWS8.Rule3_EMEVENTREPORT noobs label;
1795765    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1795766    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_eventtable_title    , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Event Classification Table";
MPRINT(EM_DIAGRAM):   by notsorted DATAROLE notsorted TARGET notsorted TARGETLABEL;
MPRINT(EM_DIAGRAM):   run;
1795767    by notsorted DATAROLE notsorted TARGET notsorted TARGETLABEL;
1795768    run;
 
NOTE: There were 2 observations read from the data set EMWS8.RULE3_EMEVENTREPORT.
NOTE: The PROCEDURE PRINT printed page 1770.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1795769    title10;
MPRINT(EM_DIAGRAM):   title10;
1795770    options &_cn;
MPRINT(EM_DIAGRAM):   options NOCENTER;
1795771    proc datasets library=EMWS8 nolist;
MPRINT(EM_DIAGRAM):    proc datasets library=EMWS8 nolist;
1795772    modify Rule3_EMRANK;
MPRINT(EM_DIAGRAM):   modify Rule3_EMRANK;
MPRINT(EM_DIAGRAM):   label target = "Target Variable";
1795773    label target = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetvar_vlabel ,   NOQUOTE))";
MPRINT(EM_DIAGRAM):   label datarole = "Data Role";
1795774    label datarole = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel ,    NOQUOTE))"
1795774  ! ;
MPRINT(EM_DIAGRAM):   run;
1795775    run;
 
NOTE: MODIFY was successful for EMWS8.RULE3_EMRANK.DATA.
1795776    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.14 seconds
      cpu time            0.15 seconds
 
 
1795777    %let _cn = %sysfunc(getoption(CENTER));
1795778    options nocenter;
MPRINT(EM_DIAGRAM):    options nocenter;
1795779    proc print data=EMWS8.Rule3_EMRANK label noobs;
MPRINT(EM_DIAGRAM):   proc print data=EMWS8.Rule3_EMRANK label noobs;
1795780    var
1795781    decile gain lift liftc resp respc N _meanP_;
MPRINT(EM_DIAGRAM):   var decile gain lift liftc resp respc N _meanP_;
1795782    by
1795783    notsorted DATAROLE
1795784    notsorted TARGET
1795785    notsorted TARGETLABEL
1795786    ;
MPRINT(EM_DIAGRAM):   by notsorted DATAROLE notsorted TARGET notsorted TARGETLABEL ;
1795787    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
1795788    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_scoreranking_title , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Assessment Score Rankings";
MPRINT(EM_DIAGRAM):   run;
1795789    run;
 
NOTE: There were 40 observations read from the data set EMWS8.RULE3_EMRANK.
NOTE: The PROCEDURE PRINT printed page 1771.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
1795790    title10;
MPRINT(EM_DIAGRAM):   title10;
1795791    options &_cn;
MPRINT(EM_DIAGRAM):   options NOCENTER;
1795792    proc datasets library=EMWS8 nolist;
MPRINT(EM_DIAGRAM):    proc datasets library=EMWS8 nolist;
1795793    modify Rule3_EMSCOREDIST;
MPRINT(EM_DIAGRAM):   modify Rule3_EMSCOREDIST;
MPRINT(EM_DIAGRAM):   label target = "Target Variable";
1795794    label target = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetvar_vlabel ,
1795794  ! NOQUOTE))";
MPRINT(EM_DIAGRAM):   label datarole = "Data Role";
1795795    label datarole = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel ,    NOQUOTE))"
1795795  ! ;
MPRINT(EM_DIAGRAM):   run;
1795796    run;
 
NOTE: MODIFY was successful for EMWS8.RULE3_EMSCOREDIST.DATA.
1795797    quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
 
 
MPRINT(EM_DIAGRAM):    options nocenter;
MPRINT(EM_DIAGRAM):   proc print data=EMWS8.Rule3_EMSCOREDIST label noobs;
MPRINT(EM_DIAGRAM):   var p_label numberOfEvents numberOfNonEvents _meanp_ percentage;
MPRINT(EM_DIAGRAM):   by notsorted DATAROLE notsorted TARGET notsorted TARGETLABEL ;
MPRINT(EM_DIAGRAM):   where TARGET in( "DepVar" );
MPRINT(EM_DIAGRAM):   title9 ' ';
MPRINT(EM_DIAGRAM):   title10 "Assessment Score Distribution";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   title10;
MPRINT(EM_DIAGRAM):   options NOCENTER;
MPRINT(EM_DIAGRAM):   proc printto;
MPRINT(EM_DIAGRAM):   run;
