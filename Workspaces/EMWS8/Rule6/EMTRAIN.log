MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "10.27 Uhr" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Training Log
Date:                28. April 2016
Time:                10.27 Uhr
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O25FQBLJ 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O25FQBLJ new;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOG 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMLOG.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "10.27 Uhr" );
MPRINT(EM_DIAGRAM):   file _LOG;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                Lukas Fahr";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "Site:                70107571";
MPRINT(EM_DIAGRAM):   put "Platform:            X64_7PRO";
MPRINT(EM_DIAGRAM):   put "Maintenance Release: 9.03.01M2P081512";
MPRINT(EM_DIAGRAM):   put "EM Version:          12.1";
MPRINT(EM_DIAGRAM):   put "* ";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMTRAIN.log" encoding="UTF-8" NOBOM;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _LOG MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_LOGIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _LOGIN 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMSCORE.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMREPORT.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    filename _LOG;
MPRINT(EM_DIAGRAM):    filename _OUT 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMOUTPUT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "28. April 2016" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "10.27 Uhr" );
MPRINT(EM_DIAGRAM):   file _OUT;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                Lukas Fahr";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _OUT MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_OUTIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN 
"C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    filename _OUT;
MPRINT(EM_DIAGRAM):    filename _emtool_ 
'C:\\predictive-models-project\Workspaces\EMWS8\Rule6\EMRUNSTATUS.xml' encoding="UTF-8" NOBOM;
2374938    proc freq data=EMWS8.Rule6_VariableSet noprint;
MPRINT(EM_DIAGRAM):    proc freq data=EMWS8.Rule6_VariableSet noprint;
2374939    table ROLE*LEVEL/out=WORK.Rule6META;
MPRINT(EM_DIAGRAM):   table ROLE*LEVEL/out=WORK.Rule6META;
2374940    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 34 observations read from the data set EMWS8.RULE6_VARIABLESET.
NOTE: The data set WORK.RULE6META has 6 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2374941    proc print data=WORK.Rule6META label noobs;
MPRINT(EM_DIAGRAM):   proc print data=WORK.Rule6META label noobs;
2374942    var ROLE LEVEL COUNT;
MPRINT(EM_DIAGRAM):   var ROLE LEVEL COUNT;
2374943    label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL =
2374943  ! "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT =
2374943  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label ROLE = "Role" LEVEL = "Measurement Level" COUNT = "Frequency 
Count";
2374944    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
2374945    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Variable Summary";
MPRINT(EM_DIAGRAM):   run;
2374946    run;

NOTE: There were 6 observations read from the data set WORK.RULE6META.
NOTE: The PROCEDURE PRINT printed page 2267.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2374947    title10;
MPRINT(EM_DIAGRAM):   title10;
2374948    %let EMNORLEN = %DMNORLEN;
MPRINT(EM_DIAGRAM):   
EMWS8.Meta2_TRAIN EMWS8.Meta2_TRAIN 
EMWS8.Meta2_TRAIN EMWS8.Meta2_TRAIN EMWS8 Meta2_TRAIN 
EMWS8.Meta2_TRAIN EMWS8.Meta2_TRAIN 
EMWS8.Meta2_TRAIN EMWS8.Meta2_TRAIN EMWS8 Meta2_TRAIN 
MPRINT(EM_DIAGRAM):    proc dmdb data=EMWS8.Meta2_TRAIN 
classout=WORK._DMDBCLASSTARGET(keep=NAME NRAW CRAW LEVEL FREQUENCY NMISSPERCENT);
MPRINT(EM_DIAGRAM):   class DepVar(DESC) ;
MPRINT(EM_DIAGRAM):   run;
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _INIT >> 
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >> 
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >> 
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >> 
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >> 
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _term >> 
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   set WORK._DMDBCLASSTARGET;
MPRINT(EM_DIAGRAM):   where ^(NRAW eq . and CRAW eq '') and NAME="DepVar";
MPRINT(EM_DIAGRAM):   if _N_=1 then call symput('_newevent', strip(LEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK._DMDBCLASSTARGET out=_TEMPCLASS(keep=LEVEL FREQUENCY 
NMISSPERCENT rename=(LEVEL=DepVar));
MPRINT(EM_DIAGRAM):   by LEVEL;
MPRINT(EM_DIAGRAM):   where ^(NRAW eq . and CRAW eq '') and NAME="DepVar";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _TEMPCLASS;
MPRINT(EM_DIAGRAM):   set _TEMPCLASS;
MPRINT(EM_DIAGRAM):   NMISSPERCENT= NMISSPERCENT/100;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _sortedDecData;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule6_DepVar_DD;
MPRINT(EM_DIAGRAM):   _levelorder_=_N_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_sortedDecdata;
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   merge _TEMPCLASS(in=_a) _sortedDecdata(in=_b);
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   if (_a and ^_b) or (^_a and _b) then call symput('_emresetDec', '1');
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data EMWS8.Rule6_DepVar_DD;
MPRINT(EM_DIAGRAM):   set EMWS8.Rule6_DepVar_DD;
MPRINT(EM_DIAGRAM):   _levelorder_=_N_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS8.Rule6_DepVar_DD;
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS8.Rule6_DepVar_DD;
MPRINT(EM_DIAGRAM):   merge EMWS8.Rule6_DepVar_DD _TEMPCLASS(rename=(NMISSPERCENT=TRAINPRIOR 
FREQUENCY=COUNT));
MPRINT(EM_DIAGRAM):   by DepVar;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS8.Rule6_DepVar_DD 
out=EMWS8.Rule6_DepVar_DD(drop=_levelorder_);
MPRINT(EM_DIAGRAM):   by _levelorder_;
MPRINT(EM_DIAGRAM):   run;
2374995    data WORK.Rule6_EVENT(KEEP=VARIABLE LABEL LEVEL EVENT NUMLEVELS ORDER);
MPRINT(EM_DIAGRAM):    data WORK.Rule6_EVENT(KEEP=VARIABLE LABEL LEVEL EVENT NUMLEVELS ORDER);
2374996    length ORDER $20;
MPRINT(EM_DIAGRAM):   length ORDER $20;
2374997    label VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel,  NOQUOTE))"
2374997  ! EVENT = "%sysfunc(sasmsg(sashelp.dmine, assmt_event_vlabel, NOQUOTE))" NUMLEVELS =
2374997  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_numcat_vlabel, NOQUOTE))" LEVEL =
2374998       "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" ORDER =
2374998  ! "%sysfunc(sasmsg(sashelp.dmine, meta_order_vlabel, NOQUOTE))" LABEL =
2374998  ! "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label VARIABLE = "Target" EVENT = "Event" NUMLEVELS = "Number of Levels" 
LEVEL = "Measurement Level" ORDER = "Order" LABEL = "Label";
2374999    set EMWS8.RULE6_DEPVAR_DM( where=(_TYPE_="TARGET"));
MPRINT(EM_DIAGRAM):   set EMWS8.RULE6_DEPVAR_DM( where=(_TYPE_="TARGET"));
2375000    NumLevels=2;
MPRINT(EM_DIAGRAM):   NumLevels=2;
2375001    select(upcase(ORDER));
MPRINT(EM_DIAGRAM):   select(upcase(ORDER));
2375002    when('DESC') ORDER = 'Descending';
MPRINT(EM_DIAGRAM):   when('DESC') ORDER = 'Descending';
2375003    when('ASC') ORDER = 'Ascending';
MPRINT(EM_DIAGRAM):   when('ASC') ORDER = 'Ascending';
2375004    when('FMTDESC') ORDER = 'Formatted Descending';
MPRINT(EM_DIAGRAM):   when('FMTDESC') ORDER = 'Formatted Descending';
2375005    when('FMTASC') ORDER = 'Formatted Ascending';
MPRINT(EM_DIAGRAM):   when('FMTASC') ORDER = 'Formatted Ascending';
2375006    otherwise ORDER = 'Descending';
MPRINT(EM_DIAGRAM):   otherwise ORDER = 'Descending';
2375007    end;
MPRINT(EM_DIAGRAM):   end;
2375008    output;
MPRINT(EM_DIAGRAM):   output;
2375009    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1 observations read from the data set EMWS8.RULE6_DEPVAR_DM.
      WHERE _TYPE_='TARGET';
NOTE: The data set WORK.RULE6_EVENT has 1 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2375010    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
2375011    proc print data=WORK.Rule6_EVENT noobs label;
MPRINT(EM_DIAGRAM):   proc print data=WORK.Rule6_EVENT noobs label;
2375012    var VARIABLE EVENT LEVEL NUMLEVELS ORDER LABEL;
MPRINT(EM_DIAGRAM):   var VARIABLE EVENT LEVEL NUMLEVELS ORDER LABEL;
2375013    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
2375014    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_modelEvent_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Model Events";
MPRINT(EM_DIAGRAM):   run;
2375015    run;

NOTE: There were 1 observations read from the data set WORK.RULE6_EVENT.
NOTE: The PROCEDURE PRINT printed page 2268.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375016    title10;
MPRINT(EM_DIAGRAM):   title10;
"No decisions defined for target "DepVar"." 
2375017    proc print data = EMWS8.Rule6_DepVar_DM noobs label;
MPRINT(EM_DIAGRAM):    proc print data = EMWS8.Rule6_DepVar_DM noobs label;
2375018    var _type_ variable label;
MPRINT(EM_DIAGRAM):   var _type_ variable label;
2375019    where _type_ ^in('MATRIX', 'DECISION', 'TRAINPRIOR', 'DATAPRIOR', 'DECPRIOR');
MPRINT(EM_DIAGRAM):   where _type_ ^in('MATRIX', 'DECISION', 'TRAINPRIOR', 'DATAPRIOR', 
'DECPRIOR');
2375020    label _TYPE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,     NOQUOTE))"
2375020  ! VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" LABEL =
2375020  ! "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label _TYPE_ = "Type" VARIABLE = "Variable" LABEL = "Label";
2375021    title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
2375022    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_predDecVars_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Predicted and decision variables";
MPRINT(EM_DIAGRAM):   run;
2375023    run;

NOTE: There were 7 observations read from the data set EMWS8.RULE6_DEPVAR_DM.
      WHERE _type_ not in ('DATAPRIOR', 'DECISION', 'DECPRIOR', 'MATRIX', 'TRAINPRIOR');
NOTE: The PROCEDURE PRINT printed page 2269.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375024    title10;
MPRINT(EM_DIAGRAM):   title10;
2375025    data WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):    data WORK.M3ACW3HG;
2375026    set WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):   set WORK.M3ACW3HG;
2375027    where(use = 'Y' or (role = 'INPUT' and use = 'D'));
MPRINT(EM_DIAGRAM):   where(use = 'Y' or (role = 'INPUT' and use = 'D'));
2375028    if (role='REJECTED') then role='INPUT';
MPRINT(EM_DIAGRAM):   if (role='REJECTED') then role='INPUT';
2375029    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 24 observations read from the data set WORK.M3ACW3HG.
      WHERE (use='Y') or ((role='INPUT') and (use='D'));
NOTE: The data set WORK.M3ACW3HG has 24 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375030    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
2375031    * EM: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBClass Macro ;
2375032    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375033    %macro DMDBClass;
2375034        AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC)
2375035       AcceptedCmp5(ASC) Complain(ASC) DepVar(DESC) Education(ASC) Marital_Status(ASC)
2375036    %mend DMDBClass;
2375037    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375038    * EM: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBVar Macro ;
2375039    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375040    %macro DMDBVar;
2375041        Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts
2375042       MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases
2375043       NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
2375044    %mend DMDBVar;
2375045    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375046    * EM: Create DMDB;
MPRINT(EM_DIAGRAM):   * EM: Create DMDB;
2375047    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375048    proc dmdb batch data=EMWS8.Meta2_TRAIN
2375049    dmdbcat=WORK.EM_DMDB
2375050    maxlevel = 513
2375051    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.Meta2_TRAIN dmdbcat=WORK.EM_DMDB maxlevel = 
513 ;
MPRINT(EM_DIAGRAM):   class
2375052    class %DMDBClass;
MPRINT(DMDBCLASS):   AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC) 
AcceptedCmp5(ASC) Complain(ASC) DepVar(DESC) Education(ASC) Marital_Status(ASC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
2375053    var %DMDBVar;
MPRINT(DMDBVAR):   Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts 
MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases NumStorePurchases 
NumWebPurchases NumWebVisitsMonth Recency Teenhome
MPRINT(EM_DIAGRAM):  ;
2375054    target
2375055    DepVar
2375056    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
2375057    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.META2_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
      

MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
2375058    quit;
2375059    *--- end code ---*;

2375060    data WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):    data WORK.M3ACW3HG;
2375061    set WORK.M3ACW3HG end=eof;
MPRINT(EM_DIAGRAM):   set WORK.M3ACW3HG end=eof;
2375062    output;
MPRINT(EM_DIAGRAM):   output;
2375063    if eof then do;
MPRINT(EM_DIAGRAM):   if eof then do;
2375064    NAME="";
MPRINT(EM_DIAGRAM):   NAME="";
2375065    ROLE="COST";
MPRINT(EM_DIAGRAM):   ROLE="COST";
2375066    LEVEL="INTERVAL";
MPRINT(EM_DIAGRAM):   LEVEL="INTERVAL";
2375067    TYPE="N";
MPRINT(EM_DIAGRAM):   TYPE="N";
2375068    output;
MPRINT(EM_DIAGRAM):   output;
2375069    end;
MPRINT(EM_DIAGRAM):   end;
2375070    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 24 observations read from the data set WORK.M3ACW3HG.
NOTE: The data set WORK.M3ACW3HG has 25 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: There were 2 observations read from the data set EMWS8.RULE6_DEPVAR_DD.
NOTE: The data set WORK.DEPVAR has 2 observations and 7 variables.
2375071    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2375072    * Rule6: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule6: Create decision matrix;
2375073    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375074    data WORK.DepVar;
MPRINT(EM_DIAGRAM):   data WORK.DepVar;
2375075      length   DepVar                           $  32
2375076               COUNT                                8
2375077               DATAPRIOR                            8
2375078               TRAINPRIOR                           8
2375079               DECPRIOR                             8
2375080               DECISION1                            8
2375081               DECISION2                            8
2375082               ;
MPRINT(EM_DIAGRAM):   length DepVar $ 32 COUNT 8 DATAPRIOR 8 TRAINPRIOR 8 DECPRIOR 8 DECISION1 
8 DECISION2 8 ;
2375083    
2375084      label    COUNT="Level Counts"
2375085               DATAPRIOR="Data Proportions"
2375086               TRAINPRIOR="Training Proportions"
2375087               DECPRIOR="Decision Priors"
2375088               DECISION1="1"
2375089               DECISION2="0"
2375090               ;
MPRINT(EM_DIAGRAM):   label COUNT= "Level Counts" DATAPRIOR= "Data Proportions" TRAINPRIOR= 
"Training Proportions" DECPRIOR= "Decision Priors" DECISION1= "1" DECISION2= "0" ;
2375091      format   COUNT 10.
2375092               ;
MPRINT(EM_DIAGRAM):   format COUNT 10. ;
2375093    DepVar="1"; COUNT=359; DATAPRIOR=0.151221567; TRAINPRIOR=0.15122156697556;
2375093  ! DECPRIOR=.; DECISION1=1; DECISION2=0;
MPRINT(EM_DIAGRAM):   DepVar="1";
MPRINT(EM_DIAGRAM):   COUNT=359;
MPRINT(EM_DIAGRAM):   DATAPRIOR=0.151221567;
MPRINT(EM_DIAGRAM):   TRAINPRIOR=0.15122156697556;
MPRINT(EM_DIAGRAM):   DECPRIOR=.;
MPRINT(EM_DIAGRAM):   DECISION1=1;
MPRINT(EM_DIAGRAM):   DECISION2=0;
2375094    output;
MPRINT(EM_DIAGRAM):   output;
2375095    DepVar="0"; COUNT=2015; DATAPRIOR=0.848778433; TRAINPRIOR=0.84877843302443;
2375095  ! DECPRIOR=.; DECISION1=0; DECISION2=1;
MPRINT(EM_DIAGRAM):   DepVar="0";
MPRINT(EM_DIAGRAM):   COUNT=2015;
MPRINT(EM_DIAGRAM):   DATAPRIOR=0.848778433;
MPRINT(EM_DIAGRAM):   TRAINPRIOR=0.84877843302443;
MPRINT(EM_DIAGRAM):   DECPRIOR=.;
MPRINT(EM_DIAGRAM):   DECISION1=0;
MPRINT(EM_DIAGRAM):   DECISION2=1;
2375096    output;
MPRINT(EM_DIAGRAM):   output;
2375097    ;
MPRINT(EM_DIAGRAM):   ;
2375098    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK.DEPVAR has 2 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375099    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
2375100    modify DepVar(type=PROFIT label=DepVar);
MPRINT(EM_DIAGRAM):   modify DepVar(type=PROFIT label= DepVar);
MPRINT(EM_DIAGRAM):   label DECISION1= '1';
MPRINT(EM_DIAGRAM):   label DECISION2= '0';
MPRINT(EM_DIAGRAM):   run;
2375101    label DECISION1= '1';
2375102    label DECISION2= '0';
2375103    run;

NOTE: MODIFY was successful for WORK.DEPVAR.DATA.
2375104    quit;
MPRINT(EM_DIAGRAM):   quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
      

MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule6: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375105    *------------------------------------------------------------* ;
2375106    * Rule6: DMDBClass Macro ;
2375107    *------------------------------------------------------------* ;
2375108    %macro DMDBClass;
2375109        AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC)
2375110       AcceptedCmp5(ASC) Complain(ASC) DepVar(DESC) Education(ASC) Marital_Status(ASC)
2375111    %mend DMDBClass;
2375112    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375113    * Rule6: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: DMDBVar Macro ;
2375114    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375115    %macro DMDBVar;
2375116        Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts
2375117       MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases
2375118       NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
2375119    %mend DMDBVar;
2375120    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375121    * Rule6: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule6: Create DMDB;
2375122    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375123    proc dmdb batch data=EMWS8.Meta2_TRAIN
2375124    dmdbcat=WORK.Rule6_DMDB
2375125    maxlevel = 513
2375126    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.Meta2_TRAIN dmdbcat=WORK.Rule6_DMDB maxlevel 
= 513 ;
MPRINT(EM_DIAGRAM):   class
2375127    class %DMDBClass;
MPRINT(DMDBCLASS):   AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC) 
AcceptedCmp5(ASC) Complain(ASC) DepVar(DESC) Education(ASC) Marital_Status(ASC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
2375128    var %DMDBVar;
MPRINT(DMDBVAR):   Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts 
MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases NumStorePurchases 
NumWebPurchases NumWebVisitsMonth Recency Teenhome
MPRINT(EM_DIAGRAM):  ;
2375129    target
2375130    DepVar
2375131    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
2375132    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.META2_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
2375133    quit;
2375134    *--- end code ---*;

2375135    data WORK.M0WAUYP1;
MPRINT(EM_DIAGRAM):    data WORK.M0WAUYP1;
2375136    set WORK.M0WAUYP1;
MPRINT(EM_DIAGRAM):   set WORK.M0WAUYP1;
2375137    if NAME^='DepVar' then delete;
MPRINT(EM_DIAGRAM):   if NAME^='DepVar' then delete;
2375138    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M0WAUYP1.
NOTE: The data set WORK.M0WAUYP1 has 1 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375139    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
2375140    * EM: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBClass Macro ;
2375141    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375142    %macro DMDBClass;
2375143        DepVar(DESC)
2375144    %mend DMDBClass;
2375145    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375146    * EM: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBVar Macro ;
2375147    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375148    %macro DMDBVar;
2375149    
2375150    %mend DMDBVar;
2375151    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375152    * EM: Create DMDB;
MPRINT(EM_DIAGRAM):   * EM: Create DMDB;
2375153    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375154    proc dmdb batch data=EMWS8.Meta2_TRAIN
2375155    dmdbcat=WORK.EM_DMDB
2375156    maxlevel = 513
2375157    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.Meta2_TRAIN dmdbcat=WORK.EM_DMDB maxlevel = 
513 ;
MPRINT(EM_DIAGRAM):   class
2375158    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC)
MPRINT(EM_DIAGRAM):  ;
2375159    target
2375160    DepVar
2375161    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
2375162    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.META2_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
2375163    quit;
2375164    *--- end code ---*;

2375165    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2375166    * Rule Induction Training;
MPRINT(EM_DIAGRAM):   * Rule Induction Training;
2375167    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;

2375168    * Get counts for DepVar;
MPRINT(EM_DIAGRAM):    * Get counts for DepVar;
2375169    ;
MPRINT(EM_DIAGRAM):   ;
2375170    data _scr(keep= _level_ DepVar);
MPRINT(EM_DIAGRAM):   data _scr(keep= _level_ DepVar);
2375171    set EMWS8.Meta2_TRAIN;
MPRINT(EM_DIAGRAM):   set EMWS8.Meta2_TRAIN;
2375172    length _level_ $16;
MPRINT(EM_DIAGRAM):   length _level_ $16;
2375173    label _level_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_rulelevel_vlabel, NOQUOTE,
2375173  ! DepVar))";
MPRINT(EM_DIAGRAM):   label _level_ = "DepVar";
2375174    _tmp=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp=putn(DepVar, 'best.');
2375175    %DMNORMCP(_tmp, _level_);
MPRINT(DMNORMCP):   _level_=dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
2375176    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.META2_TRAIN.
NOTE: The data set WORK._SCR has 2374 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

2375177    proc freq data=_scr noprint;
MPRINT(EM_DIAGRAM):   proc freq data=_scr noprint;
2375178    table _level_ / out=_count;
MPRINT(EM_DIAGRAM):   table _level_ / out=_count;
2375179    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2374 observations read from the data set WORK._SCR.
NOTE: The data set WORK._COUNT has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375180    * Get Normalized counts for DepVar;
MPRINT(EM_DIAGRAM):    * Get Normalized counts for DepVar;
2375181    ;
MPRINT(EM_DIAGRAM):   ;
2375182    data _scr(keep= _level_ DepVar);
MPRINT(EM_DIAGRAM):   data _scr(keep= _level_ DepVar);
2375183    set EMWS8.Meta2_VALIDATE;
MPRINT(EM_DIAGRAM):   set EMWS8.Meta2_VALIDATE;
2375184    length _level_ $16;
MPRINT(EM_DIAGRAM):   length _level_ $16;
2375185    label _level_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_rulelevel_vlabel, NOQUOTE,
2375185  ! DepVar))";
MPRINT(EM_DIAGRAM):   label _level_ = "DepVar";
2375186    _tmp = putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp = putn(DepVar, 'best.');
2375187    %DMNORMCP(_tmp, _level_);
MPRINT(DMNORMCP):   _level_=dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
2375188    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: View EMWS8.META2_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: There were 1018 observations read from the data set EMWS8.META2_VALIDATE.
NOTE: The data set WORK._SCR has 1018 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
      

2375189    proc freq data=_scr noprint;
MPRINT(EM_DIAGRAM):   proc freq data=_scr noprint;
2375190    table _level_ / out= _vcount;
MPRINT(EM_DIAGRAM):   table _level_ / out= _vcount;
2375191    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1018 observations read from the data set WORK._SCR.
NOTE: The data set WORK._VCOUNT has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375192    data _vcount;
MPRINT(EM_DIAGRAM):    data _vcount;
2375193    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
2375194    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
2375195    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
2375196    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
2375197    rename percent = vpercent;
MPRINT(EM_DIAGRAM):   rename percent = vpercent;
2375198    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 2 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375199    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2375200    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
2375201    by _level_;
MPRINT(EM_DIAGRAM):   by _level_;
2375202    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375203    data _count;
MPRINT(EM_DIAGRAM):    data _count;
2375204    set _count;
MPRINT(EM_DIAGRAM):   set _count;
2375205    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
2375206    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
2375207    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2375208    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
2375209    by DESCENDING count;
MPRINT(EM_DIAGRAM):   by DESCENDING count;
2375210    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   *;
2375211    *;
2375212    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_tarfreq_title, NOQUOTE, DepVar))";
MPRINT(EM_DIAGRAM):   title9 "Target=DepVar: Frequencies";
MPRINT(EM_DIAGRAM):   *;
2375213    *;
2375214    proc print data=_count noobs label;
MPRINT(EM_DIAGRAM):   proc print data=_count noobs label;
2375215    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 2270.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375216    title9;
MPRINT(EM_DIAGRAM):   title9;
2375217    data WORK.M11WL8_X;
MPRINT(EM_DIAGRAM):    data WORK.M11WL8_X;
2375218    set WORK.M11WL8_X;
MPRINT(EM_DIAGRAM):   set WORK.M11WL8_X;
2375219    if NAME^='DepVar' then delete;
MPRINT(EM_DIAGRAM):   if NAME^='DepVar' then delete;
2375220    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M11WL8_X.
NOTE: The data set WORK.M11WL8_X has 1 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

2375221    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
2375222    * EM: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBClass Macro ;
2375223    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375224    %macro DMDBClass;
2375225        DepVar(DESC)
2375226    %mend DMDBClass;
2375227    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375228    * EM: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * EM: DMDBVar Macro ;
2375229    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375230    %macro DMDBVar;
2375231    
2375232    %mend DMDBVar;
2375233    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375234    * EM: Create DMDB;
MPRINT(EM_DIAGRAM):   * EM: Create DMDB;
2375235    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375236    proc dmdb batch data=EMWS8.Meta2_TRAIN
2375237    dmdbcat=WORK.EM_DMDB
2375238    maxlevel = 513
2375239    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS8.Meta2_TRAIN dmdbcat=WORK.EM_DMDB maxlevel = 
513 ;
MPRINT(EM_DIAGRAM):   class
2375240    class %DMDBClass;
MPRINT(DMDBCLASS):   DepVar(DESC)
MPRINT(EM_DIAGRAM):  ;
2375241    target
2375242    DepVar
2375243    ;
MPRINT(EM_DIAGRAM):   target DepVar ;
2375244    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: There were 2374 observations read from the data set EMWS8.META2_TRAIN.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
2375245    quit;
2375246    *--- end code ---*;

2375247    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2375248    * Rip Model 1;
MPRINT(EM_DIAGRAM):   * Rip Model 1;
2375249    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375250    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375251    * TREE MODEL DepVar BINARY RIP1;
MPRINT(EM_DIAGRAM):   * TREE MODEL DepVar BINARY RIP1;
2375252    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;

MPRINT(EM_DIAGRAM):   reset noprint;
MPRINT(EM_DIAGRAM):   select count(*) into :_tmpnobs from EMWS8.Meta2_TRAIN;
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
MPRINT(EM_DIAGRAM):   quit;
2375253    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2375254    * Rule6: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule6: Create decision matrix;
2375255    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375256    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375257    * Rule6: Tree Variables Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: Tree Variables Macro ;
2375258    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375259    %macro EM_TREEVARS;
2375260        AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain
2375261       Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds
2375262       MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases
2375263       NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
2375264    %mend EM_TREEVARS;
2375265    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375266    * Rule6: Tree Targets Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: Tree Targets Macro ;
2375267    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375268    %macro EM_TREETARGETS;
2375269        DepVar
2375270    %mend EM_TREETARGETS;
2375271    data WORK.EM_Rule6 / view=WORK.EM_Rule6;
MPRINT(EM_DIAGRAM):   data WORK.EM_Rule6 / view=WORK.EM_Rule6;
2375272    set
2375272  ! EMWS8.Meta2_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
MPRINT(EM_DIAGRAM):   set EMWS8.Meta2_TRAIN(keep
MPRINT(EM_DIAGRAM):  =AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 
Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome DepVar);
2375273    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: DATA STEP view saved on file WORK.EM_RULE6.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule6: Interval Inputs Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375274    *------------------------------------------------------------* ;
2375275    * Rule6: Interval Inputs Macro ;
2375276    *------------------------------------------------------------* ;
2375277    %macro INTINPUTS;
2375278        Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts
2375279       MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases
2375280       NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
2375281    %mend INTINPUTS;
2375282    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375283    * Rule6: Binary and Nominal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: Binary and Nominal Inputs Macro ;
2375284    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375285    %macro NOMINPUTS;
2375286        AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain
2375287       Education Marital_Status
2375288    %mend NOMINPUTS;
2375289    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375290    * Rule6: Ordinal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: Ordinal Inputs Macro ;
2375291    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375292    %macro ORDINPUTS;
2375293    
2375294    %mend ORDINPUTS;
2375295    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375296    * Rule6: Run ARBOR procedure;
MPRINT(EM_DIAGRAM):   * Rule6: Run ARBOR procedure;
2375297    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;

2375298    proc arbor data=WORK.EM_Rule6
2375299    Leafsize=50
2375300    Mincatsize = 5
2375301    Maxdepth=4
2375302    Missing=USEINSEARCH
2375303    ;
MPRINT(EM_DIAGRAM):    proc arbor data=WORK.EM_Rule6 Leafsize=50 Mincatsize = 5 Maxdepth=4 
Missing=USEINSEARCH ;
2375304    ;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_DIAGRAM):   input
2375305    input %INTINPUTS
MPRINT(INTINPUTS):   Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts 
MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases NumStorePurchases 
NumWebPurchases NumWebVisitsMonth Recency Teenhome
2375306    / level = interval;
MPRINT(EM_DIAGRAM):   / level = interval;
MPRINT(EM_DIAGRAM):   input
2375307    input %NOMINPUTS
MPRINT(NOMINPUTS):   AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain 
Education Marital_Status
2375308    / level=nominal;
MPRINT(EM_DIAGRAM):   / level=nominal;
2375309    target DepVar / level=BINARY
2375310    Criterion=GINI
2375311    ;
MPRINT(EM_DIAGRAM):   target DepVar / level=BINARY Criterion=GINI ;
2375312    ;
MPRINT(EM_DIAGRAM):   ;
2375313    Performance DISK
2375314    ;
MPRINT(EM_DIAGRAM):   Performance DISK ;
NOTE: View EMWS8.META2_VALIDATE.VIEW used (Total process time):
      real time           0.22 seconds
      cpu time            0.23 seconds
      
2375315    Assess
2375316    Validata=EMWS8.Meta2_VALIDATE
2375317    measure=ASE
2375318    ;
MPRINT(EM_DIAGRAM):   Assess Validata=EMWS8.Meta2_VALIDATE measure=ASE ;
NOTE: 1385215 kilobytes of physical memory.
NOTE: Will use 2374 out of 2374 training cases.
NOTE: Using memory pool with 125914112 bytes.
NOTE: Will not search for split on variable AcceptedCmp2.
NOTE: Acceptable cases have the same value.
NOTE: Option MINCATSIZE=5 may apply.
NOTE: Will not search for split on variable Complain.
NOTE: Acceptable cases have the same value.
NOTE: Option MINCATSIZE=5 may apply.
NOTE: Passed training data 8 times.
NOTE: Training used 1424224 bytes of work memory.
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: The subtree sequence contains 11 subtrees. The largest has 21 nodes and 11 leaves.
NOTE: Using subtree with 17 nodes and 9 leaves.
2375319    MAKEMACRO NLEAVES=nleaves;
MPRINT(EM_DIAGRAM):   MAKEMACRO NLEAVES=nleaves;
NOTE: Created macro variable NLEAVES equal to 9.
2375320    save
2375321    MODEL=WORK.OUTTREE_TREE_3WWL1DS
2375322    SEQUENCE=WORK.OUTSEQ_TREE_3WWL1DS
2375323    IMPORTANCE=WORK.OUTIMPORT_TREE_3WWL1DS
2375324    NODESTAT=WORK.OUTNODES_TREE_3WWL1DS
2375325    SUMMARY=WORK.OUTSUMMARY_TREE_3WWL1DS
2375326    STATSBYNODE=WORK.OUTSTATS_TREE_3WWL1DS
2375327    Pathlistnonmissing = WORK.OUTPATH_TREE_3WWL1DS
2375328    Rules = WORK.OUTRULES_TREE_3WWL1DS
2375329    ;
MPRINT(EM_DIAGRAM):   save MODEL=WORK.OUTTREE_TREE_3WWL1DS SEQUENCE=WORK.OUTSEQ_TREE_3WWL1DS 
IMPORTANCE=WORK.OUTIMPORT_TREE_3WWL1DS NODESTAT=WORK.OUTNODES_TREE_3WWL1DS 
SUMMARY=WORK.OUTSUMMARY_TREE_3WWL1DS STATSBYNODE=WORK.OUTSTATS_TREE_3WWL1DS Pathlistnonmissing 
= WORK.OUTPATH_TREE_3WWL1DS Rules = WORK.OUTRULES_TREE_3WWL1DS ;
NOTE: The data set WORK.OUTIMPORT_TREE_3WWL1DS has 23 observations and 6 variables.
NOTE: The data set WORK.OUTTREE_TREE_3WWL1DS has 773 observations and 4 variables.
NOTE: The data set WORK.OUTNODES_TREE_3WWL1DS has 17 observations and 24 variables.
NOTE: The data set WORK.OUTPATH_TREE_3WWL1DS has 64 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_3WWL1DS has 200 observations and 6 variables.
NOTE: The data set WORK.OUTSEQ_TREE_3WWL1DS has 11 observations and 20 variables.
NOTE: The data set WORK.OUTSTATS_TREE_3WWL1DS has 119 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_3WWL1DS has 24 observations and 6 variables.
2375330    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2375330  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1.sas"
2375331    group=Rule6
2375332    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1.sas" group=Rule6 ;
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1.sas opened.
2375333    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2375333  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1_res.sas"
2375334    group=Rule6
2375335    residual
2375336    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1_res.sas" group=Rule6 residual ;
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\RIP1_res.sas opened.
NOTE: View EMWS8.META2_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      
2375337    score data=EMWS8.Meta2_TRAIN out=_ptrain
2375338    ;
MPRINT(EM_DIAGRAM):   score data=EMWS8.Meta2_TRAIN out=_ptrain ;
NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: The data set WORK._PTRAIN has 2374 observations and 59 variables.
NOTE: View EMWS8.META2_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      
2375339    score data=EMWS8.Meta2_VALIDATE out=_pvalid
2375340    ;
MPRINT(EM_DIAGRAM):   score data=EMWS8.Meta2_VALIDATE out=_pvalid ;
NOTE: There were 1018 observations read from the data set EMWS8.PART_VALIDATE.
NOTE: The data set WORK._PVALID has 1018 observations and 59 variables.
2375341    run;
MPRINT(EM_DIAGRAM):   run;

2375342    quit;
MPRINT(EM_DIAGRAM):   quit;

NOTE: There were 2374 observations read from the data set EMWS8.PART_TRAIN.
NOTE: View WORK.EM_RULE6.VIEW used (Total process time):
      real time           0.41 seconds
      cpu time            0.42 seconds
      
NOTE: There were 2374 observations read from the data set EMWS8.META2_TRAIN.
NOTE: There were 2374 observations read from the data set WORK.EM_RULE6.
NOTE: The data set WORK._NAMEDAT has 2 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           0.44 seconds
      cpu time            0.43 seconds
      

2375343    data WORK.OUTIMPORT_TREE_3WWL1DS;
MPRINT(EM_DIAGRAM):    data WORK.OUTIMPORT_TREE_3WWL1DS;
2375344    set WORK.OUTIMPORT_TREE_3WWL1DS;
MPRINT(EM_DIAGRAM):   set WORK.OUTIMPORT_TREE_3WWL1DS;
2375345    label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL =
2375345  ! "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES =
2375345  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
2375346       "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES =
2375346  ! "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
2375347    VIMPORTANCE = "%sysfunc(sasmsg(sashelp.dmine, rpt_vimportance_vlabel, noquote))"
2375347  ! RATIO = "%sysfunc(sasmsg(sashelp.dmine, rpt_ratio_vlabel, noquote))"
2375348    ;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" LABEL = "Label" NRULES = "Number of 
Splitting Rules" IMPORTANCE = "Importance" NSURROGATES = "Number of Surrogate Rules" 
VIMPORTANCE = "Validation Importance" RATIO = "Ratio of Validation to Training Importance" ;
2375349    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Variable NSURROGATES is uninitialized.
NOTE: There were 23 observations read from the data set WORK.OUTIMPORT_TREE_3WWL1DS.
NOTE: The data set WORK.OUTIMPORT_TREE_3WWL1DS has 23 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2375350    filename x "C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2375350  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\DESCRIBE.SOURCE" encoding='utf-8' NOBOM;
MPRINT(EM_DIAGRAM):   filename x "C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\DESCRIBE.SOURCE" encoding='utf-8' NOBOM;
2375351    data temp;
MPRINT(EM_DIAGRAM):    data temp;
2375352    length varname $19;
MPRINT(EM_DIAGRAM):   length varname $19;
2375353    retain varname;
MPRINT(EM_DIAGRAM):   retain varname;
2375354    set WORK.OUTPATH_TREE_3WWL1DS;
MPRINT(EM_DIAGRAM):   set WORK.OUTPATH_TREE_3WWL1DS;
2375355    if ^missing(variable) then varname=variable;
MPRINT(EM_DIAGRAM):   if ^missing(variable) then varname=variable;
2375356    else if ^missing(var_name) then varname=var_name;
MPRINT(EM_DIAGRAM):   else if ^missing(var_name) then varname=var_name;
2375357    output;
MPRINT(EM_DIAGRAM):   output;
2375358    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 64 observations read from the data set WORK.OUTPATH_TREE_3WWL1DS.
NOTE: The data set WORK.TEMP has 64 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375359    proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
2375360    by node;
MPRINT(EM_DIAGRAM):   by node;
2375361    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 64 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 64 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375362    proc sort data=WORK.OUTNODES_TREE_3WWL1DS out=outnodes;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.OUTNODES_TREE_3WWL1DS out=outnodes;
2375363    by node;
MPRINT(EM_DIAGRAM):   by node;
2375364    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 17 observations read from the data set WORK.OUTNODES_TREE_3WWL1DS.
NOTE: The data set WORK.OUTNODES has 17 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375365    data temp;
MPRINT(EM_DIAGRAM):   data temp;
2375366    merge temp(in=_a) outnodes(keep= node
2375367    NPRIORS
2375368    P_DepVar0
2375369    P_DepVar1
2375370    );
MPRINT(EM_DIAGRAM):   merge temp(in=_a) outnodes(keep= node NPRIORS P_DepVar0 P_DepVar1 );
2375371    by node;
MPRINT(EM_DIAGRAM):   by node;
2375372    if _a;
MPRINT(EM_DIAGRAM):   if _a;
2375373    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 64 observations read from the data set WORK.TEMP.
NOTE: There were 17 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 64 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375374    proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
2375375    by node descending varname descending numeric_value;
MPRINT(EM_DIAGRAM):   by node descending varname descending numeric_value;
2375376    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 64 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 64 observations and 11 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375377    data _null_;
MPRINT(EM_DIAGRAM):   data _null_;
2375378    file x;
MPRINT(EM_DIAGRAM):   file x;
2375379    set temp;
MPRINT(EM_DIAGRAM):   set temp;
2375380    by node descending varname;
MPRINT(EM_DIAGRAM):   by node descending varname;
2375381    retain origvar oldnode string;
MPRINT(EM_DIAGRAM):   retain origvar oldnode string;
2375382    length origvar $32 oldnode 8 string $200;
MPRINT(EM_DIAGRAM):   length origvar $32 oldnode 8 string $200;
2375383    if _n_ = 1 then do;
MPRINT(EM_DIAGRAM):   if _n_ = 1 then do;
2375384    origvar = varname;
MPRINT(EM_DIAGRAM):   origvar = varname;
2375385    oldnode = node;
MPRINT(EM_DIAGRAM):   oldnode = node;
2375386    end;
MPRINT(EM_DIAGRAM):   end;
2375387    if first.node then do;
MPRINT(EM_DIAGRAM):   if first.node then do;
2375388    put "&EM_CODEBAR";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
2375389    put " Node = " node;
MPRINT(EM_DIAGRAM):   put " Node = " node;
2375390    put "&EM_CODEBAR";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
2375391    end;
MPRINT(EM_DIAGRAM):   end;
2375392    if first.varname then do;
MPRINT(EM_DIAGRAM):   if first.varname then do;
2375393    if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
2375394    if MISSING(CHARACTER_VALUE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(CHARACTER_VALUE) then do;
2375395    if NUMERIC_VALUE ne . then do;
MPRINT(EM_DIAGRAM):   if NUMERIC_VALUE ne . then do;
2375396    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
2375397    string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   string= "AND "|| strip(varname)||" "||strip(relation)||" 
"||strip(numeric_value);
2375398    end;
MPRINT(EM_DIAGRAM):   end;
2375399    else do;
MPRINT(EM_DIAGRAM):   else do;
2375400    string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   string= "if "|| strip(varname)||" "||strip(relation)||" 
"||strip(numeric_value);
2375401    end;
MPRINT(EM_DIAGRAM):   end;
2375402    end;
MPRINT(EM_DIAGRAM):   end;
2375403    end;
MPRINT(EM_DIAGRAM):   end;
2375404    else do;
MPRINT(EM_DIAGRAM):   else do;
2375405    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
2375406    string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   string= "AND "|| strip(varname)||" "||strip(relation)||" 
"||strip(character_value);
2375407    end;
MPRINT(EM_DIAGRAM):   end;
2375408    else do;
MPRINT(EM_DIAGRAM):   else do;
2375409    string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   string= "if "|| strip(varname)||" "||strip(relation)||" 
"||strip(character_value);
2375410    end;
MPRINT(EM_DIAGRAM):   end;
2375411    end;
MPRINT(EM_DIAGRAM):   end;
2375412    end;
MPRINT(EM_DIAGRAM):   end;
2375413    else if RELATION in ("=") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("=") then do;
2375414    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
2375415    string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
MPRINT(EM_DIAGRAM):   string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
2375416    end;
MPRINT(EM_DIAGRAM):   end;
2375417    else do;
MPRINT(EM_DIAGRAM):   else do;
2375418    string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
2375419    end;
MPRINT(EM_DIAGRAM):   end;
2375420    end;
MPRINT(EM_DIAGRAM):   end;
2375421    else if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISMISSING") then do;
2375422    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
2375423    string = " AND "|| strip(varname) || " equals Missing";
MPRINT(EM_DIAGRAM):   string = " AND "|| strip(varname) || " equals Missing";
2375424    end;
MPRINT(EM_DIAGRAM):   end;
2375425    else do;
MPRINT(EM_DIAGRAM):   else do;
2375426    string = "if "|| strip(varname) ||" equals Missing";
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" equals Missing";
2375427    end;
MPRINT(EM_DIAGRAM):   end;
2375428    end;
MPRINT(EM_DIAGRAM):   end;
2375429    else if RELATION in ("ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISNOTMISSING") then do;
2375430    if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
2375431    string = " AND "|| strip(varname) || " equals All Values";
MPRINT(EM_DIAGRAM):   string = " AND "|| strip(varname) || " equals All Values";
2375432    end;
MPRINT(EM_DIAGRAM):   end;
2375433    else do;
MPRINT(EM_DIAGRAM):   else do;
2375434    string = "if "|| strip(varname) ||" equals All Values";
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" equals All Values";
2375435    end;
MPRINT(EM_DIAGRAM):   end;
2375436    end;
MPRINT(EM_DIAGRAM):   end;
2375437    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
2375438    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
2375439    end;
MPRINT(EM_DIAGRAM):   end;
2375440    else do;
MPRINT(EM_DIAGRAM):   else do;
2375441    if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
2375442    if MISSING(CHARACTER_VALUE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(CHARACTER_VALUE) then do;
2375443    if NUMERIC_VALUE ne . then do;
MPRINT(EM_DIAGRAM):   if NUMERIC_VALUE ne . then do;
2375444    if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||"
2375444  ! "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   if ^MISSING(string) then string= strip(string)||" AND "|| 
strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
2375445    else string= " if "|| strip(varname)||" "||strip(relation)||"
2375445  ! "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   else string= " if "|| strip(varname)||" "||strip(relation)||" 
"||strip(numeric_value);
2375446    end;
MPRINT(EM_DIAGRAM):   end;
2375447    end;
MPRINT(EM_DIAGRAM):   end;
2375448    else do;
MPRINT(EM_DIAGRAM):   else do;
2375449    if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||"
2375449  ! "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   if ^MISSING(string) then string= strip(string)||" AND "|| 
strip(varname)||" "||strip(relation)||" "||strip(character_value);
2375450    else string= " if "|| strip(varname)||" "||strip(relation)||"
2375450  ! "||strip(character_value);
MPRINT(EM_DIAGRAM):   else string= " if "|| strip(varname)||" "||strip(relation)||" 
"||strip(character_value);
2375451    end;
MPRINT(EM_DIAGRAM):   end;
2375452    end;
MPRINT(EM_DIAGRAM):   end;
2375453    else if RELATION in ("=") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("=") then do;
2375454    string = strip(string)||", "||strip(character_value);
MPRINT(EM_DIAGRAM):   string = strip(string)||", "||strip(character_value);
2375455    end;
MPRINT(EM_DIAGRAM):   end;
2375456    else if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISMISSING") then do;
2375457    end;
MPRINT(EM_DIAGRAM):   end;
2375458    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
2375459    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
2375460    end;
MPRINT(EM_DIAGRAM):   end;
2375461    if last.varname then do;
MPRINT(EM_DIAGRAM):   if last.varname then do;
2375462    if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION in ("ISMISSING") then do;
2375463    if ^first.varname then do;
MPRINT(EM_DIAGRAM):   if ^first.varname then do;
2375464    string = strip(string) || " or MISSING";
MPRINT(EM_DIAGRAM):   string = strip(string) || " or MISSING";
2375465    end;
MPRINT(EM_DIAGRAM):   end;
2375466    end;
MPRINT(EM_DIAGRAM):   end;
2375467    put string;
MPRINT(EM_DIAGRAM):   put string;
2375468    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
2375469    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
2375470    end;
MPRINT(EM_DIAGRAM):   end;
2375471    if last.node then do;
MPRINT(EM_DIAGRAM):   if last.node then do;
2375472    put "then ";
MPRINT(EM_DIAGRAM):   put "then ";
2375473    put " Tree Node Identifier   = " node;
MPRINT(EM_DIAGRAM):   put " Tree Node Identifier   = " node;
2375474    put " Number of Observations = " NPRIORS;
MPRINT(EM_DIAGRAM):   put " Number of Observations = " NPRIORS;
2375475    put " Predicted: DepVar=0  = " P_DepVar0;
MPRINT(EM_DIAGRAM):   put " Predicted: DepVar=0  = " P_DepVar0;
2375476    put " Predicted: DepVar=1  = " P_DepVar1;
MPRINT(EM_DIAGRAM):   put " Predicted: DepVar=1  = " P_DepVar1;
2375477    put " ";
MPRINT(EM_DIAGRAM):   put " ";
2375478    if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
2375479    oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
2375480    end;
MPRINT(EM_DIAGRAM):   end;
2375481    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Numeric values have been converted to character values at the places given by: 
      (Line):(Column).
      2375397:67    2375400:66    2375444:108   2375445:72    
NOTE: The file X is:
      
      Filename=C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\DESCRIBE.SOURCE,
      RECFM=V,LRECL=1536,File Size (bytes)=0,
      Last Modified=28. April 2016 10.27 Uhr,
      Create Time=28. April 2016 10.27 Uhr

NOTE: 110 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 62.
NOTE: There were 64 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375482    filename x;
MPRINT(EM_DIAGRAM):    filename x;
NOTE: Fileref X has been deassigned.
2375483    data leafds;
MPRINT(EM_DIAGRAM):    data leafds;
2375484    set WORK.OUTNODES_TREE_3WWL1DS;
MPRINT(EM_DIAGRAM):   set WORK.OUTNODES_TREE_3WWL1DS;
2375485    if LEAF ne .;
MPRINT(EM_DIAGRAM):   if LEAF ne .;
2375486    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 17 observations read from the data set WORK.OUTNODES_TREE_3WWL1DS.
NOTE: The data set WORK.LEAFDS has 9 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375487    proc sort data=leafds;
MPRINT(EM_DIAGRAM):   proc sort data=leafds;
2375488    by descending N;
MPRINT(EM_DIAGRAM):   by descending N;
2375489    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 9 observations read from the data set WORK.LEAFDS.
NOTE: The data set WORK.LEAFDS has 9 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: Argument three to KSUBSTR exceeds the length of the input string, the function has 
      recalculated the length of the string.
RIP LEAF: N=1  varid=17  nodeid=20  val=0.98874458874458  count=1155 
RIP LEAF: N=2  varid=18  nodeid=20  val=0.01125541125541  count=1155 
RIP LEAF: N=1  varid=17  nodeid=9  val=0.82099596231493  count=743 
RIP LEAF: N=2  varid=18  nodeid=9  val=0.17900403768506  count=743 
RIP LEAF: N=1  varid=17  nodeid=14  val=0.78846153846153  count=104 
RIP LEAF: N=2  varid=18  nodeid=14  val=0.21153846153846  count=104 
RIP LEAF: N=1  varid=17  nodeid=11  val=0.15730337078651  count=89 
RIP LEAF: N=2  varid=18  nodeid=11  val=0.84269662921348  count=89 
RIP LEAF: N=1  varid=17  nodeid=8  val=0.3015873015873  count=63 
RIP LEAF: N=2  varid=18  nodeid=8  val=0.69841269841269  count=63 
RIP LEAF: N=1  varid=17  nodeid=13  val=0.75438596491228  count=57 
RIP LEAF: N=2  varid=18  nodeid=13  val=0.24561403508771  count=57 
RIP LEAF: N=1  varid=17  nodeid=10  val=0.54545454545454  count=55 
RIP LEAF: N=2  varid=18  nodeid=10  val=0.45454545454545  count=55 
RIP LEAF: N=1  varid=17  nodeid=12  val=0.5  count=54 
RIP LEAF: N=2  varid=18  nodeid=12  val=0.5  count=54 
RIP LEAF: N=1  varid=17  nodeid=21  val=0.88888888888888  count=54 
RIP LEAF: N=2  varid=18  nodeid=21  val=0.11111111111111  count=54 
2375490    * RIP1: Print leaf table;
MPRINT(EM_DIAGRAM):    * RIP1: Print leaf table;
2375491    ;
MPRINT(EM_DIAGRAM):   ;
2375492    data leafds;
MPRINT(EM_DIAGRAM):   data leafds;
2375493    set leafds;
MPRINT(EM_DIAGRAM):   set leafds;
2375494    format P_DEPVAR0 8.4;
MPRINT(EM_DIAGRAM):   format P_DEPVAR0 8.4;
2375495    format P_DEPVAR1 8.4;
MPRINT(EM_DIAGRAM):   format P_DEPVAR1 8.4;
2375496    ;
MPRINT(EM_DIAGRAM):   ;
2375497    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 9 observations read from the data set WORK.LEAFDS.
NOTE: The data set WORK.LEAFDS has 9 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375498    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_leaftable_title, NOQUOTE, RIP1, 100))";
MPRINT(EM_DIAGRAM):   title9 "RIP1 Leaf Table: Threshold= 100";
2375499    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_text_title, NOQUOTE, %nrbquote(No leaf
2375499  ! was ripped from the model.)))";
MPRINT(EM_DIAGRAM):   title10 "No leaf was ripped from the model.";
2375500    proc print data = leafds NOOBS LABEL;
MPRINT(EM_DIAGRAM):   proc print data = leafds NOOBS LABEL;
2375501    var NODE N
2375502    P_DEPVAR0
2375503    P_DEPVAR1
2375504    ;
MPRINT(EM_DIAGRAM):   var NODE N P_DEPVAR0 P_DEPVAR1 ;
2375505    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 9 observations read from the data set WORK.LEAFDS.
NOTE: The PROCEDURE PRINT printed page 2271.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375506    title9;
MPRINT(EM_DIAGRAM):   title9;
2375507    title10;
MPRINT(EM_DIAGRAM):   title10;
MPRINT(EM_DIAGRAM):   * Create training data set with binary target for modeling;
MPRINT(EM_DIAGRAM):   ;
2375508    * Create training data set with binary target for modeling;
2375509    ;
2375510    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
2375511    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
2375512    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2375513    _tmp=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp=putn(DepVar, 'best.');
2375514    %DMNORMIP(_tmp);
MPRINT(DMNORMIP):   call dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
2375515    _tmpLevel = '0';
MPRINT(EM_DIAGRAM):   _tmpLevel = '0';
2375516    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
2375517    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
2375518    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
2375519    drop _tmp _tmpLevel
2375520    ;
MPRINT(EM_DIAGRAM):   drop _tmp _tmpLevel ;
2375521    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 2374 observations and 60 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2375522    * Create validation data set with binary target for modeling;
MPRINT(EM_DIAGRAM):    * Create validation data set with binary target for modeling;
2375523    ;
MPRINT(EM_DIAGRAM):   ;
2375524    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
2375525    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
2375526    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2375527    _tmp = putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp = putn(DepVar, 'best.');
2375528    %DMNORMIP(_TMP);
MPRINT(DMNORMIP):   call dmnorm(_TMP,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
2375529    _tmpLevel = '0';
MPRINT(EM_DIAGRAM):   _tmpLevel = '0';
2375530    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
2375531    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
2375532    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
2375533    drop _tmp
2375534    ;
MPRINT(EM_DIAGRAM):   drop _tmp ;
2375535    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 1018 observations and 61 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375536    data _train;
MPRINT(EM_DIAGRAM):    data _train;
2375537    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2375538    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._TRAIN has 2374 observations and 60 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375539    data _valid;
MPRINT(EM_DIAGRAM):   data _valid;
2375540    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2375541    options validvarname=any;
MPRINT(EM_DIAGRAM):   options validvarname=any;

NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VALID has 1018 observations and 61 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2375542    proc contents data=work._train out=_tempAdvisor noprint;
MPRINT(EM_DIAGRAM):   proc contents data=work._train out=_tempAdvisor noprint;
2375543    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK._TEMPADVISOR has 60 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375544    options validvarname=V7;
MPRINT(EM_DIAGRAM):   options validvarname=V7;
2375545    %let _dsidTable = 0;
2375546    %let _engineTable =;
2375547    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
2375548    dsid = open('work._train');
MPRINT(EM_DIAGRAM):   dsid = open('work._train');
2375549    call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EM_DIAGRAM):   call symput('_dsidTable', strip(put(dsid, best.)));
2375550    if dsid then do;
MPRINT(EM_DIAGRAM):   if dsid then do;
2375551    call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EM_DIAGRAM):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
2375552    dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
2375553    end;
MPRINT(EM_DIAGRAM):   end;
2375554    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375555    options fmterr;
MPRINT(EM_DIAGRAM):    options fmterr;
2375556    data _metaTestView;
MPRINT(EM_DIAGRAM):   data _metaTestView;
2375557    set work._train;
MPRINT(EM_DIAGRAM):   set work._train;
2375558    if _N_=1 then do;
MPRINT(EM_DIAGRAM):   if _N_=1 then do;
2375559    output;
MPRINT(EM_DIAGRAM):   output;
2375560    stop;
MPRINT(EM_DIAGRAM):   stop;
2375561    end;
MPRINT(EM_DIAGRAM):   end;
2375562    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK._METATESTVIEW has 1 observations and 60 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375563    proc contents data=work._train
2375564    out=WORK.M2EX9WDK noprint;
MPRINT(EM_DIAGRAM):    proc contents data=work._train out=WORK.M2EX9WDK noprint;
2375565    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK.M2EX9WDK has 60 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375566    data WORK.M2EX9WDK;
MPRINT(EM_DIAGRAM):    data WORK.M2EX9WDK;
2375567    length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 INDEXTYPE $
2375567  !  9;
MPRINT(EM_DIAGRAM):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 
INDEXTYPE $ 9;
2375568    label NAME =;
MPRINT(EM_DIAGRAM):   label NAME =;
2375569    set WORK.M2EX9WDK(keep=name type length label format formatl formatd informat
2375569  ! informl informd idxusage rename=(type=itype));
MPRINT(EM_DIAGRAM):   set WORK.M2EX9WDK(keep=name type length label format formatl formatd 
informat informl informd idxusage rename=(type=itype));
2375570    if itype = 1 then type = 'N';
MPRINT(EM_DIAGRAM):   if itype = 1 then type = 'N';
2375571    else type = 'C';
MPRINT(EM_DIAGRAM):   else type = 'C';
2375572    if formatl > 0 then do;
MPRINT(EM_DIAGRAM):   if formatl > 0 then do;
2375573    if format ne ' ' then format = strip(format)!!strip(put(formatl,
2375573  ! best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   if format ne ' ' then format = strip(format)!!strip(put(formatl, 
best12.))!!'.'!!strip(put(formatd, best12.));
2375574    else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, 
best12.));
2375575    end;
MPRINT(EM_DIAGRAM):   end;
2375576    else if format ne '' then format = strip(format)!!'.';
MPRINT(EM_DIAGRAM):   else if format ne '' then format = strip(format)!!'.';
2375577    if informl > 0 then do;
MPRINT(EM_DIAGRAM):   if informl > 0 then do;
2375578    if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
2375578  ! best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl, 
best12.))!!'.'!!strip(put(informd, best12.));
2375579    else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, 
best12.));
2375580    end;
MPRINT(EM_DIAGRAM):   end;
2375581    else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EM_DIAGRAM):   else if informat ne '' then informat = strip(informat)!!'.';
2375582    if idxusage = 'NONE' then index ="N";
MPRINT(EM_DIAGRAM):   if idxusage = 'NONE' then index ="N";
2375583    else index = "Y";
MPRINT(EM_DIAGRAM):   else index = "Y";
2375584    indextype = idxusage;
MPRINT(EM_DIAGRAM):   indextype = idxusage;
2375585    drop idxusage itype formatl formatd informl informd;
MPRINT(EM_DIAGRAM):   drop idxusage itype formatl formatd informl informd;
2375586    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 60 observations read from the data set WORK.M2EX9WDK.
NOTE: The data set WORK.M2EX9WDK has 60 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2375587    data WORK.M2EX9WDK;
MPRINT(EM_DIAGRAM):    data WORK.M2EX9WDK;
2375588    length UNAME $64;
MPRINT(EM_DIAGRAM):   length UNAME $64;
2375589    set WORK.M2EX9WDK;
MPRINT(EM_DIAGRAM):   set WORK.M2EX9WDK;
2375590    UNAME = upcase(NAME);
MPRINT(EM_DIAGRAM):   UNAME = upcase(NAME);
2375591    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 60 observations read from the data set WORK.M2EX9WDK.
NOTE: The data set WORK.M2EX9WDK has 60 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):    proc sort data=WORK.M13Y8ICQ NOTHREADS;
MPRINT(EM_DIAGRAM):   by UNAME;
MPRINT(EM_DIAGRAM):   run;
2375595    data WORK.M13Y8ICQ;
MPRINT(EM_DIAGRAM):    data WORK.M13Y8ICQ;
2375596    drop UNAME;
MPRINT(EM_DIAGRAM):   drop UNAME;
2375597    set WORK.M13Y8ICQ;
MPRINT(EM_DIAGRAM):   set WORK.M13Y8ICQ;
2375598    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 60 observations read from the data set WORK.M13Y8ICQ.
NOTE: The data set WORK.M13Y8ICQ has 60 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):    data WORK.M04EEGC9(keep=NAME ATTR);
MPRINT(EM_DIAGRAM):   length ATTR $ 20;
MPRINT(EM_DIAGRAM):   set WORK.M13Y8ICQ;
MPRINT(EM_DIAGRAM):   if level ne "INTERVAL" then do;
MPRINT(EM_DIAGRAM):   if order = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ORDER';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'FORMATTYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ROLE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'LEVEL';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if type = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'TYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if index = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'INDEX';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if report = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'REPORT';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort NOTHREADS;
MPRINT(EM_DIAGRAM):   by attr;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.M13Y8ICQ;
MPRINT(EM_DIAGRAM):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $ 
10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EM_DIAGRAM):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EM_DIAGRAM):   set WORK.M13Y8ICQ;
MPRINT(EM_DIAGRAM):   if formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   if format ne ' ' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
MPRINT(EM_DIAGRAM):   pos = indexc(format,'.1234567890');
MPRINT(EM_DIAGRAM):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EM_DIAGRAM):   else tempfmt = ' ';
MPRINT(EM_DIAGRAM):   flen = length(tempfmt);
MPRINT(EM_DIAGRAM):   select;
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN" 
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO" 
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON" 
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD" 
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" )) 
formattype = 'DATE';
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype = 
"TIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT" 
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN" 
"Z" "ZD")) formattype = "CODING";
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   formattype = "USER";
MPRINT(EM_DIAGRAM):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EM_DIAGRAM):   else if flen >= 4 then do;
MPRINT(EM_DIAGRAM):   str = substr(tempfmt,1,4);
MPRINT(EM_DIAGRAM):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EM_DIAGRAM):   else if str = "S370" then formattype = "CODING";
MPRINT(EM_DIAGRAM):   else if str = "BEST" then formattype = "NUM";
MPRINT(EM_DIAGRAM):   drop str;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType = 
"DATE";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   drop flen tempfmt pos;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   formatType = "CATEGORY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if formatType = "NUM" then do;
MPRINT(EM_DIAGRAM):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EM_DIAGRAM):   else formatType = "QUANTITY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level = 
"NOMINAL";
MPRINT(EM_DIAGRAM):   else level = "INTERVAL";
MPRINT(EM_DIAGRAM):   levelAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else level = upcase(level);
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   length name_prefix $8 _uname $64;
MPRINT(EM_DIAGRAM):   drop name_prefix _uname _freqflag;
MPRINT(EM_DIAGRAM):   retain _freqflag;
MPRINT(EM_DIAGRAM):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EM_DIAGRAM):   _uname = upcase(NAME);
MPRINT(EM_DIAGRAM):   select(_uname);
MPRINT(EM_DIAGRAM):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_SEGMENT') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('_NODE_') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('URI') ROLE = 'URL';
MPRINT(EM_DIAGRAM):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'REJECTED';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'FREQ';
MPRINT(EM_DIAGRAM):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EM_DIAGRAM):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   name_prefix = scan(_uname, 1, '_');
MPRINT(EM_DIAGRAM):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EM_DIAGRAM):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS', 
'RAT') then ROLE = 'RESIDUAL';
MPRINT(EM_DIAGRAM):   else if name_prefix ='D' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix ='B' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI', 
'IC') then ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR', 
'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL', 
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT', 
'TIMEID');
MPRINT(EM_DIAGRAM):   drop _found_ i;
MPRINT(EM_DIAGRAM):   _found_=0;
MPRINT(EM_DIAGRAM):   do i=1 to 19 until(_found_=1);
MPRINT(EM_DIAGRAM):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EM_DIAGRAM):   ROLE=_ROLE_{i};
MPRINT(EM_DIAGRAM):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EM_DIAGRAM):   _found_=1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if length(_uname)>2 then do;
MPRINT(EM_DIAGRAM):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'ID';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EM_DIAGRAM):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EM_DIAGRAM):   else role = 'INPUT';
MPRINT(EM_DIAGRAM):   roleAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else role = upcase(role);
MPRINT(EM_DIAGRAM):   if REPORT = '' then REPORT = 'N';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    proc dmdb data=work._train(obs=1000000) batch classOut=_DMDB0FQY2CM 
maxLevel=22;
MPRINT(EM_DIAGRAM):   class
MPRINT(DMDBCLASS):   AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 
AcceptedCmpTotal Age Complain Custid DepVar Dt_Customer Education Element1 Element2 Element3 
Element4 Frq F_DepVar Group HigherEducation HigherEducationBinary Income I_DepVar Kidhome 
Marital_Status Mnt MntFishProducts MntFruits MntGoldProds MntMeatProducts MntSweetProducts 
MntWines MonthsAsCustomer NumCatalogPurchases NumDealsPurchases NumDistPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth P_DepVar0 P_DepVar1 Q_DepVar0 Q_DepVar1 
Recency RFMstat RMntFrq R_DepVar0 R_DepVar1 Teenhome U_DepVar V_DepVar0 V_DepVar1 Year_Birth 
Z_CostContact Z_Revenue _bin _dataobs_ _LEAF_ _NODE_ _WARN_
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc freq data=_DMDB0FQY2CM noprint;
MPRINT(EM_DIAGRAM):   table name / out=_DMDBCOUNT0FQY2CM(drop=percent rename=(count=NLEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _MISS0FQY2CM(rename=(frequency=NMISS));
MPRINT(EM_DIAGRAM):   set _DMDB0FQY2CM(where=(NRAW=. and CRAW=''));
MPRINT(EM_DIAGRAM):   keep name frequency;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_MISS0FQY2CM;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_DMDBCOUNT0FQY2CM;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _COUNTS0FQY2CM;
MPRINT(EM_DIAGRAM):   merge _DMDBCOUNT0FQY2CM _MISS0FQY2CM;
MPRINT(EM_DIAGRAM):   label NLEVEL= 'Number of Category';
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if NMISS > 0 then do;
MPRINT(EM_DIAGRAM):   NLEVEL= NLEVEL-1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else NMISS = 0;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc sort data=_COUNTS0FQY2CM NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M13Y8ICQ NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data WORK.M13Y8ICQ;
MPRINT(EM_DIAGRAM):   length NLEVEL 8 nmiss 8;
MPRINT(EM_DIAGRAM):   update WORK.M13Y8ICQ _COUNTS0FQY2CM;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if name='' then name='_';
MPRINT(EM_DIAGRAM):   if levelAssigned and ROLE ne 'FREQ' then do;
MPRINT(EM_DIAGRAM):   select(NLEVEL);
MPRINT(EM_DIAGRAM):   when(.) do;
MPRINT(EM_DIAGRAM):   if type eq 'C' then level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when(0) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(1) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(2) level = 'BINARY';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if roleAssigned then do;
MPRINT(EM_DIAGRAM):   if level = 'NOMINAL' and NLEVEL > 20 then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   comment = "Exceeds maximum number of levels cutoff";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = 'UNARY' and ROLE ne 'FREQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   drop NLEVEL nmiss;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL= 
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY= 
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT= 
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL= 
"Label" LENGTH= "Length";
MPRINT(EM_DIAGRAM):   drop levelAssigned roleAssigned;
MPRINT(EM_DIAGRAM):   run;
2375888    data WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):    data WORK.M3ACW3HG;
2375889    set WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):   set WORK.M3ACW3HG;
2375890    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
2375891    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
2375892    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
2375893    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
2375894    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
2375895    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
2375896    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
2375897    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
2375898    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M3ACW3HG.
NOTE: The data set WORK.M3ACW3HG has 25 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375899    data WORK.M3WJOA0H;
MPRINT(EM_DIAGRAM):    data WORK.M3WJOA0H;
2375900    set WORK.M3WJOA0H;
MPRINT(EM_DIAGRAM):   set WORK.M3WJOA0H;
2375901    if role='INPUT' and use='D' then use='Y';
MPRINT(EM_DIAGRAM):   if role='INPUT' and use='D' then use='Y';
2375902    if NAME='_bin' then do;
MPRINT(EM_DIAGRAM):   if NAME='_bin' then do;
2375903    ROLE='TARGET';
MPRINT(EM_DIAGRAM):   ROLE='TARGET';
2375904    LEVEL='BINARY';
MPRINT(EM_DIAGRAM):   LEVEL='BINARY';
2375905    USE='Y';
MPRINT(EM_DIAGRAM):   USE='Y';
2375906    end;
MPRINT(EM_DIAGRAM):   end;
2375907    if NAME='DepVar' then do;
MPRINT(EM_DIAGRAM):   if NAME='DepVar' then do;
2375908    ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   ROLE='REJECTED';
2375909    end;
MPRINT(EM_DIAGRAM):   end;
2375910    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
2375911    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
2375912    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
2375913    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
2375914    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
2375915    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
2375916    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
2375917    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
2375918    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 26 observations read from the data set WORK.M3WJOA0H.
NOTE: The data set WORK.M3WJOA0H has 26 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2375919    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2375920    * Binary Model DepVar = 0;
MPRINT(EM_DIAGRAM):   * Binary Model DepVar = 0;
2375921    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375922    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375923    * REGRESSION MODEL DepVar binary BIN1;
MPRINT(EM_DIAGRAM):   * REGRESSION MODEL DepVar binary BIN1;
2375924    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375925    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375926    * Rule6: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule6: Create decision matrix;
2375927    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375928    data EM_DMREG / view=EM_DMREG;
MPRINT(EM_DIAGRAM):   data EM_DMREG / view=EM_DMREG;
2375929    set work._train(keep=
2375930    AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain
2375931    DepVar Education Income Kidhome Marital_Status MntFishProducts MntFruits
2375932    MntGoldProds MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases
2375933    NumDealsPurchases NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency
2375934    Teenhome _bin);
MPRINT(EM_DIAGRAM):   set work._train(keep= AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 
AcceptedCmp4 AcceptedCmp5 Complain DepVar Education Income Kidhome Marital_Status 
MntFishProducts MntFruits MntGoldProds MntMeatProducts MntSweetProducts MntWines 
NumCatalogPurchases NumDealsPurchases NumStorePurchases NumWebPurchases NumWebVisitsMonth 
Recency Teenhome _bin);
2375935    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: DATA STEP view saved on file WORK.EM_DMREG.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule6: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375936    *------------------------------------------------------------* ;
2375937    * Rule6: DMDBClass Macro ;
2375938    *------------------------------------------------------------* ;
2375939    %macro DMDBClass;
2375940        AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC)
2375941       AcceptedCmp5(ASC) Complain(ASC) DepVar(ASC) Education(ASC) Marital_Status(ASC)
2375942       _bin(DESC)
2375943    %mend DMDBClass;
2375944    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375945    * Rule6: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: DMDBVar Macro ;
2375946    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2375947    %macro DMDBVar;
2375948        Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts
2375949       MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases
2375950       NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
2375951    %mend DMDBVar;
2375952    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375953    * Rule6: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule6: Create DMDB;
2375954    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375955    proc dmdb batch data=WORK.EM_DMREG
2375956    dmdbcat=WORK.Rule6_DMDB
2375957    maxlevel = 513
2375958    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=WORK.EM_DMREG dmdbcat=WORK.Rule6_DMDB maxlevel = 
513 ;
MPRINT(EM_DIAGRAM):   class
2375959    class %DMDBClass;
MPRINT(DMDBCLASS):   AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC) 
AcceptedCmp5(ASC) Complain(ASC) DepVar(ASC) Education(ASC) Marital_Status(ASC) _bin(DESC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
2375960    var %DMDBVar;
MPRINT(DMDBVAR):   Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts 
MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases NumStorePurchases 
NumWebPurchases NumWebVisitsMonth Recency Teenhome
MPRINT(EM_DIAGRAM):  ;
2375961    target
2375962    _bin
2375963    ;
MPRINT(EM_DIAGRAM):   target _bin ;
2375964    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Records processed = 2374   Memory used = 511K.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      
NOTE: There were 2374 observations read from the data set WORK._TRAIN.
NOTE: There were 2374 observations read from the data set WORK.EM_DMREG.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
      

MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
2375965    quit;
2375966    *--- end code ---*;

2375967    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2375968    * Rule6: Run DMREG procedure;
MPRINT(EM_DIAGRAM):   * Rule6: Run DMREG procedure;
2375969    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2375970    proc dmreg data=EM_DMREG dmdbcat=WORK.Rule6_DMDB
2375971    validata = work._valid
2375972    outest = WORK.DMREG_2Y7JP6P_OUTEST
2375973    outterms = WORK.DMREG_2Y7JP6P_OUTTERMS
2375974    outmap= WORK.DMREG_2Y7JP6P_MAP namelen=200
2375975    ;
MPRINT(EM_DIAGRAM):   proc dmreg data=EM_DMREG dmdbcat=WORK.Rule6_DMDB validata = work._valid 
outest = WORK.DMREG_2Y7JP6P_OUTEST outterms = WORK.DMREG_2Y7JP6P_OUTTERMS outmap= 
WORK.DMREG_2Y7JP6P_MAP namelen=200 ;
2375976    class
2375977    _bin
2375978    AcceptedCmp1
2375979    AcceptedCmp2
2375980    AcceptedCmp3
2375981    AcceptedCmp4
2375982    AcceptedCmp5
2375983    Complain
2375984    Education
2375985    Marital_Status
2375986    ;
MPRINT(EM_DIAGRAM):   class _bin AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 
AcceptedCmp5 Complain Education Marital_Status ;
2375987    model _bin =
2375988    AcceptedCmp1
2375989    AcceptedCmp2
2375990    AcceptedCmp3
2375991    AcceptedCmp4
2375992    AcceptedCmp5
2375993    Complain
2375994    Education
2375995    Income
2375996    Kidhome
2375997    Marital_Status
2375998    MntFishProducts
2375999    MntFruits
2376000    MntGoldProds
2376001    MntMeatProducts
2376002    MntSweetProducts
2376003    MntWines
2376004    NumCatalogPurchases
2376005    NumDealsPurchases
2376006    NumStorePurchases
2376007    NumWebPurchases
2376008    NumWebVisitsMonth
2376009    Recency
2376010    Teenhome
2376011    /error=binomial link=LOGIT
2376012    coding=DEVIATION
2376013    nodesignprint
2376014    ;
MPRINT(EM_DIAGRAM):   model _bin = AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 
AcceptedCmp5 Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits 
MntGoldProds MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome /error=binomial 
link=LOGIT coding=DEVIATION nodesignprint ;
2376015    ;
MPRINT(EM_DIAGRAM):   ;
2376016    score data=_train
2376017    out=_ptrain(label="")
2376018    ;
MPRINT(EM_DIAGRAM):   score data=_train out=_ptrain(label="") ;
2376019    score data=_valid
2376020    out=_pvalid(label="")
2376021    ;
MPRINT(EM_DIAGRAM):   score data=_valid out=_pvalid(label="") ;
2376022    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2376022  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1.sas"
2376023    group=Rule6_1
2376024    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1.sas" group=Rule6_1 ;
2376025    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2376025  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1_res.sas"
2376026    group=Rule6_1
2376027    residual
2376028    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1_res.sas" group=Rule6_1 residual ;
2376029    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Variable _WARN_ already exists on file WORK._PTRAIN, using _WARN_2 instead.
NOTE: Variable _WARN_ already exists on file WORK._PVALID, using _WARN_2 instead.

NOTE: PROC DMREG is modeling the probability that _bin='1'.
NOTE: Convergence criterion (GCONV=1E-6) satisfied.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1.sas opened.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN1_res.sas opened.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.23 seconds
      cpu time            0.23 seconds
      
NOTE: There were 2374 observations read from the data set WORK._TRAIN.
NOTE: There were 2374 observations read from the data set WORK.EM_DMREG.
NOTE: There were 1018 observations read from the data set WORK._VALID.
NOTE: There were 2374 observations read from the data set WORK._TRAIN.
NOTE: There were 1018 observations read from the data set WORK._VALID.
NOTE: The data set WORK.DMREG_2Y7JP6P_OUTEST has 3 observations and 64 variables.
NOTE: The data set WORK.DMREG_2Y7JP6P_OUTTERMS has 30 observations and 6 variables.
NOTE: The data set WORK.DMREG_2Y7JP6P_MAP has 2 observations and 31 variables.
NOTE: The data set WORK._PTRAIN has 2374 observations and 69 variables.
NOTE: The data set WORK._PVALID has 1018 observations and 70 variables.
NOTE: The PROCEDURE DMREG printed pages 2272-2273.
NOTE: PROCEDURE DMREG used (Total process time):
      real time           0.25 seconds
      cpu time            0.26 seconds
      

MPRINT(EM_DIAGRAM):   quit;
2376030    quit;

2376031    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
2376032    delete Rule6_DMDB;
MPRINT(EM_DIAGRAM):   delete Rule6_DMDB;
2376033    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The file WORK.RULE6_DMDB (memtype=DATA) was not found, but appears on a DELETE statement.
2376034    quit;
MPRINT(EM_DIAGRAM):   quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      

2376035    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
2376036    delete Rule6_DMDB / memtype=catalog;
MPRINT(EM_DIAGRAM):   delete Rule6_DMDB / memtype=catalog;
2376037    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Deleting WORK.RULE6_DMDB (memtype=CATALOG).
2376038    quit;
MPRINT(EM_DIAGRAM):   quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
      

2376039    * BINARY: Training Classification;
MPRINT(EM_DIAGRAM):    * BINARY: Training Classification;
2376040    ;
MPRINT(EM_DIAGRAM):   ;
2376041    proc freq data = _ptrain noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _ptrain noprint;
2376042    tables F__bin * I__bin / out = _count;
MPRINT(EM_DIAGRAM):   tables F__bin * I__bin / out = _count;
2376043    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._COUNT has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2376044    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2376045    set _count;
MPRINT(EM_DIAGRAM):   set _count;
2376046    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
2376047    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
2376048    label F__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label F__bin = "From";
2376049    label I__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label I__bin = "Into";
2376050    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.41 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   * BINARY: Validation Classification;
MPRINT(EM_DIAGRAM):   ;
2376051    * BINARY: Validation Classification;
2376052    ;
2376053    proc freq data = _pvalid noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _pvalid noprint;
2376054    tables f__bin * i__bin / out=_vcount;
MPRINT(EM_DIAGRAM):   tables f__bin * i__bin / out=_vcount;
2376055    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VCOUNT has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2376056    data _vcount;
MPRINT(EM_DIAGRAM):   data _vcount;
2376057    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
2376058    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
2376059    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
2376060    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
2376061    label f__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label f__bin = "From";
2376062    label i__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label i__bin = "Into";
2376063    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
2376064    rename percent= vpercent;
MPRINT(EM_DIAGRAM):   rename percent= vpercent;
2376065    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
2376066    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   *;
2376067    *;
2376068    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2376069    set _count;
MPRINT(EM_DIAGRAM):   set _count;
2376070    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
2376071    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
2376072    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   * Merge Train and Valid classification;
MPRINT(EM_DIAGRAM):   ;
2376073    * Merge Train and Valid classification;
2376074    ;
2376075    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
2376076    by key;
MPRINT(EM_DIAGRAM):   by key;
2376077    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376078    proc sort data=_vcount;
MPRINT(EM_DIAGRAM):   proc sort data=_vcount;
2376079    by key;
MPRINT(EM_DIAGRAM):   by key;
2376080    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 4 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   *;
2376081    *;
2376082    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2376083    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
2376084    by key;
MPRINT(EM_DIAGRAM):   by key;
2376085    drop key;
MPRINT(EM_DIAGRAM):   drop key;
2376086    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: There were 4 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 4 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   *BINARY: Print Classification;
MPRINT(EM_DIAGRAM):   ;
2376087    *BINARY: Print Classification;
2376088    ;
2376089    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_binmodel_title, NOQUOTE, DepVar,
2376089  ! %nrbquote(0)))";
MPRINT(EM_DIAGRAM):   title9 "Binary Model DepVar = 0";
2376090    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Classification Table";
2376091    proc print data = _count noobs label;
MPRINT(EM_DIAGRAM):   proc print data = _count noobs label;
2376092    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 4 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 2274.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376093    title9;
MPRINT(EM_DIAGRAM):   title9;
2376094    title10;
MPRINT(EM_DIAGRAM):   title10;
2376095    * Extract misfit training values;
MPRINT(EM_DIAGRAM):    * Extract misfit training values;
2376096    ;
MPRINT(EM_DIAGRAM):   ;
2376097    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
2376098    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2376099    if not ( I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not ( I__bin eq '1' and F__bin eq '1') then output;
2376100    keep
2376101    AcceptedCmp1
2376102    AcceptedCmp2
2376103    AcceptedCmp3
2376104    AcceptedCmp4
2376105    AcceptedCmp5
2376106    Complain
2376107    Education
2376108    Income
2376109    Kidhome
2376110    Marital_Status
2376111    MntFishProducts
2376112    MntFruits
2376113    MntGoldProds
2376114    MntMeatProducts
2376115    MntSweetProducts
2376116    MntWines
2376117    NumCatalogPurchases
2376118    NumDealsPurchases
2376119    NumStorePurchases
2376120    NumWebPurchases
2376121    NumWebVisitsMonth
2376122    Recency
2376123    Teenhome
2376124    DepVar;
MPRINT(EM_DIAGRAM):   keep AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 
Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome DepVar;
2376125    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2374 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 412 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   * Extract misfit validation values;
MPRINT(EM_DIAGRAM):   ;
2376126    * Extract misfit validation values;
2376127    ;
2376128    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
2376129    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2376130    if not (I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not (I__bin eq '1' and F__bin eq '1') then output;
2376131    keep
2376132    AcceptedCmp1
2376133    AcceptedCmp2
2376134    AcceptedCmp3
2376135    AcceptedCmp4
2376136    AcceptedCmp5
2376137    Complain
2376138    Education
2376139    Income
2376140    Kidhome
2376141    Marital_Status
2376142    MntFishProducts
2376143    MntFruits
2376144    MntGoldProds
2376145    MntMeatProducts
2376146    MntSweetProducts
2376147    MntWines
2376148    NumCatalogPurchases
2376149    NumDealsPurchases
2376150    NumStorePurchases
2376151    NumWebPurchases
2376152    NumWebVisitsMonth
2376153    Recency
2376154    Teenhome
2376155    DepVar;
MPRINT(EM_DIAGRAM):   keep AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 
Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome DepVar;
2376156    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1018 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 182 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376157    * Create training data set with binary target for modeling;
MPRINT(EM_DIAGRAM):    * Create training data set with binary target for modeling;
2376158    ;
MPRINT(EM_DIAGRAM):   ;
2376159    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
2376160    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
2376161    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2376162    _tmp=putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp=putn(DepVar, 'best.');
2376163    %DMNORMIP(_tmp);
MPRINT(DMNORMIP):   call dmnorm(_tmp,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
2376164    _tmpLevel = '1';
MPRINT(EM_DIAGRAM):   _tmpLevel = '1';
2376165    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
2376166    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
2376167    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
2376168    drop _tmp _tmpLevel
2376169    ;
MPRINT(EM_DIAGRAM):   drop _tmp _tmpLevel ;
2376170    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 412 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 412 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376171    * Create validation data set with binary target for modeling;
MPRINT(EM_DIAGRAM):    * Create validation data set with binary target for modeling;
2376172    ;
MPRINT(EM_DIAGRAM):   ;
2376173    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
2376174    length _bin $12;
MPRINT(EM_DIAGRAM):   length _bin $12;
2376175    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2376176    _tmp = putn(DepVar, 'best.');
MPRINT(EM_DIAGRAM):   _tmp = putn(DepVar, 'best.');
2376177    %DMNORMIP(_TMP);
MPRINT(DMNORMIP):   call dmnorm(_TMP,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMIP):  );
MPRINT(EM_DIAGRAM):  ;
2376178    _tmpLevel = '1';
MPRINT(EM_DIAGRAM):   _tmpLevel = '1';
2376179    %DMNORMCP(_tmpLevel, _tmpLevel);
MPRINT(DMNORMCP):   _tmpLevel=dmnorm(_tmpLevel,
MPRINT(DMNORLEN):  32
MPRINT(DMNORMCP):  );
MPRINT(EM_DIAGRAM):  ;
2376180    if _tmp eq _tmpLevel then _bin = '1';
MPRINT(EM_DIAGRAM):   if _tmp eq _tmpLevel then _bin = '1';
2376181    else _bin = '0';
MPRINT(EM_DIAGRAM):   else _bin = '0';
2376182    drop _tmp
2376183    ;
MPRINT(EM_DIAGRAM):   drop _tmp ;
2376184    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 182 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 182 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376185    data _train;
MPRINT(EM_DIAGRAM):    data _train;
2376186    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2376187    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 412 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._TRAIN has 412 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376188    data _valid;
MPRINT(EM_DIAGRAM):   data _valid;
2376189    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2376190    options validvarname=any;
MPRINT(EM_DIAGRAM):   options validvarname=any;

NOTE: There were 182 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VALID has 182 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376191    proc contents data=work._train out=_tempAdvisor noprint;
MPRINT(EM_DIAGRAM):   proc contents data=work._train out=_tempAdvisor noprint;
2376192    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK._TEMPADVISOR has 25 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376193    options validvarname=V7;
MPRINT(EM_DIAGRAM):   options validvarname=V7;
2376194    %let _dsidTable = 0;
2376195    %let _engineTable =;
2376196    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
2376197    dsid = open('work._train');
MPRINT(EM_DIAGRAM):   dsid = open('work._train');
2376198    call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EM_DIAGRAM):   call symput('_dsidTable', strip(put(dsid, best.)));
2376199    if dsid then do;
MPRINT(EM_DIAGRAM):   if dsid then do;
2376200    call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EM_DIAGRAM):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
2376201    dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
2376202    end;
MPRINT(EM_DIAGRAM):   end;
2376203    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376204    options fmterr;
MPRINT(EM_DIAGRAM):    options fmterr;
2376205    data _metaTestView;
MPRINT(EM_DIAGRAM):   data _metaTestView;
2376206    set work._train;
MPRINT(EM_DIAGRAM):   set work._train;
2376207    if _N_=1 then do;
MPRINT(EM_DIAGRAM):   if _N_=1 then do;
2376208    output;
MPRINT(EM_DIAGRAM):   output;
2376209    stop;
MPRINT(EM_DIAGRAM):   stop;
2376210    end;
MPRINT(EM_DIAGRAM):   end;
2376211    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK._METATESTVIEW has 1 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376212    proc contents data=work._train
2376213    out=WORK.M3DTGT4X noprint;
MPRINT(EM_DIAGRAM):    proc contents data=work._train out=WORK.M3DTGT4X noprint;
2376214    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK.M3DTGT4X has 25 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376215    data WORK.M3DTGT4X;
MPRINT(EM_DIAGRAM):    data WORK.M3DTGT4X;
2376216    length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 INDEXTYPE $
2376216  !  9;
MPRINT(EM_DIAGRAM):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 
INDEXTYPE $ 9;
2376217    label NAME =;
MPRINT(EM_DIAGRAM):   label NAME =;
2376218    set WORK.M3DTGT4X(keep=name type length label format formatl formatd informat
2376218  ! informl informd idxusage rename=(type=itype));
MPRINT(EM_DIAGRAM):   set WORK.M3DTGT4X(keep=name type length label format formatl formatd 
informat informl informd idxusage rename=(type=itype));
2376219    if itype = 1 then type = 'N';
MPRINT(EM_DIAGRAM):   if itype = 1 then type = 'N';
2376220    else type = 'C';
MPRINT(EM_DIAGRAM):   else type = 'C';
2376221    if formatl > 0 then do;
MPRINT(EM_DIAGRAM):   if formatl > 0 then do;
2376222    if format ne ' ' then format = strip(format)!!strip(put(formatl,
2376222  ! best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   if format ne ' ' then format = strip(format)!!strip(put(formatl, 
best12.))!!'.'!!strip(put(formatd, best12.));
2376223    else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, 
best12.));
2376224    end;
MPRINT(EM_DIAGRAM):   end;
2376225    else if format ne '' then format = strip(format)!!'.';
MPRINT(EM_DIAGRAM):   else if format ne '' then format = strip(format)!!'.';
2376226    if informl > 0 then do;
MPRINT(EM_DIAGRAM):   if informl > 0 then do;
2376227    if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
2376227  ! best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl, 
best12.))!!'.'!!strip(put(informd, best12.));
2376228    else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, 
best12.));
2376229    end;
MPRINT(EM_DIAGRAM):   end;
2376230    else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EM_DIAGRAM):   else if informat ne '' then informat = strip(informat)!!'.';
2376231    if idxusage = 'NONE' then index ="N";
MPRINT(EM_DIAGRAM):   if idxusage = 'NONE' then index ="N";
2376232    else index = "Y";
MPRINT(EM_DIAGRAM):   else index = "Y";
2376233    indextype = idxusage;
MPRINT(EM_DIAGRAM):   indextype = idxusage;
2376234    drop idxusage itype formatl formatd informl informd;
MPRINT(EM_DIAGRAM):   drop idxusage itype formatl formatd informl informd;
2376235    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M3DTGT4X.
NOTE: The data set WORK.M3DTGT4X has 25 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376236    data WORK.M3DTGT4X;
MPRINT(EM_DIAGRAM):    data WORK.M3DTGT4X;
2376237    length UNAME $64;
MPRINT(EM_DIAGRAM):   length UNAME $64;
2376238    set WORK.M3DTGT4X;
MPRINT(EM_DIAGRAM):   set WORK.M3DTGT4X;
2376239    UNAME = upcase(NAME);
MPRINT(EM_DIAGRAM):   UNAME = upcase(NAME);
2376240    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M3DTGT4X.
NOTE: The data set WORK.M3DTGT4X has 25 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):    proc sort data=WORK.M12NWYFR NOTHREADS;
MPRINT(EM_DIAGRAM):   by UNAME;
MPRINT(EM_DIAGRAM):   run;
2376244    data WORK.M12NWYFR;
MPRINT(EM_DIAGRAM):    data WORK.M12NWYFR;
2376245    drop UNAME;
MPRINT(EM_DIAGRAM):   drop UNAME;
2376246    set WORK.M12NWYFR;
MPRINT(EM_DIAGRAM):   set WORK.M12NWYFR;
2376247    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M12NWYFR.
NOTE: The data set WORK.M12NWYFR has 25 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):    data WORK.M0ILJ7NO(keep=NAME ATTR);
MPRINT(EM_DIAGRAM):   length ATTR $ 20;
MPRINT(EM_DIAGRAM):   set WORK.M12NWYFR;
MPRINT(EM_DIAGRAM):   if level ne "INTERVAL" then do;
MPRINT(EM_DIAGRAM):   if order = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ORDER';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'FORMATTYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ROLE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'LEVEL';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if type = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'TYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if index = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'INDEX';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if report = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'REPORT';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort NOTHREADS;
MPRINT(EM_DIAGRAM):   by attr;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.M12NWYFR;
MPRINT(EM_DIAGRAM):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $ 
10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EM_DIAGRAM):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EM_DIAGRAM):   set WORK.M12NWYFR;
MPRINT(EM_DIAGRAM):   if formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   if format ne ' ' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
MPRINT(EM_DIAGRAM):   pos = indexc(format,'.1234567890');
MPRINT(EM_DIAGRAM):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EM_DIAGRAM):   else tempfmt = ' ';
MPRINT(EM_DIAGRAM):   flen = length(tempfmt);
MPRINT(EM_DIAGRAM):   select;
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN" 
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO" 
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON" 
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD" 
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" )) 
formattype = 'DATE';
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype = 
"TIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT" 
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN" 
"Z" "ZD")) formattype = "CODING";
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   formattype = "USER";
MPRINT(EM_DIAGRAM):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EM_DIAGRAM):   else if flen >= 4 then do;
MPRINT(EM_DIAGRAM):   str = substr(tempfmt,1,4);
MPRINT(EM_DIAGRAM):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EM_DIAGRAM):   else if str = "S370" then formattype = "CODING";
MPRINT(EM_DIAGRAM):   else if str = "BEST" then formattype = "NUM";
MPRINT(EM_DIAGRAM):   drop str;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType = 
"DATE";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   drop flen tempfmt pos;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   formatType = "CATEGORY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if formatType = "NUM" then do;
MPRINT(EM_DIAGRAM):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EM_DIAGRAM):   else formatType = "QUANTITY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level = 
"NOMINAL";
MPRINT(EM_DIAGRAM):   else level = "INTERVAL";
MPRINT(EM_DIAGRAM):   levelAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else level = upcase(level);
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   length name_prefix $8 _uname $64;
MPRINT(EM_DIAGRAM):   drop name_prefix _uname _freqflag;
MPRINT(EM_DIAGRAM):   retain _freqflag;
MPRINT(EM_DIAGRAM):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EM_DIAGRAM):   _uname = upcase(NAME);
MPRINT(EM_DIAGRAM):   select(_uname);
MPRINT(EM_DIAGRAM):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_SEGMENT') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('_NODE_') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('URI') ROLE = 'URL';
MPRINT(EM_DIAGRAM):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'REJECTED';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'FREQ';
MPRINT(EM_DIAGRAM):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EM_DIAGRAM):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   name_prefix = scan(_uname, 1, '_');
MPRINT(EM_DIAGRAM):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EM_DIAGRAM):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS', 
'RAT') then ROLE = 'RESIDUAL';
MPRINT(EM_DIAGRAM):   else if name_prefix ='D' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix ='B' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI', 
'IC') then ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR', 
'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL', 
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT', 
'TIMEID');
MPRINT(EM_DIAGRAM):   drop _found_ i;
MPRINT(EM_DIAGRAM):   _found_=0;
MPRINT(EM_DIAGRAM):   do i=1 to 19 until(_found_=1);
MPRINT(EM_DIAGRAM):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EM_DIAGRAM):   ROLE=_ROLE_{i};
MPRINT(EM_DIAGRAM):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EM_DIAGRAM):   _found_=1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if length(_uname)>2 then do;
MPRINT(EM_DIAGRAM):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'ID';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EM_DIAGRAM):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EM_DIAGRAM):   else role = 'INPUT';
MPRINT(EM_DIAGRAM):   roleAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else role = upcase(role);
MPRINT(EM_DIAGRAM):   if REPORT = '' then REPORT = 'N';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    proc dmdb data=work._train(obs=1000000) batch classOut=_DMDB1J85YMU 
maxLevel=22;
MPRINT(EM_DIAGRAM):   class
MPRINT(DMDBCLASS):   AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain 
DepVar Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome _bin
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc freq data=_DMDB1J85YMU noprint;
MPRINT(EM_DIAGRAM):   table name / out=_DMDBCOUNT1J85YMU(drop=percent rename=(count=NLEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _MISS1J85YMU(rename=(frequency=NMISS));
MPRINT(EM_DIAGRAM):   set _DMDB1J85YMU(where=(NRAW=. and CRAW=''));
MPRINT(EM_DIAGRAM):   keep name frequency;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_MISS1J85YMU;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_DMDBCOUNT1J85YMU;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _COUNTS1J85YMU;
MPRINT(EM_DIAGRAM):   merge _DMDBCOUNT1J85YMU _MISS1J85YMU;
MPRINT(EM_DIAGRAM):   label NLEVEL= 'Number of Category';
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if NMISS > 0 then do;
MPRINT(EM_DIAGRAM):   NLEVEL= NLEVEL-1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else NMISS = 0;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc sort data=_COUNTS1J85YMU NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M12NWYFR NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data WORK.M12NWYFR;
MPRINT(EM_DIAGRAM):   length NLEVEL 8 nmiss 8;
MPRINT(EM_DIAGRAM):   update WORK.M12NWYFR _COUNTS1J85YMU;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if name='' then name='_';
MPRINT(EM_DIAGRAM):   if levelAssigned and ROLE ne 'FREQ' then do;
MPRINT(EM_DIAGRAM):   select(NLEVEL);
MPRINT(EM_DIAGRAM):   when(.) do;
MPRINT(EM_DIAGRAM):   if type eq 'C' then level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when(0) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(1) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(2) level = 'BINARY';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if roleAssigned then do;
MPRINT(EM_DIAGRAM):   if level = 'NOMINAL' and NLEVEL > 20 then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   comment = "Exceeds maximum number of levels cutoff";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = 'UNARY' and ROLE ne 'FREQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   drop NLEVEL nmiss;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL= 
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY= 
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT= 
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL= 
"Label" LENGTH= "Length";
MPRINT(EM_DIAGRAM):   drop levelAssigned roleAssigned;
MPRINT(EM_DIAGRAM):   run;
2376532    data WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):    data WORK.M3ACW3HG;
2376533    set WORK.M3ACW3HG;
MPRINT(EM_DIAGRAM):   set WORK.M3ACW3HG;
2376534    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
2376535    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
2376536    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
2376537    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
2376538    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
2376539    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
2376540    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
2376541    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
2376542    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 25 observations read from the data set WORK.M3ACW3HG.
NOTE: The data set WORK.M3ACW3HG has 25 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376543    data WORK.M3T_8ORH;
MPRINT(EM_DIAGRAM):    data WORK.M3T_8ORH;
2376544    set WORK.M3T_8ORH;
MPRINT(EM_DIAGRAM):   set WORK.M3T_8ORH;
2376545    if role='INPUT' and use='D' then use='Y';
MPRINT(EM_DIAGRAM):   if role='INPUT' and use='D' then use='Y';
2376546    if NAME='_bin' then do;
MPRINT(EM_DIAGRAM):   if NAME='_bin' then do;
2376547    ROLE='TARGET';
MPRINT(EM_DIAGRAM):   ROLE='TARGET';
2376548    LEVEL='BINARY';
MPRINT(EM_DIAGRAM):   LEVEL='BINARY';
2376549    USE='Y';
MPRINT(EM_DIAGRAM):   USE='Y';
2376550    end;
MPRINT(EM_DIAGRAM):   end;
2376551    if NAME='DepVar' then do;
MPRINT(EM_DIAGRAM):   if NAME='DepVar' then do;
2376552    ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   ROLE='REJECTED';
2376553    end;
MPRINT(EM_DIAGRAM):   end;
2376554    if NAME='Element1' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element1' then delete;
2376555    if NAME='Element2' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element2' then delete;
2376556    if NAME='Element3' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element3' then delete;
2376557    if NAME='Element4' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Element4' then delete;
2376558    if NAME='Group' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Group' then delete;
2376559    if NAME='Z_CostContact' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_CostContact' then delete;
2376560    if NAME='Z_Revenue' then delete;
MPRINT(EM_DIAGRAM):   if NAME='Z_Revenue' then delete;
2376561    if NAME='_WARN_' then delete;
MPRINT(EM_DIAGRAM):   if NAME='_WARN_' then delete;
2376562    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 26 observations read from the data set WORK.M3T_8ORH.
NOTE: The data set WORK.M3T_8ORH has 26 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376563    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2376564    * Binary Model DepVar = 1;
MPRINT(EM_DIAGRAM):   * Binary Model DepVar = 1;
2376565    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376566    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376567    * REGRESSION MODEL DepVar binary BIN2;
MPRINT(EM_DIAGRAM):   * REGRESSION MODEL DepVar binary BIN2;
2376568    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376569    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376570    * Rule6: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Rule6: Create decision matrix;
2376571    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376572    data EM_DMREG / view=EM_DMREG;
MPRINT(EM_DIAGRAM):   data EM_DMREG / view=EM_DMREG;
2376573    set work._train(keep=
2376574    AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain
2376575    DepVar Education Income Kidhome Marital_Status MntFishProducts MntFruits
2376576    MntGoldProds MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases
2376577    NumDealsPurchases NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency
2376578    Teenhome _bin);
MPRINT(EM_DIAGRAM):   set work._train(keep= AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 
AcceptedCmp4 AcceptedCmp5 Complain DepVar Education Income Kidhome Marital_Status 
MntFishProducts MntFruits MntGoldProds MntMeatProducts MntSweetProducts MntWines 
NumCatalogPurchases NumDealsPurchases NumStorePurchases NumWebPurchases NumWebVisitsMonth 
Recency Teenhome _bin);
2376579    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: DATA STEP view saved on file WORK.EM_DMREG.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Rule6: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2376580    *------------------------------------------------------------* ;
2376581    * Rule6: DMDBClass Macro ;
2376582    *------------------------------------------------------------* ;
2376583    %macro DMDBClass;
2376584        AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC)
2376585       AcceptedCmp5(ASC) Complain(ASC) DepVar(ASC) Education(ASC) Marital_Status(ASC)
2376586       _bin(DESC)
2376587    %mend DMDBClass;
2376588    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2376589    * Rule6: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Rule6: DMDBVar Macro ;
2376590    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
2376591    %macro DMDBVar;
2376592        Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts
2376593       MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases
2376594       NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
2376595    %mend DMDBVar;
2376596    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376597    * Rule6: Create DMDB;
MPRINT(EM_DIAGRAM):   * Rule6: Create DMDB;
2376598    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376599    proc dmdb batch data=WORK.EM_DMREG
2376600    dmdbcat=WORK.Rule6_DMDB
2376601    maxlevel = 513
2376602    ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=WORK.EM_DMREG dmdbcat=WORK.Rule6_DMDB maxlevel = 
513 ;
MPRINT(EM_DIAGRAM):   class
2376603    class %DMDBClass;
MPRINT(DMDBCLASS):   AcceptedCmp1(ASC) AcceptedCmp2(ASC) AcceptedCmp3(ASC) AcceptedCmp4(ASC) 
AcceptedCmp5(ASC) Complain(ASC) DepVar(ASC) Education(ASC) Marital_Status(ASC) _bin(DESC)
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   var
2376604    var %DMDBVar;
MPRINT(DMDBVAR):   Income Kidhome MntFishProducts MntFruits MntGoldProds MntMeatProducts 
MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases NumStorePurchases 
NumWebPurchases NumWebVisitsMonth Recency Teenhome
MPRINT(EM_DIAGRAM):  ;
2376605    target
2376606    _bin
2376607    ;
MPRINT(EM_DIAGRAM):   target _bin ;
2376608    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Records processed = 412   Memory used = 511K.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      
NOTE: There were 412 observations read from the data set WORK._TRAIN.
NOTE: There were 412 observations read from the data set WORK.EM_DMREG.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
2376609    quit;
2376610    *--- end code ---*;

2376611    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
2376612    * Rule6: Run DMREG procedure;
MPRINT(EM_DIAGRAM):   * Rule6: Run DMREG procedure;
2376613    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
2376614    proc dmreg data=EM_DMREG dmdbcat=WORK.Rule6_DMDB
2376615    validata = work._valid
2376616    outest = WORK.DMREG_2ECTYSB_OUTEST
2376617    outterms = WORK.DMREG_2ECTYSB_OUTTERMS
2376618    outmap= WORK.DMREG_2ECTYSB_MAP namelen=200
2376619    ;
MPRINT(EM_DIAGRAM):   proc dmreg data=EM_DMREG dmdbcat=WORK.Rule6_DMDB validata = work._valid 
outest = WORK.DMREG_2ECTYSB_OUTEST outterms = WORK.DMREG_2ECTYSB_OUTTERMS outmap= 
WORK.DMREG_2ECTYSB_MAP namelen=200 ;
2376620    class
2376621    _bin
2376622    AcceptedCmp1
2376623    AcceptedCmp2
2376624    AcceptedCmp3
2376625    AcceptedCmp4
2376626    AcceptedCmp5
2376627    Complain
2376628    Education
2376629    Marital_Status
2376630    ;
MPRINT(EM_DIAGRAM):   class _bin AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 
AcceptedCmp5 Complain Education Marital_Status ;
2376631    model _bin =
2376632    AcceptedCmp1
2376633    AcceptedCmp2
2376634    AcceptedCmp3
2376635    AcceptedCmp4
2376636    AcceptedCmp5
2376637    Complain
2376638    Education
2376639    Income
2376640    Kidhome
2376641    Marital_Status
2376642    MntFishProducts
2376643    MntFruits
2376644    MntGoldProds
2376645    MntMeatProducts
2376646    MntSweetProducts
2376647    MntWines
2376648    NumCatalogPurchases
2376649    NumDealsPurchases
2376650    NumStorePurchases
2376651    NumWebPurchases
2376652    NumWebVisitsMonth
2376653    Recency
2376654    Teenhome
2376655    /error=binomial link=LOGIT
2376656    coding=DEVIATION
2376657    nodesignprint
2376658    ;
MPRINT(EM_DIAGRAM):   model _bin = AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 
AcceptedCmp5 Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits 
MntGoldProds MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome /error=binomial 
link=LOGIT coding=DEVIATION nodesignprint ;
2376659    ;
MPRINT(EM_DIAGRAM):   ;
2376660    score data=_train
2376661    out=_ptrain(label="")
2376662    ;
MPRINT(EM_DIAGRAM):   score data=_train out=_ptrain(label="") ;
2376663    score data=_valid
2376664    out=_pvalid(label="")
2376665    ;
MPRINT(EM_DIAGRAM):   score data=_valid out=_pvalid(label="") ;
2376666    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2376666  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2.sas"
2376667    group=Rule6_2
2376668    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2.sas" group=Rule6_2 ;
2376669    code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary
2376669  ! Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2_res.sas"
2376670    group=Rule6_2
2376671    residual
2376672    ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2_res.sas" group=Rule6_2 residual ;
2376673    run;
MPRINT(EM_DIAGRAM):   run;


NOTE: PROC DMREG is modeling the probability that _bin='1'.
NOTE: Convergence criterion (GCONV=1E-6) satisfied.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2.sas opened.
NOTE: External file C:\Users\LUKASF~1\AppData\Local\Temp\SAS Temporary 
      Files\_TD9752_WN7LF-LEAVE_\Prc2\BIN2_res.sas opened.
NOTE: View WORK.EM_DMREG.VIEW used (Total process time):
      real time           0.19 seconds
      cpu time            0.20 seconds
      
NOTE: There were 412 observations read from the data set WORK._TRAIN.
NOTE: There were 412 observations read from the data set WORK.EM_DMREG.
NOTE: There were 182 observations read from the data set WORK._VALID.
NOTE: There were 412 observations read from the data set WORK._TRAIN.
NOTE: There were 182 observations read from the data set WORK._VALID.
NOTE: The data set WORK.DMREG_2ECTYSB_OUTEST has 3 observations and 64 variables.
NOTE: The data set WORK.DMREG_2ECTYSB_OUTTERMS has 30 observations and 6 variables.
NOTE: The data set WORK.DMREG_2ECTYSB_MAP has 2 observations and 31 variables.
NOTE: The data set WORK._PTRAIN has 412 observations and 34 variables.
NOTE: The data set WORK._PVALID has 182 observations and 35 variables.
NOTE: The PROCEDURE DMREG printed pages 2275-2276.
NOTE: PROCEDURE DMREG used (Total process time):
      real time           0.21 seconds
      cpu time            0.21 seconds
      

MPRINT(EM_DIAGRAM):   quit;
2376674    quit;

2376675    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
2376676    delete Rule6_DMDB;
MPRINT(EM_DIAGRAM):   delete Rule6_DMDB;
2376677    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The file WORK.RULE6_DMDB (memtype=DATA) was not found, but appears on a DELETE statement.
2376678    quit;
MPRINT(EM_DIAGRAM):   quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
      

2376679    proc datasets lib=WORK nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=WORK nolist;
2376680    delete Rule6_DMDB / memtype=catalog;
MPRINT(EM_DIAGRAM):   delete Rule6_DMDB / memtype=catalog;
2376681    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Deleting WORK.RULE6_DMDB (memtype=CATALOG).
2376682    quit;
MPRINT(EM_DIAGRAM):   quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      

2376683    * BINARY: Training Classification;
MPRINT(EM_DIAGRAM):    * BINARY: Training Classification;
2376684    ;
MPRINT(EM_DIAGRAM):   ;
2376685    proc freq data = _ptrain noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _ptrain noprint;
2376686    tables F__bin * I__bin / out = _count;
MPRINT(EM_DIAGRAM):   tables F__bin * I__bin / out = _count;
2376687    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 412 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._COUNT has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

2376688    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2376689    set _count;
MPRINT(EM_DIAGRAM):   set _count;
2376690    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_traincount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Train Count";
2376691    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Train Percent";
2376692    label F__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label F__bin = "From";
2376693    label I__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label I__bin = "Into";
2376694    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   * BINARY: Validation Classification;
MPRINT(EM_DIAGRAM):   ;
2376695    * BINARY: Validation Classification;
2376696    ;
2376697    proc freq data = _pvalid noprint;
MPRINT(EM_DIAGRAM):   proc freq data = _pvalid noprint;
2376698    tables f__bin * i__bin / out=_vcount;
MPRINT(EM_DIAGRAM):   tables f__bin * i__bin / out=_vcount;
2376699    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 182 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VCOUNT has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2376700    data _vcount;
MPRINT(EM_DIAGRAM):   data _vcount;
2376701    set _vcount;
MPRINT(EM_DIAGRAM):   set _vcount;
2376702    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
2376703    label count = "%sysfunc(sasmsg(sashelp.dmine, rpt_validcount_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label count = "Valid Count";
2376704    label percent = "%sysfunc(sasmsg(sashelp.dmine, rpt_validpercent_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percent = "Valid Percent";
2376705    label f__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_from_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label f__bin = "From";
2376706    label i__bin = "%sysfunc(sasmsg(sashelp.dmine, rpt_into_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label i__bin = "Into";
2376707    rename count = vcount;
MPRINT(EM_DIAGRAM):   rename count = vcount;
2376708    rename percent= vpercent;
MPRINT(EM_DIAGRAM):   rename percent= vpercent;
2376709    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
2376710    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   *;
2376711    *;
2376712    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2376713    set _count;
MPRINT(EM_DIAGRAM):   set _count;
2376714    length key $64;
MPRINT(EM_DIAGRAM):   length key $64;
2376715    key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
MPRINT(EM_DIAGRAM):   key = ktrim(kleft(f__bin) !! '_' !! ktrim(kleft(i__bin)));
2376716    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   * Merge Train and Valid classification;
MPRINT(EM_DIAGRAM):   ;
2376717    * Merge Train and Valid classification;
2376718    ;
2376719    proc sort data=_count;
MPRINT(EM_DIAGRAM):   proc sort data=_count;
2376720    by key;
MPRINT(EM_DIAGRAM):   by key;
2376721    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The data set WORK._COUNT has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376722    proc sort data=_vcount;
MPRINT(EM_DIAGRAM):   proc sort data=_vcount;
2376723    by key;
MPRINT(EM_DIAGRAM):   by key;
2376724    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._VCOUNT has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):   *;
2376725    *;
2376726    data _count;
MPRINT(EM_DIAGRAM):   data _count;
2376727    merge _count _vcount;
MPRINT(EM_DIAGRAM):   merge _count _vcount;
2376728    by key;
MPRINT(EM_DIAGRAM):   by key;
2376729    drop key;
MPRINT(EM_DIAGRAM):   drop key;
2376730    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: There were 2 observations read from the data set WORK._VCOUNT.
NOTE: The data set WORK._COUNT has 2 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   *BINARY: Print Classification;
MPRINT(EM_DIAGRAM):   ;
2376731    *BINARY: Print Classification;
2376732    ;
2376733    title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_binmodel_title, NOQUOTE, DepVar,
2376733  ! %nrbquote(1)))";
MPRINT(EM_DIAGRAM):   title9 "Binary Model DepVar = 1";
2376734    title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Classification Table";
2376735    proc print data = _count noobs label;
MPRINT(EM_DIAGRAM):   proc print data = _count noobs label;
2376736    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 2 observations read from the data set WORK._COUNT.
NOTE: The PROCEDURE PRINT printed page 2277.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376737    title9;
MPRINT(EM_DIAGRAM):   title9;
2376738    title10;
MPRINT(EM_DIAGRAM):   title10;
2376739    * Extract misfit training values;
MPRINT(EM_DIAGRAM):    * Extract misfit training values;
2376740    ;
MPRINT(EM_DIAGRAM):   ;
2376741    data _ptrain;
MPRINT(EM_DIAGRAM):   data _ptrain;
2376742    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2376743    if not ( I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not ( I__bin eq '1' and F__bin eq '1') then output;
2376744    keep
2376745    AcceptedCmp1
2376746    AcceptedCmp2
2376747    AcceptedCmp3
2376748    AcceptedCmp4
2376749    AcceptedCmp5
2376750    Complain
2376751    Education
2376752    Income
2376753    Kidhome
2376754    Marital_Status
2376755    MntFishProducts
2376756    MntFruits
2376757    MntGoldProds
2376758    MntMeatProducts
2376759    MntSweetProducts
2376760    MntWines
2376761    NumCatalogPurchases
2376762    NumDealsPurchases
2376763    NumStorePurchases
2376764    NumWebPurchases
2376765    NumWebVisitsMonth
2376766    Recency
2376767    Teenhome
2376768    DepVar;
MPRINT(EM_DIAGRAM):   keep AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 
Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome DepVar;
2376769    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 412 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._PTRAIN has 53 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(EM_DIAGRAM):   * Extract misfit validation values;
MPRINT(EM_DIAGRAM):   ;
2376770    * Extract misfit validation values;
2376771    ;
2376772    data _pvalid;
MPRINT(EM_DIAGRAM):   data _pvalid;
2376773    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2376774    if not (I__bin eq '1' and F__bin eq '1') then output;
MPRINT(EM_DIAGRAM):   if not (I__bin eq '1' and F__bin eq '1') then output;
2376775    keep
2376776    AcceptedCmp1
2376777    AcceptedCmp2
2376778    AcceptedCmp3
2376779    AcceptedCmp4
2376780    AcceptedCmp5
2376781    Complain
2376782    Education
2376783    Income
2376784    Kidhome
2376785    Marital_Status
2376786    MntFishProducts
2376787    MntFruits
2376788    MntGoldProds
2376789    MntMeatProducts
2376790    MntSweetProducts
2376791    MntWines
2376792    NumCatalogPurchases
2376793    NumDealsPurchases
2376794    NumStorePurchases
2376795    NumWebPurchases
2376796    NumWebVisitsMonth
2376797    Recency
2376798    Teenhome
2376799    DepVar;
MPRINT(EM_DIAGRAM):   keep AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 
Complain Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome DepVar;
2376800    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 182 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._PVALID has 27 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376801    data _train;
MPRINT(EM_DIAGRAM):    data _train;
2376802    set _ptrain;
MPRINT(EM_DIAGRAM):   set _ptrain;
2376803    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 53 observations read from the data set WORK._PTRAIN.
NOTE: The data set WORK._TRAIN has 53 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376804    data _valid;
MPRINT(EM_DIAGRAM):   data _valid;
2376805    set _pvalid;
MPRINT(EM_DIAGRAM):   set _pvalid;
2376806    options validvarname=any;
MPRINT(EM_DIAGRAM):   options validvarname=any;

NOTE: There were 27 observations read from the data set WORK._PVALID.
NOTE: The data set WORK._VALID has 27 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

2376807    proc contents data=work._train out=_tempAdvisor noprint;
MPRINT(EM_DIAGRAM):   proc contents data=work._train out=_tempAdvisor noprint;
2376808    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK._TEMPADVISOR has 24 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376809    options validvarname=V7;
MPRINT(EM_DIAGRAM):   options validvarname=V7;
2376810    %let _dsidTable = 0;
2376811    %let _engineTable =;
2376812    data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
2376813    dsid = open('work._train');
MPRINT(EM_DIAGRAM):   dsid = open('work._train');
2376814    call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EM_DIAGRAM):   call symput('_dsidTable', strip(put(dsid, best.)));
2376815    if dsid then do;
MPRINT(EM_DIAGRAM):   if dsid then do;
2376816    call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EM_DIAGRAM):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
2376817    dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
2376818    end;
MPRINT(EM_DIAGRAM):   end;
2376819    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376820    options fmterr;
MPRINT(EM_DIAGRAM):    options fmterr;
2376821    data _metaTestView;
MPRINT(EM_DIAGRAM):   data _metaTestView;
2376822    set work._train;
MPRINT(EM_DIAGRAM):   set work._train;
2376823    if _N_=1 then do;
MPRINT(EM_DIAGRAM):   if _N_=1 then do;
2376824    output;
MPRINT(EM_DIAGRAM):   output;
2376825    stop;
MPRINT(EM_DIAGRAM):   stop;
2376826    end;
MPRINT(EM_DIAGRAM):   end;
2376827    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 1 observations read from the data set WORK._TRAIN.
NOTE: The data set WORK._METATESTVIEW has 1 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

2376828    proc contents data=work._train
2376829    out=WORK.M0QIAQ9P noprint;
MPRINT(EM_DIAGRAM):    proc contents data=work._train out=WORK.M0QIAQ9P noprint;
2376830    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: The data set WORK.M0QIAQ9P has 24 observations and 40 variables.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376831    data WORK.M0QIAQ9P;
MPRINT(EM_DIAGRAM):    data WORK.M0QIAQ9P;
2376832    length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 INDEXTYPE $
2376832  !  9;
MPRINT(EM_DIAGRAM):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 20 INFORMAT $20 INDEX $ 1 
INDEXTYPE $ 9;
2376833    label NAME =;
MPRINT(EM_DIAGRAM):   label NAME =;
2376834    set WORK.M0QIAQ9P(keep=name type length label format formatl formatd informat
2376834  ! informl informd idxusage rename=(type=itype));
MPRINT(EM_DIAGRAM):   set WORK.M0QIAQ9P(keep=name type length label format formatl formatd 
informat informl informd idxusage rename=(type=itype));
2376835    if itype = 1 then type = 'N';
MPRINT(EM_DIAGRAM):   if itype = 1 then type = 'N';
2376836    else type = 'C';
MPRINT(EM_DIAGRAM):   else type = 'C';
2376837    if formatl > 0 then do;
MPRINT(EM_DIAGRAM):   if formatl > 0 then do;
2376838    if format ne ' ' then format = strip(format)!!strip(put(formatl,
2376838  ! best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   if format ne ' ' then format = strip(format)!!strip(put(formatl, 
best12.))!!'.'!!strip(put(formatd, best12.));
2376839    else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EM_DIAGRAM):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, 
best12.));
2376840    end;
MPRINT(EM_DIAGRAM):   end;
2376841    else if format ne '' then format = strip(format)!!'.';
MPRINT(EM_DIAGRAM):   else if format ne '' then format = strip(format)!!'.';
2376842    if informl > 0 then do;
MPRINT(EM_DIAGRAM):   if informl > 0 then do;
2376843    if informat ne ' ' then informat = strip(informat)!!strip(put(informl,
2376843  ! best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   if informat ne ' ' then informat = strip(informat)!!strip(put(informl, 
best12.))!!'.'!!strip(put(informd, best12.));
2376844    else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EM_DIAGRAM):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, 
best12.));
2376845    end;
MPRINT(EM_DIAGRAM):   end;
2376846    else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EM_DIAGRAM):   else if informat ne '' then informat = strip(informat)!!'.';
2376847    if idxusage = 'NONE' then index ="N";
MPRINT(EM_DIAGRAM):   if idxusage = 'NONE' then index ="N";
2376848    else index = "Y";
MPRINT(EM_DIAGRAM):   else index = "Y";
2376849    indextype = idxusage;
MPRINT(EM_DIAGRAM):   indextype = idxusage;
2376850    drop idxusage itype formatl formatd informl informd;
MPRINT(EM_DIAGRAM):   drop idxusage itype formatl formatd informl informd;
2376851    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 24 observations read from the data set WORK.M0QIAQ9P.
NOTE: The data set WORK.M0QIAQ9P has 24 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

2376852    data WORK.M0QIAQ9P;
MPRINT(EM_DIAGRAM):    data WORK.M0QIAQ9P;
2376853    length UNAME $64;
MPRINT(EM_DIAGRAM):   length UNAME $64;
2376854    set WORK.M0QIAQ9P;
MPRINT(EM_DIAGRAM):   set WORK.M0QIAQ9P;
2376855    UNAME = upcase(NAME);
MPRINT(EM_DIAGRAM):   UNAME = upcase(NAME);
2376856    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 24 observations read from the data set WORK.M0QIAQ9P.
NOTE: The data set WORK.M0QIAQ9P has 24 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):    proc sort data=WORK.M1RVCQMH NOTHREADS;
MPRINT(EM_DIAGRAM):   by UNAME;
MPRINT(EM_DIAGRAM):   run;
2376860    data WORK.M1RVCQMH;
MPRINT(EM_DIAGRAM):    data WORK.M1RVCQMH;
2376861    drop UNAME;
MPRINT(EM_DIAGRAM):   drop UNAME;
2376862    set WORK.M1RVCQMH;
MPRINT(EM_DIAGRAM):   set WORK.M1RVCQMH;
2376863    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: There were 24 observations read from the data set WORK.M1RVCQMH.
NOTE: The data set WORK.M1RVCQMH has 24 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):    data WORK.M3VWVOUS(keep=NAME ATTR);
MPRINT(EM_DIAGRAM):   length ATTR $ 20;
MPRINT(EM_DIAGRAM):   set WORK.M1RVCQMH;
MPRINT(EM_DIAGRAM):   if level ne "INTERVAL" then do;
MPRINT(EM_DIAGRAM):   if order = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ORDER';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'FORMATTYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'ROLE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'LEVEL';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if type = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'TYPE';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if index = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'INDEX';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if report = ' ' then do;
MPRINT(EM_DIAGRAM):   attr = 'REPORT';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort NOTHREADS;
MPRINT(EM_DIAGRAM):   by attr;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data WORK.M1RVCQMH;
MPRINT(EM_DIAGRAM):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $ 
10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EM_DIAGRAM):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EM_DIAGRAM):   set WORK.M1RVCQMH;
MPRINT(EM_DIAGRAM):   if formattype = ' ' then do;
MPRINT(EM_DIAGRAM):   if format ne ' ' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
MPRINT(EM_DIAGRAM):   pos = indexc(format,'.1234567890');
MPRINT(EM_DIAGRAM):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EM_DIAGRAM):   else tempfmt = ' ';
MPRINT(EM_DIAGRAM):   flen = length(tempfmt);
MPRINT(EM_DIAGRAM):   select;
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN" 
"MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO" 
"QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX" "YEAR" "YYMMDD" "YYMON" 
"YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD" 
"EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" )) 
formattype = 'DATE';
MPRINT(EM_DIAGRAM):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype = 
"TIME";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT" 
"NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EM_DIAGRAM):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN" 
"Z" "ZD")) formattype = "CODING";
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   formattype = "USER";
MPRINT(EM_DIAGRAM):   if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EM_DIAGRAM):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EM_DIAGRAM):   else if flen >= 4 then do;
MPRINT(EM_DIAGRAM):   str = substr(tempfmt,1,4);
MPRINT(EM_DIAGRAM):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EM_DIAGRAM):   else if str = "S370" then formattype = "CODING";
MPRINT(EM_DIAGRAM):   else if str = "BEST" then formattype = "NUM";
MPRINT(EM_DIAGRAM):   drop str;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType = 
"DATE";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   drop flen tempfmt pos;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   formatType = "CATEGORY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if formatType = "NUM" then do;
MPRINT(EM_DIAGRAM):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EM_DIAGRAM):   else formatType = "QUANTITY";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = ' ' then do;
MPRINT(EM_DIAGRAM):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level = 
"NOMINAL";
MPRINT(EM_DIAGRAM):   else level = "INTERVAL";
MPRINT(EM_DIAGRAM):   levelAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else level = upcase(level);
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   length name_prefix $8 _uname $64;
MPRINT(EM_DIAGRAM):   drop name_prefix _uname _freqflag;
MPRINT(EM_DIAGRAM):   retain _freqflag;
MPRINT(EM_DIAGRAM):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EM_DIAGRAM):   _uname = upcase(NAME);
MPRINT(EM_DIAGRAM):   select(_uname);
MPRINT(EM_DIAGRAM):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_SEGMENT') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('_NODE_') do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   when('URI') ROLE = 'URL';
MPRINT(EM_DIAGRAM):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'REJECTED';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'FREQ';
MPRINT(EM_DIAGRAM):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EM_DIAGRAM):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   name_prefix = scan(_uname, 1, '_');
MPRINT(EM_DIAGRAM):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EM_DIAGRAM):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EM_DIAGRAM):   ROLE = 'CLASSIFICATION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EM_DIAGRAM):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS', 
'RAT') then ROLE = 'RESIDUAL';
MPRINT(EM_DIAGRAM):   else if name_prefix ='D' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'DECISION';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix ='B' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'SEGMENT';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI', 
'IC') then ROLE = 'ASSESS';
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR', 
'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL', 
'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT', 
'TIMEID');
MPRINT(EM_DIAGRAM):   drop _found_ i;
MPRINT(EM_DIAGRAM):   _found_=0;
MPRINT(EM_DIAGRAM):   do i=1 to 19 until(_found_=1);
MPRINT(EM_DIAGRAM):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EM_DIAGRAM):   ROLE=_ROLE_{i};
MPRINT(EM_DIAGRAM):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EM_DIAGRAM):   _found_=1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if length(_uname)>2 then do;
MPRINT(EM_DIAGRAM):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EM_DIAGRAM):   ROLE = 'ID';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EM_DIAGRAM):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if role = ' ' then do;
MPRINT(EM_DIAGRAM):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EM_DIAGRAM):   else role = 'INPUT';
MPRINT(EM_DIAGRAM):   roleAssigned = 1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else role = upcase(role);
MPRINT(EM_DIAGRAM):   if REPORT = '' then REPORT = 'N';
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(HPDM_PERFORMANCE):  ;
PERFORMANCE  DETAILS
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):    proc dmdb data=work._train(obs=1000000) batch classOut=_DMDB1UDNJLC 
maxLevel=22;
MPRINT(EM_DIAGRAM):   class
MPRINT(DMDBCLASS):   AcceptedCmp1 AcceptedCmp2 AcceptedCmp3 AcceptedCmp4 AcceptedCmp5 Complain 
DepVar Education Income Kidhome Marital_Status MntFishProducts MntFruits MntGoldProds 
MntMeatProducts MntSweetProducts MntWines NumCatalogPurchases NumDealsPurchases 
NumStorePurchases NumWebPurchases NumWebVisitsMonth Recency Teenhome
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc freq data=_DMDB1UDNJLC noprint;
MPRINT(EM_DIAGRAM):   table name / out=_DMDBCOUNT1UDNJLC(drop=percent rename=(count=NLEVEL));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _MISS1UDNJLC(rename=(frequency=NMISS));
MPRINT(EM_DIAGRAM):   set _DMDB1UDNJLC(where=(NRAW=. and CRAW=''));
MPRINT(EM_DIAGRAM):   keep name frequency;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_MISS1UDNJLC;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_DMDBCOUNT1UDNJLC;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _COUNTS1UDNJLC;
MPRINT(EM_DIAGRAM):   merge _DMDBCOUNT1UDNJLC _MISS1UDNJLC;
MPRINT(EM_DIAGRAM):   label NLEVEL= 'Number of Category';
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if NMISS > 0 then do;
MPRINT(EM_DIAGRAM):   NLEVEL= NLEVEL-1;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else NMISS = 0;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    proc sort data=_COUNTS1UDNJLC NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M1RVCQMH NOTHREADS;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data WORK.M1RVCQMH;
MPRINT(EM_DIAGRAM):   length NLEVEL 8 nmiss 8;
MPRINT(EM_DIAGRAM):   update WORK.M1RVCQMH _COUNTS1UDNJLC;
MPRINT(EM_DIAGRAM):   by name;
MPRINT(EM_DIAGRAM):   if name='' then name='_';
MPRINT(EM_DIAGRAM):   if levelAssigned and ROLE ne 'FREQ' then do;
MPRINT(EM_DIAGRAM):   select(NLEVEL);
MPRINT(EM_DIAGRAM):   when(.) do;
MPRINT(EM_DIAGRAM):   if type eq 'C' then level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   else level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   when(0) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(1) level = 'UNARY';
MPRINT(EM_DIAGRAM):   when(2) level = 'BINARY';
MPRINT(EM_DIAGRAM):   otherwise do;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if roleAssigned then do;
MPRINT(EM_DIAGRAM):   if level = 'NOMINAL' and NLEVEL > 20 then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   comment = "Exceeds maximum number of levels cutoff";
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if level = 'UNARY' and ROLE ne 'FREQ' then role='REJECTED';
MPRINT(EM_DIAGRAM):   drop NLEVEL nmiss;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL= 
"Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY= 
"Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower limit" UPPERLIMIT= 
"Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL= 
"Label" LENGTH= "Length";
MPRINT(EM_DIAGRAM):   drop levelAssigned roleAssigned;
MPRINT(EM_DIAGRAM):   run;
2377148    title8;
MPRINT(EM_DIAGRAM):    title8;
2377149    proc datasets lib=work nolist;
The SAS System

MPRINT(EM_DIAGRAM):    proc datasets lib=work nolist;
2377150    delete _train;
MPRINT(EM_DIAGRAM):   delete _train;
2377151    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Deleting WORK._TRAIN (memtype=DATA).

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      

2377152    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
2377153    delete _ptrain;
MPRINT(EM_DIAGRAM):   delete _ptrain;
2377154    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Deleting WORK._PTRAIN (memtype=DATA).

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.07 seconds
      cpu time            0.04 seconds
      

2377155    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
2377156    delete _valid;
MPRINT(EM_DIAGRAM):   delete _valid;
2377157    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Deleting WORK._VALID (memtype=DATA).

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.08 seconds
      cpu time            0.09 seconds
      

2377158    proc datasets lib=work nolist;
MPRINT(EM_DIAGRAM):   proc datasets lib=work nolist;
2377159    delete _pvalid;
MPRINT(EM_DIAGRAM):   delete _pvalid;
2377160    run;
MPRINT(EM_DIAGRAM):   run;

NOTE: Deleting WORK._PVALID (memtype=DATA).
2377161    %makeResidualVars(target=DepVar, decmeta=EMWS8.Rule6_DepVar_DM , fref=#LN19814);

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds
      

MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   set EMWS8.Rule6_DepVar_DM end=eof;
MPRINT(MAKERESIDUALVARS):   where _TYPE_ in('TARGET', 'FROM');
MPRINT(MAKERESIDUALVARS):   if _TYPE_='TARGET' then call symput('target_level', strip(LEVEL));
MPRINT(MAKERESIDUALVARS):   else call symput('from_var', strip(VARIABLE));
MPRINT(MAKERESIDUALVARS):   run;

NOTE: There were 2 observations read from the data set EMWS8.RULE6_DEPVAR_DM.
      WHERE _TYPE_ in ('FROM', 'TARGET');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   set EMWS8.Rule6_DepVar_DM;
MPRINT(MAKERESIDUALVARS):   where _TYPE_ ='PREDICTED';
MPRINT(MAKERESIDUALVARS):   call symput('pred_vars'!!strip(put(_N_,BEST.)), strip(Variable));
MPRINT(MAKERESIDUALVARS):   run;

NOTE: There were 2 observations read from the data set EMWS8.RULE6_DEPVAR_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   set EMWS8.Rule6_DepVar_DM end=eof;
MPRINT(MAKERESIDUALVARS):   where _TYPE_ ='RESIDUAL';
MPRINT(MAKERESIDUALVARS):   call symput('res_vars'!!strip(put(_N_,BEST.)), strip(Variable));
MPRINT(MAKERESIDUALVARS):   call symput('res_labels'!!strip(put(_N_,BEST.)), 
strip(tranwrd(LABEL,"'","''")));
MPRINT(MAKERESIDUALVARS):   call symput('res_levels'!!strip(put(_N_,BEST.)), 
strip(tranwrd(LEVEL,"'","''")));
MPRINT(MAKERESIDUALVARS):   if eof then call symput('numLevels', strip(put(_N_,BEST.)));
MPRINT(MAKERESIDUALVARS):   run;

NOTE: There were 2 observations read from the data set EMWS8.RULE6_DEPVAR_DM.
      WHERE _TYPE_='RESIDUAL';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(MAKERESIDUALVARS):   data _null_;
MPRINT(MAKERESIDUALVARS):   file #LN19814;
MPRINT(MAKERESIDUALVARS):   put 
"*------------------------------------------------------------*;";
MPRINT(MAKERESIDUALVARS):   put "*Computing Residual Vars: DepVar;";
MPRINT(MAKERESIDUALVARS):   put 
"*------------------------------------------------------------*;";
MPRINT(MAKERESIDUALVARS):   put "Label R_DepVar1='Residual: DepVar=1';";
MPRINT(MAKERESIDUALVARS):   put "Label R_DepVar0='Residual: DepVar=0';";
MPRINT(MAKERESIDUALVARS):   put "if ";
MPRINT(MAKERESIDUALVARS):   put " F_DepVar ne '1'";
MPRINT(MAKERESIDUALVARS):   put "and F_DepVar ne '0'";
MPRINT(MAKERESIDUALVARS):   put " then do;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar1=.;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar0=.;";
MPRINT(MAKERESIDUALVARS):   put "end;";
MPRINT(MAKERESIDUALVARS):   put "else do;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar1= - P_DepVar1;";
MPRINT(MAKERESIDUALVARS):   put "R_DepVar0= - P_DepVar0;";
MPRINT(MAKERESIDUALVARS):   put "select(F_DepVar);";
MPRINT(MAKERESIDUALVARS):   put "when('1')R_DepVar1= R_DepVar1+1;";
MPRINT(MAKERESIDUALVARS):   put "when('0')R_DepVar0= R_DepVar0+1;";
MPRINT(MAKERESIDUALVARS):   put 'otherwise;';
MPRINT(MAKERESIDUALVARS):   put 'end;';
MPRINT(MAKERESIDUALVARS):   put 'end;';
MPRINT(MAKERESIDUALVARS):   run;

NOTE: The file #LN19814 is:
      Filename=C:\\predictive-models-project\Workspaces\EMWS8\Rule6\RESIDUALCODE.sas,
      RECFM=V,LRECL=256,File Size (bytes)=0,
      Last Modified=28. April 2016 10.27 Uhr,
      Create Time=28. April 2016 01.18 Uhr

NOTE: 21 records were written to the file #LN19814.
      The minimum record length was 3.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(EM_DIAGRAM):  ;

MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
